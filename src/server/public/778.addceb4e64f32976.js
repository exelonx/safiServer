"use strict";(self.webpackChunksafiApp=self.webpackChunksafiApp||[]).push([[778],{2778:(Tn,$,u)=>{u.r($),u.d($,{PedidoModule:()=>fn,options:()=>_n});var d=u(6895),f=u(3060),P=u(3020),s=u(4006),t=u(4650),I=u(2340),C=u(8505),m=u(262),p=u(9646),rt=u(4004),w=u(529);let O=(()=>{class n{constructor(e){this.http=e,this.mesas=[],this.pedidoSeleccionado={ID:0,ID_USUARIO:0,USUARIO:"",NOMBRE_USUARIO:"",ID_ESTADO:0,ID_MESA:0,NOMBRE:"",TIPO:"",ID_CAJA:0,SUBTOTAL:0,NOMBRE_CLIENTE:"",HORA_SOLICITUD:new Date,HORA_FINALIZACION:new Date,MODIFICADO_POR:"",FECHA_MODIFICACION:new Date},this.detalleSeleccionado={ID:0,ID_PEDIDO:0,ID_PRODUCTO:0,NOMBRE_PRODUCTO:"",PRECIO_PRODUCTO:0,DESCRIPCION:"",EXENTA:!1,ID_ESTADO:0,ESTADO:"",COLOR:"",CANTIDAD:0,PARA_LLEVAR:!1,HORA:new Date,INFORMACION:"",TOTAL_IMPUESTO:"",PRECIO_DETALLE:"",PORCENTAJE_IMPUESTO:0,ID_IMPUESTO:0,canjeado:!1},this.baseURL=I.N.baseURL}getMesas(){return this.http.get(`${this.baseURL}/mesa/`).pipe((0,C.b)(o=>{this.mesas=o.mesas}),(0,m.K)(o=>(0,p.of)(o.error.msg)))}getMesa(e){return this.http.get(`${this.baseURL}/mesa/get/${e}`).pipe((0,C.b)(i=>{this.mesas.push(i.mesa)}),(0,m.K)(i=>(0,p.of)(i.error.msg)))}getPedidoDeMesa(e){return this.http.get(`${this.baseURL}/mesa/pedido/${e}`).pipe((0,m.K)(i=>(0,p.of)(i.error.msg)))}getProductos(e="",o="",i=""){return this.http.get(`${this.baseURL}/mesa/pedido/productos/agregar?buscar=${e}&idTipoProducto=${o||""}&idCategoria=${i||""}`).pipe((0,m.K)(c=>(0,p.of)(c.error.msg)))}postMesaPedido(e,o,i,r="",c=[]){return this.http.post(`${this.baseURL}/mesa/`,{tipoPedido:e,nombre:o,id_usuario:i,informacion:r,arregloNombres:c}).pipe((0,m.K)(E=>(0,p.of)(E.error)))}getDetallePedido(e){return this.http.get(`${this.baseURL}/mesa/pedido/detalle/${e}`).pipe((0,m.K)(i=>(0,p.of)(i.error.msg)))}getUnDetallePedido(e){return this.http.get(`${this.baseURL}/mesa/pedido/detalle/un/${e}`).pipe((0,C.b)(i=>{this.detalleSeleccionado=i.detalle}),(0,m.K)(i=>(0,p.of)(i.error.msg)))}validarDetalle(e){return this.http.get(`${this.baseURL}/mesa/pedido/detalle/un/${e}`).pipe((0,rt.U)(i=>!0),(0,m.K)(i=>(0,p.of)(!1)))}getBebidas(){return this.http.get(`${this.baseURL}/mesa/bebida/lista`).pipe((0,m.K)(o=>(0,p.of)(o.error.msg)))}postDetalle(e,o,i){return this.http.post(`${this.baseURL}/mesa/detalle`,{arregloProductos:e,id_pedido:o,id_usuario:i}).pipe((0,m.K)(l=>(0,p.of)(l.error)))}putEstadoDetalle(e,o){return this.http.put(`${this.baseURL}/mesa/detalle/${e}`,{id_usuario:o}).pipe((0,m.K)(c=>(0,p.of)(c.error)))}deleteUnDetalle(e,o,i){return this.http.post(`${this.baseURL}/mesa/detalle/${e}`,{id_usuario:o,razon:i}).pipe((0,m.K)(l=>(0,p.of)(l.error)))}deletePedido(e,o,i){return console.log(e),this.http.post(`${this.baseURL}/mesa/pedido/${e}`,{id_usuario:o,razon:i}).pipe((0,m.K)(l=>(0,p.of)(l.error)))}getReporte(e=""){return this.http.post(`${this.baseURL}/pedido/reporteria/pedido`,{buscar:e},{responseType:"blob"}).pipe((0,m.K)(r=>(0,p.of)(r.error.msg)))}putDetalle(e,o,i,r,c){return this.http.put(`${this.baseURL}/mesa/detalle/actualizar/${e}`,{id_producto:o,cantidad:i,id_usuario:r,razon:c}).pipe((0,m.K)(E=>(0,p.of)(E.error.msg)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(w.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var h=u(6518),A=u(1199),q=u(7587),k=u(3033),v=u(4859),b=u(7392),Z=u(1572);let st=(()=>{class n{constructor(){this.onFiltro=new t.vpe,this.estado=""}ngOnInit(){}filtrar(e){this.estado=e,this.onFiltro.emit(e)}bgFiltro(e){return this.estado===e?"bg-dark":""}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-barra-estado"]],outputs:{onFiltro:"onFiltro"},decls:27,vars:10,consts:[[1,"container-fluid","d-flex","justify-content-center",2,"background-color","#3f3f3f"],[3,"click"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"text-light"],[1,"text-center","text-light","pt-1","descripcion"],["src","/assets/icons/Pendiente.svg","height","25","width","25","alt","",1,"tama\xf1o-iconos"],["src","/assets/icons/Cocinando.svg","height","25","width","25","alt","",1,"tama\xf1o-iconos"],["src","/assets/icons/Listo.svg","height","25","width","25","alt","",1,"tama\xf1o-iconos"],["src","/assets/icons/Servido.svg","height","25","width","25","alt","",1,"tama\xf1o-iconos"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return o.filtrar("")}),t.TgZ(2,"div",2)(3,"mat-icon",3),t._uU(4,"apps"),t.qZA(),t.TgZ(5,"h6",4),t._uU(6,"Todos"),t.qZA()()(),t.TgZ(7,"div",1),t.NdJ("click",function(){return o.filtrar("Pendiente")}),t.TgZ(8,"div",2),t._UZ(9,"img",5),t.TgZ(10,"h6",4),t._uU(11,"Pendiente"),t.qZA()()(),t.TgZ(12,"div",1),t.NdJ("click",function(){return o.filtrar("Cocinando")}),t.TgZ(13,"div",2),t._UZ(14,"img",6),t.TgZ(15,"h6",4),t._uU(16,"Cocinando"),t.qZA()()(),t.TgZ(17,"div",1),t.NdJ("click",function(){return o.filtrar("Listo")}),t.TgZ(18,"div",2),t._UZ(19,"img",7),t.TgZ(20,"h6",4),t._uU(21,"Listo"),t.qZA()()(),t.TgZ(22,"div",1),t.NdJ("click",function(){return o.filtrar("Servido")}),t.TgZ(23,"div",2),t._UZ(24,"img",8),t.TgZ(25,"h6",4),t._uU(26,"Servido"),t.qZA()()()()),2&e&&(t.xp6(1),t.Tol("px-3 espacio-iconos filtroMouse pt-2 "+o.bgFiltro("")),t.xp6(6),t.Tol("px-3 espacio-iconos filtroMouse pt-2 "+o.bgFiltro("Pendiente")),t.xp6(5),t.Tol("px-3 justify-content-center espacio-iconos filtroMouse pt-2 "+o.bgFiltro("Cocinando")),t.xp6(5),t.Tol("px-3 justify-content-center espacio-iconos filtroMouse pt-2 "+o.bgFiltro("Listo")),t.xp6(5),t.Tol("px-3 justify-content-center espacio-iconos filtroMouse pt-2 "+o.bgFiltro("Servido")))},dependencies:[b.Hw],styles:["@media (max-width:520px){.tama\\f1o-iconos[_ngcontent-%COMP%]{width:25px;height:25px}.descripcion[_ngcontent-%COMP%]{font-size:xx-small}.espacio-iconos[_ngcontent-%COMP%]{max-width:60px}}@media (max-width:310px){.tama\\f1o-iconos[_ngcontent-%COMP%]{width:25px;height:25px}.descripcion[_ngcontent-%COMP%]{font-size:xx-small}.espacio-iconos[_ngcontent-%COMP%]{max-width:55px}}.filtroMouse[_ngcontent-%COMP%]{cursor:pointer}"]}),n})();var M=u(5861),U=u(5475),ct=u(5226),g=u.n(ct);const lt=["cerrarCrear"],dt=["checkDividido"],ut=["numeroPersonas"],mt=["acordion"];function pt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",24)(2,"label",47),t._uU(3,"Nombre"),t.qZA(),t.TgZ(4,"input",48),t.NdJ("keyup",function(){const r=t.CHM(e).index,c=t.oxw();return t.KtG(c.toMayusArray(c.cuentaDivididaArr,r))}),t.qZA()()()}if(2&n){const e=a.index;t.xp6(2),t.MGl("for","nombre",e,""),t.xp6(2),t.MGl("id","nombre",e,"")("placeholder","Persona ",e+1,""),t.Q6J("formControlName",e)}}let gt=(()=>{class n{constructor(e,o,i){this.fb=e,this.pedidoService=o,this.authService=i,this.onCerrar=new t.vpe,this.onCrear=new t.vpe,this.manipulado=!1,this.enEjecucion=!1,this.pedidoNormalForm=!0,this.checked=!1,this.formularioMostrador=this.fb.group({nombre:["",[s.kI.required,s.kI.maxLength(15)]],informacion:["",s.kI.maxLength(200)]}),this.formularioCuentaDividida=this.fb.group({nombre:this.fb.array([["",[s.kI.required,s.kI.maxLength(45)]],["",[s.kI.required,s.kI.maxLength(45)]]],s.kI.required)}),this.formularioNuevoNormal=this.fb.group({nombre:["",[s.kI.required,s.kI.maxLength(15)]]}),this.panelOpenState=!1,this.toMayus=U.K.toMayus,this.toMayusArray=U.K.toMayusArray}get cuentaDivididaArr(){return this.formularioCuentaDividida.get("nombre")}changeChecked(){var e=this;return(0,M.Z)(function*(){e.checked=e.checkDividido.nativeElement.checked})()}ngOnDestroy(){this.cerrarCrear._elementRef.nativeElement.click()}checkedControl(){return this.checked&&this.formularioCuentaDividida.invalid||this.formularioNuevoNormal.invalid}validarNumeros(e){return(0,M.Z)(function*(){("+"===e.key||"-"===e.key||"e"===e.key||"E"===e.key||"."===e.key)&&e.preventDefault()})()}subirValor(){this.numeroPersonas.nativeElement.value++,this.actualizarDivisionDeCuenta()}bajarValor(){this.numeroPersonas.nativeElement.value>2&&(this.numeroPersonas.nativeElement.value--,this.actualizarDivisionDeCuenta())}actualizarDivisionDeCuenta(){let e=parseInt(this.numeroPersonas.nativeElement.value);if(e>this.cuentaDivididaArr.length)for(let o=0;o<e-this.cuentaDivididaArr.length;o++)this.cuentaDivididaArr.push(this.fb.control("",[s.kI.required,s.kI.maxLength(45)]));if(e<this.cuentaDivididaArr.length)for(let o=e;o<this.cuentaDivididaArr.length;o++)this.cuentaDivididaArr.removeAt(o)}postMesaPedido(){let e="MESA",o=this.formularioNuevoNormal.get("nombre")?.value||"",i="",r=[],c=this.authService.usuario.id_usuario;this.enEjecucion||(this.pedidoNormalForm||(e="MOSTRADOR",o=this.formularioMostrador.get("nombre")?.value||"",i=this.formularioMostrador.get("informacion")?.value),this.pedidoNormalForm&&this.checked&&(r=this.cuentaDivididaArr.value),this.pedidoService.postMesaPedido(e,o,c,i,r).subscribe(l=>{!0===l.ok?(this.onCrear.emit(),this.enEjecucion=!1,this.manipulado=!1,this.cerrarCrear._elementRef.nativeElement.click(),g().fire({title:"\xa1\xc9xito!",text:l.msg,icon:"success",iconColor:"white",background:"#a5dc86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0})):(this.enEjecucion=!1,g().fire({title:"Advertencia",text:l.msg,icon:"warning",iconColor:"white",background:"#f8bb86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0}))}))}cerrar(){this.manipulado?g().fire({title:"\xa1Cambios sin guardar!",text:"\xbfDesea salir del formulario sin guardar los cambios?",icon:"question",showCancelButton:!0,confirmButtonColor:"#898989",cancelButtonColor:"#d12609",confirmButtonText:"Salir sin guardar",cancelButtonText:"Permanecer",reverseButtons:!0,background:"#2B2B2B",color:"#fff",heightAuto:!1}).then(e=>{e.isConfirmed&&(this.manipulado=!1,this.cerrarCrear._elementRef.nativeElement.click(),setTimeout(()=>{this.onCerrar.emit(!1)},100))}):(this.cerrarCrear._elementRef.nativeElement.click(),setTimeout(()=>{this.onCerrar.emit(!1)},100))}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(O),t.Y36(h.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-crear-pedido"]],viewQuery:function(e,o){if(1&e&&(t.Gf(lt,5),t.Gf(dt,5),t.Gf(ut,5),t.Gf(mt,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.cerrarCrear=i.first),t.iGM(i=t.CRH())&&(o.checkDividido=i.first),t.iGM(i=t.CRH())&&(o.numeroPersonas=i.first),t.iGM(i=t.CRH())&&(o.acordion=i.first)}},outputs:{onCerrar:"onCerrar",onCrear:"onCrear"},decls:75,vars:5,consts:[["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true","data-bs-backdrop","static","data-bs-keyboard","false",1,"modal","fade"],[1,"modal-dialog"],["id","fondoModal",1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["mat-icon-button","","color","warn","type","button",3,"click"],["mat-icon-button","","color","warn","data-bs-dismiss","modal","aria-label","Close","type","button",1,"visually-hidden",3,"click"],["cerrarCrear",""],[1,"modal-body","p-0"],["id","accordionExample",1,"accordion"],[1,"accordion-item","rounded-0"],["id","headingOne",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseOne","aria-expanded","true","aria-controls","collapseOne",1,"accordion-button","rounded-0",3,"click"],["id","collapseOne","aria-labelledby","headingOne","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],[1,"form"],[3,"formGroup"],[1,"inputfield"],["type","text","formControlName","nombre","placeholder","",1,"form-control",3,"keyup"],[1,"mt-3","form-check"],["type","checkbox","id","flexCheckDefault","data-bs-toggle","collapse","data-bs-target","#collapseExample","aria-expanded","false","aria-controls","collapseExample",1,"form-check-input",3,"click"],["checkDividido",""],["for","flexCheckDefault",1,"form-check-label"],["id","collapseExample",1,"mt-3","collapse"],[1,"mb-3"],["for",""],[1,"row"],[1,"col-5","pe-0"],["type","number","placeholder","","min","2","value","2",1,"form-control",2,"text-align","end",3,"keydown","paste","change"],["numeroPersonas",""],[1,"col-1","px-0"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"],["formArrayName","nombre"],[4,"ngFor","ngForOf"],["id","headingTwo",1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapseTwo","aria-expanded","false","aria-controls","collapseTwo",1,"accordion-button","collapsed","rounded-0",3,"click"],["id","collapseTwo","aria-labelledby","headingTwo","data-bs-parent","#accordionExample",1,"accordion-collapse","collapse"],[1,""],["for","mesaInput",1,"form-label"],["type","text","id","mesaInput","formControlName","nombre","placeholder","Nombre",1,"form-control",3,"keyup"],["for","personas",1,"form-label"],[1,"d-flex"],["type","text","formControlName","informacion","id","personas","placeholder","Informaci\xf3n",1,"form-control",3,"keyup"],[1,"modal-footer"],["mat-flat-button","","type","button",1,"btn-a",3,"disabled","click"],[1,"ms-2","me-1"],[1,"me-2"],[1,"",3,"for"],["type","text",1,"form-control",3,"id","placeholder","formControlName","keyup"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),t._uU(5,"Crear Pedido"),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return o.cerrar()}),t.TgZ(7,"mat-icon"),t._uU(8,"cancel"),t.qZA()(),t.TgZ(9,"button",6,7),t.NdJ("click",function(){return o.cerrar()}),t.TgZ(11,"mat-icon"),t._uU(12,"cancel"),t.qZA()()(),t.TgZ(13,"div",8)(14,"div",9)(15,"div",10)(16,"h2",11)(17,"button",12),t.NdJ("click",function(){return o.pedidoNormalForm=!0}),t._uU(18," Pedido Normal "),t.qZA()(),t.TgZ(19,"div",13)(20,"div",14)(21,"div",15)(22,"form",16)(23,"div",17)(24,"label"),t._uU(25,"Mesa *"),t.qZA(),t.TgZ(26,"input",18),t.NdJ("keyup",function(){return o.toMayus(o.formularioNuevoNormal,"nombre")}),t.qZA()()(),t.TgZ(27,"div",19)(28,"input",20,21),t.NdJ("click",function(){return o.changeChecked()}),t.qZA(),t.TgZ(30,"label",22),t._uU(31,"Cuenta Dividida"),t.qZA()(),t.TgZ(32,"div",23)(33,"div",24)(34,"label",25),t._uU(35,"N\xfamero de personas a pagar"),t.qZA(),t.TgZ(36,"div",26)(37,"div",27)(38,"input",28,29),t.NdJ("keydown",function(r){return r.preventDefault()})("paste",function(r){return r.preventDefault()})("change",function(){return o.actualizarDivisionDeCuenta()}),t.qZA()(),t.TgZ(40,"div",30)(41,"button",31),t.NdJ("click",function(){return o.subirValor()}),t.TgZ(42,"mat-icon"),t._uU(43,"expand_less"),t.qZA()()(),t.TgZ(44,"div",30)(45,"button",31),t.NdJ("click",function(){return o.bajarValor()}),t.TgZ(46,"mat-icon"),t._uU(47,"expand_more"),t.qZA()()()()(),t.TgZ(48,"form",16)(49,"div",32),t.YNc(50,pt,5,4,"div",33),t.qZA()()()()()()(),t.TgZ(51,"div",10)(52,"h2",34)(53,"button",35),t.NdJ("click",function(){return o.pedidoNormalForm=!1}),t._uU(54," Pedido de Mostrador "),t.qZA()(),t.TgZ(55,"div",36)(56,"div",14)(57,"div",37)(58,"div",15)(59,"form",16)(60,"div",24)(61,"label",38),t._uU(62,"Nombre *"),t.qZA(),t.TgZ(63,"input",39),t.NdJ("keyup",function(){return o.toMayus(o.formularioMostrador,"nombre")}),t.qZA()(),t.TgZ(64,"div",24)(65,"label",40),t._uU(66,"Informaci\xf3n"),t.qZA(),t.TgZ(67,"div",41)(68,"input",42),t.NdJ("keyup",function(){return o.toMayus(o.formularioMostrador,"informacion")}),t.qZA()()()()()()()()()()(),t.TgZ(69,"div",43)(70,"button",44),t.NdJ("click",function(){return o.postMesaPedido()}),t.TgZ(71,"mat-icon",45),t._uU(72,"add_circle_outline"),t.qZA(),t.TgZ(73,"span",46),t._uU(74,"Guardar"),t.qZA()()()()()()),2&e&&(t.xp6(22),t.Q6J("formGroup",o.formularioNuevoNormal),t.xp6(26),t.Q6J("formGroup",o.formularioCuentaDividida),t.xp6(2),t.Q6J("ngForOf",o.cuentaDivididaArr.controls),t.xp6(9),t.Q6J("formGroup",o.formularioMostrador),t.xp6(11),t.Q6J("disabled",o.pedidoNormalForm?o.checkedControl():o.formularioMostrador.invalid))},dependencies:[d.sg,v.lW,b.Hw,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,s.CE],styles:[".example-full-width[_ngcontent-%COMP%]{width:100%;color:#fff}.example-mid-width[_ngcontent-%COMP%]{width:48%;color:#fff}.btn-p[_ngcontent-%COMP%]{border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;padding:inherit}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}.btn-a[_ngcontent-%COMP%]{background-color:#898989!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;transition:.3s ease all;border-radius:10px;padding:inherit}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}.modal-body[_ngcontent-%COMP%]{background-color:#2b2b2b}.modal-footer[_ngcontent-%COMP%]{background-color:#454545}#fondoModal[_ngcontent-%COMP%]{background-color:#232323!important;color:#fff}@media only screen and (max-width:991px){.eliminarPaddin[_ngcontent-%COMP%]{padding-left:0}.textResponsive[_ngcontent-%COMP%]{font-size:small!important}}.textResponsive[_ngcontent-%COMP%]{font-size:small!important}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{min-height:3.125rem;line-height:initial;color:#000!important}.form-control[_ngcontent-%COMP%]:focus{background-color:#fff;box-shadow:none}"]}),n})();var J=u(3238),B=u(1733),T=u(1561);const _t=["cerrarEliminar"];function ft(n,a){1&n&&(t.TgZ(0,"div",23),t._UZ(1,"mat-spinner",24),t.qZA())}let ht=(()=>{class n{constructor(e,o,i){this.pedidoService=e,this.authSerive=o,this.fb=i,this.onCerrar=new t.vpe,this.cantidad=0,this.nombre="",this.mesa="",this.id_detalle=0,this.enEjecucion=!1,this.formularioEliminacion=this.fb.group({motivo:["",[s.kI.required,s.kI.maxLength(50),s.kI.minLength(10)]]})}cerrar(){setTimeout(()=>{this.onCerrar.emit(!1)},250)}eliminar(){if(!this.enEjecucion){this.enEjecucion=!0;const e=this.authSerive.usuario.id_usuario,{motivo:o}=this.formularioEliminacion.value;this.pedidoService.deleteUnDetalle(this.id_detalle,e,o).subscribe(i=>{!0===i.ok?(this.enEjecucion=!1,this.cerrarEliminar._elementRef.nativeElement.click(),g().fire({title:"\xa1\xc9xito!",text:i.msg,icon:"success",iconColor:"white",background:"#a5dc86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0})):(this.enEjecucion=!1,g().fire({title:"Advertencia",text:i.msg,icon:"warning",iconColor:"white",background:"#f8bb86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0}))})}}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O),t.Y36(h.e),t.Y36(s.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-eliminar-detalle"]],viewQuery:function(e,o){if(1&e&&t.Gf(_t,5),2&e){let i;t.iGM(i=t.CRH())&&(o.cerrarEliminar=i.first)}},inputs:{cantidad:"cantidad",nombre:"nombre",mesa:"mesa",id_detalle:"id_detalle"},outputs:{onCerrar:"onCerrar"},decls:34,vars:10,consts:[["id","modalEliminarDetalle","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],["id","fondoModal",1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","ms-3"],["mat-icon-button","","color","warn","data-bs-dismiss","modal","aria-label","Close","type","button",3,"click"],["cerrarEliminar",""],[1,"modal-body"],[1,"px-lg-3","py-lg-3","w-100","align-self-center"],[3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],["src","./../../../../../../../assets/icons/WarningRelleno.svg","width","50px","height","50px"],[1,"text-center","fw-normal"],["for","floatingTextarea2"],[1,"form-floating"],["formControlName","motivo","id","floatingTextarea2",1,"form-control",2,"height","100px"],["class","d-flex justify-content-center align-items-center w-100",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"d-flex","flex-wrap"],["mat-flat-button","","type","submit","data-bs-dismiss","modal",1,"btn-p",3,"disabled"],[1,"ms-2","me-1"],[1,"me-2"],[1,"modal-footer"],[1,"d-flex","justify-content-center","align-items-center","w-100"],[1,""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),t._uU(5," Confirmaci\xf3n "),t.qZA(),t.TgZ(6,"button",5,6),t.NdJ("click",function(){return o.cerrar()}),t.TgZ(8,"mat-icon"),t._uU(9,"cancel"),t.qZA()()(),t.TgZ(10,"div",7)(11,"div",8)(12,"form",9),t.NdJ("ngSubmit",function(){return o.eliminar()}),t.TgZ(13,"div",10),t._UZ(14,"img",11),t.qZA(),t.TgZ(15,"h5",12),t._uU(16),t.ALo(17,"lowercase"),t.ALo(18,"titlecase"),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"label",13),t._uU(21,"Motivo:"),t.qZA(),t.TgZ(22,"div",14),t._UZ(23,"textarea",15),t.qZA(),t._UZ(24,"br"),t.YNc(25,ft,2,0,"div",16),t.TgZ(26,"div",17)(27,"div",18)(28,"button",19)(29,"mat-icon",20),t._uU(30,"delete_forever"),t.qZA(),t.TgZ(31,"span",21),t._uU(32,"Eliminar"),t.qZA()()()()()()(),t._UZ(33,"div",22),t.qZA()()()),2&e&&(t.xp6(12),t.Q6J("formGroup",o.formularioEliminacion),t.xp6(4),t.lnq(" \xbfDesea eliminar ",o.cantidad," '",t.lcZ(17,6,o.nombre),"' de la mesa ",t.lcZ(18,8,o.mesa),"? "),t.xp6(9),t.Q6J("ngIf",o.enEjecucion),t.xp6(3),t.Q6J("disabled",o.formularioEliminacion.invalid))},dependencies:[d.O5,v.lW,b.Hw,Z.Ou,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,d.i8,d.rS],styles:[".example-full-width[_ngcontent-%COMP%]{width:100%;color:#fff}.example-mid-width[_ngcontent-%COMP%]{width:48%;color:#fff}.btn-p[_ngcontent-%COMP%]{border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;padding:inherit}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}.btn-a[_ngcontent-%COMP%]{background-color:#898989!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;transition:.3s ease all;border-radius:10px;padding:inherit}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}.modal-body[_ngcontent-%COMP%]{background-color:#2b2b2b}.modal-footer[_ngcontent-%COMP%]{background-color:#454545}#fondoModal[_ngcontent-%COMP%]{background-color:#232323!important;color:#fff}@media only screen and (max-width:991px){.eliminarPaddin[_ngcontent-%COMP%]{padding-left:0}.textResponsive[_ngcontent-%COMP%]{font-size:small!important}}.textResponsive[_ngcontent-%COMP%]{font-size:small!important}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{min-height:3.125rem;line-height:initial;color:#000!important}.form-control[_ngcontent-%COMP%]:focus{background-color:#fff;box-shadow:none}"]}),n})();const bt=["cerrarEliminar"];function Ct(n,a){1&n&&(t.TgZ(0,"div",23),t._UZ(1,"mat-spinner",24),t.qZA())}let vt=(()=>{class n{constructor(e,o,i){this.pedidoService=e,this.authSerive=o,this.fb=i,this.onCerrar=new t.vpe,this.nombre="",this.mesa="",this.id_pedido=0,this.enEjecucion=!1,this.formularioEliminacion=this.fb.group({motivo:["",[s.kI.required,s.kI.maxLength(50),s.kI.minLength(10)]]})}cerrar(){setTimeout(()=>{this.onCerrar.emit(!1)},250)}eliminar(){if(!this.enEjecucion){this.enEjecucion=!0;const e=this.authSerive.usuario.id_usuario,{motivo:o}=this.formularioEliminacion.value;this.pedidoService.deletePedido(this.id_pedido,e,o).subscribe(i=>{!0===i.ok?(this.enEjecucion=!1,this.cerrarEliminar._elementRef.nativeElement.click(),g().fire({title:"\xa1\xc9xito!",text:i.msg,icon:"success",iconColor:"white",background:"#a5dc86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0})):(this.enEjecucion=!1,g().fire({title:"Advertencia",text:i.msg,icon:"warning",iconColor:"white",background:"#f8bb86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0}))})}}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O),t.Y36(h.e),t.Y36(s.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-eliminar-pedido"]],viewQuery:function(e,o){if(1&e&&t.Gf(bt,5),2&e){let i;t.iGM(i=t.CRH())&&(o.cerrarEliminar=i.first)}},inputs:{nombre:"nombre",mesa:"mesa",id_pedido:"id_pedido"},outputs:{onCerrar:"onCerrar"},decls:34,vars:9,consts:[["id","modalEliminarPedido","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],["id","fondoModal",1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","ms-3"],["mat-icon-button","","color","warn","data-bs-dismiss","modal","aria-label","Close","type","button",3,"click"],["cerrarEliminar",""],[1,"modal-body"],[1,"px-lg-3","py-lg-3","w-100","align-self-center"],[3,"formGroup","ngSubmit"],[1,"text-center","mb-4"],["src","./../../../../../../../assets/icons/WarningRelleno.svg","width","50px","height","50px"],[1,"text-center","fw-normal"],["for","floatingTextarea2"],[1,"form-floating"],["formControlName","motivo","id","floatingTextarea2",1,"form-control",2,"height","100px"],["class","d-flex justify-content-center align-items-center w-100",4,"ngIf"],[1,"d-flex","justify-content-center"],[1,"d-flex","flex-wrap"],["mat-flat-button","","type","submit","data-bs-dismiss","modal",1,"btn-p",3,"disabled"],[1,"ms-2","me-1"],[1,"me-2"],[1,"modal-footer"],[1,"d-flex","justify-content-center","align-items-center","w-100"],[1,""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),t._uU(5," Confirmaci\xf3n "),t.qZA(),t.TgZ(6,"button",5,6),t.NdJ("click",function(){return o.cerrar()}),t.TgZ(8,"mat-icon"),t._uU(9,"cancel"),t.qZA()()(),t.TgZ(10,"div",7)(11,"div",8)(12,"form",9),t.NdJ("ngSubmit",function(){return o.eliminar()}),t.TgZ(13,"div",10),t._UZ(14,"img",11),t.qZA(),t.TgZ(15,"h5",12),t._uU(16),t.ALo(17,"titlecase"),t.ALo(18,"titlecase"),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"label",13),t._uU(21,"Motivo:"),t.qZA(),t.TgZ(22,"div",14),t._UZ(23,"textarea",15),t.qZA(),t._UZ(24,"br"),t.YNc(25,Ct,2,0,"div",16),t.TgZ(26,"div",17)(27,"div",18)(28,"button",19)(29,"mat-icon",20),t._uU(30,"delete_forever"),t.qZA(),t.TgZ(31,"span",21),t._uU(32,"Eliminar"),t.qZA()()()()()()(),t._UZ(33,"div",22),t.qZA()()()),2&e&&(t.xp6(12),t.Q6J("formGroup",o.formularioEliminacion),t.xp6(4),t.AsE(" \xbfDesea eliminar el pedido de ",t.lcZ(17,5,o.nombre)," de la mesa ",t.lcZ(18,7,o.mesa),"? "),t.xp6(9),t.Q6J("ngIf",o.enEjecucion),t.xp6(3),t.Q6J("disabled",o.formularioEliminacion.invalid))},dependencies:[d.O5,v.lW,b.Hw,Z.Ou,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,d.rS],styles:[".example-full-width[_ngcontent-%COMP%]{width:100%;color:#fff}.example-mid-width[_ngcontent-%COMP%]{width:48%;color:#fff}.btn-p[_ngcontent-%COMP%]{border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;padding:inherit}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}.btn-a[_ngcontent-%COMP%]{background-color:#898989!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;transition:.3s ease all;border-radius:10px;padding:inherit}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}.modal-body[_ngcontent-%COMP%]{background-color:#2b2b2b}.modal-footer[_ngcontent-%COMP%]{background-color:#454545}#fondoModal[_ngcontent-%COMP%]{background-color:#232323!important;color:#fff}@media only screen and (max-width:991px){.eliminarPaddin[_ngcontent-%COMP%]{padding-left:0}.textResponsive[_ngcontent-%COMP%]{font-size:small!important}}.textResponsive[_ngcontent-%COMP%]{font-size:small!important}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{min-height:3.125rem;line-height:initial;color:#000!important}.form-control[_ngcontent-%COMP%]:focus{background-color:#fff;box-shadow:none}"]}),n})();function xt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("mouseenter",function(){t.CHM(e);const i=t.oxw();return i.eliminarDetalle(i.pedido.ID,"",0),t.KtG(i.eliminando=!0)}),t.TgZ(1,"mat-icon",33),t._uU(2,"delete"),t.qZA(),t.TgZ(3,"span",34),t._uU(4,"Eliminar"),t.qZA()()}}function Tt(n,a){1&n&&(t.TgZ(0,"tr")(1,"td",35),t._uU(2,"Pedido vac\xedo, agregue platos al pedido."),t.qZA()())}function At(n,a){1&n&&(t.TgZ(0,"tr",13)(1,"th",36),t._uU(2,"Estado"),t.qZA(),t.TgZ(3,"th",36),t._uU(4,"Plato"),t.qZA(),t.TgZ(5,"th",36),t._uU(6,"P.Unit"),t.qZA(),t.TgZ(7,"th",36),t._uU(8,"Gravado"),t.qZA(),t.TgZ(9,"th",36),t._uU(10,"Acciones"),t.qZA()())}function Zt(n,a){1&n&&(t.TgZ(0,"mat-icon",42),t._uU(1,"info"),t.qZA())}function Ot(n,a){1&n&&t._UZ(0,"br")}function Pt(n,a){1&n&&(t.TgZ(0,"div",43),t._UZ(1,"mat-spinner",44),t.qZA()),2&n&&(t.xp6(1),t.Q6J("diameter",30))}function Mt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2),r=i.$implicit,c=i.index,l=t.oxw();return t.KtG(l.actualizarEstado(r.ID,c))}),t.TgZ(1,"mat-icon",52),t._uU(2,"update"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Actualizar Estado"),t.qZA()()}if(2&n){const e=t.oxw(2).$implicit;t.Q6J("disabled",4==e.ID_ESTADO)}}function Et(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("mouseenter",function(){t.CHM(e);const i=t.oxw(2).$implicit,r=t.oxw();return r.eliminarDetalle(i.ID,i.NOMBRE_PRODUCTO,i.CANTIDAD),t.KtG(r.eliminando=!0)}),t.TgZ(1,"mat-icon",54),t._uU(2,"delete"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Eliminar"),t.qZA()()}}function It(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"button",45)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,46),t.YNc(6,Mt,5,1,"button",47),t.TgZ(7,"button",48),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return r.seleccionar(),t.KtG(r.seleccionarDetalle(i))}),t.TgZ(8,"mat-icon",49),t._uU(9,"edit"),t.qZA(),t.TgZ(10,"span"),t._uU(11,"Editar"),t.qZA()(),t.YNc(12,Et,5,0,"button",50),t.qZA()()}if(2&n){const e=t.MAs(5),o=t.oxw().$implicit,i=t.oxw();t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(5),t.Q6J("ngIf",i.permisos.PERMISO_ACTUALIZACION),t.xp6(1),t.MGl("routerLink","/main/pedido/editar/",o.ID,""),t.xp6(5),t.Q6J("ngIf",i.permisos.PERMISO_ELIMINACION)}}function wt(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td")(2,"span",37),t._uU(3),t.ALo(4,"titlecase"),t.qZA()(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"titlecase"),t._UZ(8,"br"),t.YNc(9,Zt,2,0,"mat-icon",38),t.TgZ(10,"span",39),t._uU(11),t.ALo(12,"lowercase"),t.qZA(),t.YNc(13,Ot,1,0,"br",11),t.TgZ(14,"span",37),t._uU(15),t.qZA()(),t.TgZ(16,"td"),t._uU(17),t.ALo(18,"currency"),t.qZA(),t.TgZ(19,"td"),t._uU(20),t.ALo(21,"currency"),t.qZA(),t.TgZ(22,"td",40),t.YNc(23,Pt,2,1,"div",41),t.YNc(24,It,13,4,"div",11),t.qZA()()),2&n){const e=a.$implicit,o=a.index,i=t.oxw();t.xp6(2),t.Q2q("style","color: ",e.COLOR,";",t.Ckj),t.xp6(1),t.Oqu(t.lcZ(4,14,e.ESTADO)),t.xp6(3),t.AsE(" ",t.lcZ(7,16,e.NOMBRE_PRODUCTO)," x ( ",e.CANTIDAD," )"),t.xp6(3),t.Q6J("ngIf",e.INFORMACION&&""!==e.INFORMACION),t.xp6(2),t.Oqu(t.lcZ(12,18,e.INFORMACION)),t.xp6(2),t.Q6J("ngIf",e.INFORMACION&&""!==e.INFORMACION),t.xp6(1),t.Tol(i.getColorPlato(e.PARA_LLEVAR)),t.xp6(1),t.hij(" ",e.PARA_LLEVAR?"Para Llevar":"Comer Aqu\xed"," "),t.xp6(2),t.Oqu(t.xi3(18,20,i.toFloat(e.PRECIO_DETALLE),"Lps. ")),t.xp6(3),t.Oqu(t.xi3(21,23,e.CANTIDAD*i.toFloat(e.PRECIO_DETALLE),"Lps. ")),t.xp6(3),t.Q6J("ngIf",i.actualizandoEstado[o]),t.xp6(1),t.Q6J("ngIf",!i.actualizandoEstado[o])}}function kt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",55),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.seleccionar())})("mouseenter",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onAgregar.emit(!1))}),t.TgZ(1,"mat-icon",56),t._uU(2,"add_circle_outline"),t.qZA(),t.TgZ(3,"span",34),t._uU(4,"Agregar"),t.qZA()()}}function Ut(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",57),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.facturar())}),t.TgZ(1,"mat-icon",40),t._uU(2,"payments"),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("disabled",e.pedido.ID_ESTADO<4)}}function Dt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-eliminar-detalle",58),t.NdJ("onCerrar",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.eliminando=i)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("cantidad",e.cantidad)("nombre",e.nombre)("mesa",e.pedido.NOMBRE)("id_detalle",e.idDetalle)}}function yt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-eliminar-pedido",59),t.NdJ("onCerrar",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.eliminando=i)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("nombre",e.pedido.NOMBRE_CLIENTE)("mesa",e.pedido.NOMBRE)("id_pedido",e.pedido.ID)}}let qt=(()=>{class n{constructor(e,o,i,r,c){this.pedidoService=e,this.router=o,this.swService=i,this.authService=r,this.pantalla=c,this.onAgregar=new t.vpe,this.load=!1,this.detalles=[],this.actualizandoEstado=[],this.nombre="",this.cantidad=0,this.idDetalle=0,this.eliminando=!1,this.impuesto15=0,this.impuesto18=0}get permisos(){return this.pantalla.permisos}ngOnInit(){this.cargarDetalleEnTabla(),this.subsSocket1=this.swService.listen("productoAgregado").subscribe(e=>{e.id_pedido===this.pedido.ID&&(this.cargarDetalleEnTabla(),this.pedido=e.pedidoPayload)}),this.subsSocket2=this.swService.listen("actualizarTabla").subscribe(e=>{e.idPedido===this.pedido.ID&&(this.cargarDetalleEnTabla(),this.pedido=e.newPedidoVista)})}ngOnDestroy(){this.subsSocket1&&this.subsSocket1.unsubscribe(),this.subsSocket2&&this.subsSocket2.unsubscribe()}getColorPlato(e){return e?"llevar":"noLlevar"}getTotalImpuesto(){this.impuesto15=0,this.impuesto18=0,this.detalles.forEach(e=>{1==e.ID_IMPUESTO?this.impuesto15+=parseFloat(e.TOTAL_IMPUESTO)*e.CANTIDAD:this.impuesto18+=parseFloat(e.TOTAL_IMPUESTO)*e.CANTIDAD})}getTotalMesa(){let e=0;return this.detalles.forEach(o=>{e+=o.PRECIO_PRODUCTO*o.CANTIDAD}),e}toFloat(e){return parseFloat(e)}cargarDetalleEnTabla(){this.pedidoService.getDetallePedido(this.pedido.ID).subscribe(e=>{this.detalles=e.detalleDePedido,this.getTotalImpuesto();for(let o=0;o<this.detalles.length;o++)this.actualizandoEstado.push(!1)})}facturar(){this.router.navigateByUrl("/main/pedido/factura/"+this.pedido.ID)}seleccionar(){this.pedidoService.pedidoSeleccionado=this.pedido}seleccionarDetalle(e){this.pedidoService.detalleSeleccionado=e}actualizarEstado(e,o){this.actualizandoEstado[o]||(this.actualizandoEstado[o]=!0,this.pedidoService.putEstadoDetalle(e,this.authService.usuario.id_usuario).subscribe(i=>{!0===i.ok?this.actualizandoEstado[o]=!1:(this.actualizandoEstado[o]=!1,g().fire({title:"Advertencia",text:i.msg,icon:"warning",iconColor:"white",background:"#f8bb86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0}))}))}eliminarDetalle(e,o,i){this.nombre=o,this.cantidad=i,this.idDetalle=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O),t.Y36(f.F0),t.Y36(q.i),t.Y36(h.e),t.Y36(A.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tabla-atencion"]],inputs:{load:"load",pedido:"pedido"},outputs:{onAgregar:"onAgregar"},decls:66,vars:31,consts:[[1,"table-responsive","mt-1"],[1,"table","rounded","rounded-4","overflow-hidden","text-center","align-middle","table-dark","table-striped"],[1,"bg-dark","text-light","align-middle"],["colspan","5",1,"table-active"],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","flex-column","lign-items-center","text-start"],[1,"fw-semibold","mt-0","mb-1"],[1,"fw-normal"],[1,"fw-semibold","my-0"],[1,"h-100","text-start"],["mat-flat-button","","color","primary","class","btn-p","data-bs-toggle","modal","data-bs-target","#modalEliminarPedido",3,"mouseenter",4,"ngIf"],[4,"ngIf"],["style","white-space: nowrap;",4,"ngIf"],[2,"white-space","nowrap"],[4,"ngFor","ngForOf"],["colspan","3",1,"table-active","fw-bold"],[1,"d-flex","justify-content-between"],[1,"d-flex","align-items-end"],[1,"d-flex"],["mat-flat-button","","color","primary","class","btn-a","data-bs-toggle","modal","data-bs-target","#modalAgregar",3,"click","mouseenter",4,"ngIf"],[1,"d-flex","flex-column"],[1,"fw-semibold","mt-0","mb-1","text-end"],[1,"fw-semibold","my-0","text-end"],[1,"fw-semibold","border-start","border-opacity-10"],[1,"d-flex","flex-column","align-items-center"],[1,"mt-0","mb-1"],[1,"my-0","mb-1"],[1,"align-bottom"],[1,"d-flex","w-100","justify-content-end"],["mat-flat-button","","color","primary","class","btn-z",3,"disabled","click",4,"ngIf"],[3,"cantidad","nombre","mesa","id_detalle","onCerrar",4,"ngIf"],[3,"nombre","mesa","id_pedido","onCerrar",4,"ngIf"],["mat-flat-button","","color","primary","data-bs-toggle","modal","data-bs-target","#modalEliminarPedido",1,"btn-p",3,"mouseenter"],[1,"ms-1","me-1"],[1,"me-2"],["colspan","5",1,"fw-semibold"],["scope","col"],[1,"fw-semibold"],["matTooltip","Informaci\xf3n adicional","class","align-middle me-1","style","font-size: 19px; width: 19px; height: 19px;",4,"ngIf"],[1,"align-middle"],[1,""],["class","d-flex justify-content-center align-items-center w-100",4,"ngIf"],["matTooltip","Informaci\xf3n adicional",1,"align-middle","me-1",2,"font-size","19px","width","19px","height","19px"],[1,"d-flex","justify-content-center","align-items-center","w-100"],[1,"",3,"diameter"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["mat-menu-item","",3,"routerLink","click"],["id","iconEditar"],["mat-menu-item","","data-bs-toggle","modal","data-bs-target","#modalEliminarDetalle",3,"mouseenter",4,"ngIf"],["mat-menu-item","",3,"disabled","click"],["id","iconUnlock"],["mat-menu-item","","data-bs-toggle","modal","data-bs-target","#modalEliminarDetalle",3,"mouseenter"],["id","iconBlock"],["mat-flat-button","","color","primary","data-bs-toggle","modal","data-bs-target","#modalAgregar",1,"btn-a",3,"click","mouseenter"],[1,"ms-2","me-1"],["mat-flat-button","","color","primary",1,"btn-z",3,"disabled","click"],[3,"cantidad","nombre","mesa","id_detalle","onCerrar"],[3,"nombre","mesa","id_pedido","onCerrar"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr")(4,"th",3)(5,"div",4)(6,"div",5)(7,"h6",6),t._uU(8,"Mesero: "),t.TgZ(9,"span",7),t._uU(10),t.qZA()(),t.TgZ(11,"h6",8),t._uU(12,"Nombre: "),t.TgZ(13,"span",7),t._uU(14),t.qZA()()(),t.TgZ(15,"div",9)(16,"h6",6),t._uU(17,"\xdaltima Modificaci\xf3n: "),t.TgZ(18,"span",7),t._uU(19),t.ALo(20,"date"),t.qZA()(),t.TgZ(21,"h6",8),t._uU(22,"Modificado por: "),t.TgZ(23,"span",7),t._uU(24),t.qZA()()(),t.TgZ(25,"div"),t.YNc(26,xt,5,0,"button",10),t.qZA()()()(),t.YNc(27,Tt,3,0,"tr",11),t.YNc(28,At,11,0,"tr",12),t.qZA(),t.TgZ(29,"tbody",13),t.ynx(30),t.YNc(31,wt,25,26,"tr",14),t.BQk(),t.TgZ(32,"tr")(33,"td",15)(34,"div",16)(35,"div",17)(36,"div",18),t.YNc(37,kt,5,0,"button",19),t.qZA()(),t.TgZ(38,"div",20)(39,"h6",21),t._uU(40,"SubTotal Mesa:"),t.qZA(),t.TgZ(41,"h6",21),t._uU(42,"15% I.S.V."),t.qZA(),t.TgZ(43,"h6",21),t._uU(44,"18% I.S.V."),t.qZA(),t.TgZ(45,"h6",22),t._uU(46,"Total Mesa:"),t.qZA()()()(),t.TgZ(47,"td",23)(48,"div",24)(49,"h6",25),t._uU(50),t.ALo(51,"currency"),t.qZA(),t.TgZ(52,"h6",26),t._uU(53),t.ALo(54,"currency"),t.qZA(),t.TgZ(55,"h6",25),t._uU(56),t.ALo(57,"currency"),t.qZA(),t.TgZ(58,"h6",8),t._uU(59),t.ALo(60,"currency"),t.qZA()()(),t.TgZ(61,"td",27)(62,"div",28),t.YNc(63,Ut,3,1,"button",29),t.qZA()()()()()(),t.YNc(64,Dt,1,4,"app-eliminar-detalle",30),t.YNc(65,yt,1,3,"app-eliminar-pedido",31)),2&e&&(t.xp6(10),t.Oqu(o.pedido.NOMBRE_USUARIO),t.xp6(4),t.Oqu(o.pedido.NOMBRE_CLIENTE),t.xp6(5),t.Oqu(t.xi3(20,16,o.pedido.FECHA_MODIFICACION,"h:mm a")),t.xp6(5),t.Oqu(o.pedido.MODIFICADO_POR),t.xp6(2),t.Q6J("ngIf",o.permisos.PERMISO_ELIMINACION),t.xp6(1),t.Q6J("ngIf",0==o.detalles.length),t.xp6(1),t.Q6J("ngIf",0!=o.detalles.length),t.xp6(3),t.Q6J("ngForOf",o.detalles),t.xp6(6),t.Q6J("ngIf",o.permisos.PERMISO_ACTUALIZACION),t.xp6(13),t.hij(" ",t.xi3(51,19,o.pedido.SUBTOTAL,"Lps. ")," "),t.xp6(3),t.hij(" ",t.xi3(54,22,o.impuesto15,"Lps. ")," "),t.xp6(3),t.hij(" ",t.xi3(57,25,o.impuesto18,"Lps. ")," "),t.xp6(3),t.hij(" ",t.xi3(60,28,o.toFloat(o.pedido.SUBTOTAL)+o.toFloat(o.impuesto18)+o.toFloat(o.impuesto15),"Lps. ")," "),t.xp6(4),t.Q6J("ngIf",0!=o.detalles.length&&o.permisos.PERMISO_ACTUALIZACION),t.xp6(1),t.Q6J("ngIf",o.eliminando),t.xp6(1),t.Q6J("ngIf",o.eliminando))},dependencies:[d.sg,d.O5,f.rH,v.lW,b.Hw,T.VK,T.OP,T.p6,Z.Ou,B.gM,ht,vt,d.i8,d.rS,d.H9,d.uU],styles:[".noLlevar[_ngcontent-%COMP%]{color:#58b433}.llevar[_ngcontent-%COMP%]{color:#d12609}.btn-p[_ngcontent-%COMP%]{border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;padding:inherit}.btn-z[_ngcontent-%COMP%]{border-radius:10px;background-color:#58b433!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;padding:inherit}.btn-z[_ngcontent-%COMP%]:hover{background-color:#82d660!important;border:0}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}.btn-a[_ngcontent-%COMP%]{background-color:#898989!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;transition:.3s ease all;border-radius:10px;line-height:50px;padding:inherit}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}#iconEditar[_ngcontent-%COMP%]{color:#898989}#iconBlock[_ngcontent-%COMP%]{color:#f65757}#iconUnlock[_ngcontent-%COMP%]{color:#82da71}@media (max-width:992px){.mesa-tama\\f1o[_ngcontent-%COMP%]{height:65px!important}.icono-tama\\f1o[_ngcontent-%COMP%]{width:50px!important}.hora-alineacion[_ngcontent-%COMP%]{text-align:start!important}}@media (max-width:500px){.texto-mesa-hora[_ngcontent-%COMP%]{font-size:10px!important;margin-bottom:0!important;padding-bottom:0}.texto-tama\\f1o[_ngcontent-%COMP%]{font-size:larger!important}.texto-boton[_ngcontent-%COMP%]{font-size:smaller!important}}"]}),n})();function Nt(n,a){if(1&n&&(t.TgZ(0,"span"),t._uU(1," - "),t.TgZ(2,"mat-icon",12),t._uU(3,"info"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.s9C("matTooltip",e.mesa.INFORMACION)}}function St(n,a){1&n&&t._UZ(0,"mat-spinner",13)}function Ft(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-tabla-atencion",14),t.NdJ("onAgregar",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onAbrirAgregar.emit())}),t.qZA()}2&n&&t.Q6J("pedido",a.$implicit)}function Rt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",1),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cargarPedidos())}),t.TgZ(2,"div",2)(3,"h5",3),t._uU(4),t.ALo(5,"titlecase"),t.TgZ(6,"span",4)(7,"mat-icon",5),t._uU(8),t.qZA(),t.YNc(9,Nt,4,1,"span",0),t.qZA()(),t.TgZ(10,"h5",6),t._uU(11),t.ALo(12,"date"),t.qZA()(),t._UZ(13,"img",7),t.ALo(14,"titlecase"),t.qZA(),t.TgZ(15,"div",8)(16,"div",9),t.YNc(17,St,1,0,"mat-spinner",10),t.qZA(),t.YNc(18,Ft,1,1,"app-tabla-atencion",11),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q2q("style","background-color:",e.mesa.COLOR,"",t.Ckj),t.uIk("href","#m"+e.mesa.ID),t.xp6(3),t.Oqu(t.lcZ(5,10,e.mesa.NOMBRE)),t.xp6(4),t.Oqu("MESA"===e.mesa.TIPO?"table_restaurant":"takeout_dining"),t.xp6(1),t.Q6J("ngIf",""!==e.mesa.INFORMACION),t.xp6(2),t.hij("Hora de Pedido: ",t.xi3(12,12,e.mesa.FECHA,"h:mm a"),""),t.xp6(2),t.s9C("src",e.getImgEstado(t.lcZ(14,15,e.mesa.ESTADO)),t.LSH),t.xp6(2),t.MGl("id","m",e.mesa.ID,""),t.xp6(2),t.Q6J("ngIf",0===e.pedidos.length),t.xp6(1),t.Q6J("ngForOf",e.pedidos)}}let Lt=(()=>{class n{constructor(e,o){this.pedidoSerice=e,this.swService=o,this.onAbrirAgregar=new t.vpe,this.mesa={ID:0,ID_ESTADO:0,ESTADO:"Pendiente",COLOR:"#248df6",NOMBRE:"rircardo",INFORMACION:"",TIPO:"MESA",FECHA:new Date},this.filtro="",this.estadoNombre="",this.load=!1,this.pedidos=[]}ngOnInit(){this.subsSocket1=this.swService.listen("actualizarMesa").subscribe(e=>{e.idMesa===this.mesa.ID&&(this.mesa=e.mesaVista)}),this.subsSocket2=this.swService.listen("recargarMesa").subscribe(e=>{e.idMesa===this.mesa.ID&&(this.pedidos=e.listaViewPedidos)})}ngOnDestroy(){this.subsSocket1&&this.subsSocket1.unsubscribe(),this.subsSocket2&&this.subsSocket2.unsubscribe()}getImgEstado(e){return"Pendiente"===e?"/assets/icons/Pendiente.svg":"Cocinando"===e?"/assets/icons/Cocinando.svg":"Listo"===e?"/assets/icons/Listo.svg":"/assets/icons/Servido.svg"}cargarPedidos(){this.load||this.pedidoSerice.getPedidoDeMesa(this.mesa.ID).subscribe(e=>{this.pedidos=e.pedidos,this.load=!0})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O),t.Y36(q.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mesas"]],inputs:{mesa:"mesa",filtro:"filtro"},outputs:{onAbrirAgregar:"onAbrirAgregar"},decls:1,vars:1,consts:[[4,"ngIf"],["matRipple","","data-bs-toggle","collapse","role","button","aria-expanded","false","aria-controls","collapseExample",1,"rounded-4","btn","my-2","btn-primary","position-relative","mesa-tama\xf1o","d-flex","justify-content-between","align-items-center","border","border-0",3,"click"],[1,"row","align-items-center","w-75"],[1,"col-lg-6","col-sm-12","text-start","fw-semibold","texto-mesa-hora","mb-0"],[1,"d-flex","w-100","texto-mesa-hora",2,"width","24px"],[1,"text-light","me-1"],[1,"col-lg-6","col-sm-12","text-center","hora-alineacion","texto-mesa-hora","mb-0"],["alt","",1,"icono-tama\xf1o",3,"src"],[1,"collapse","container-xxl",3,"id"],[1,"d-flex","justify-content-center"],["color","warn",4,"ngIf"],[3,"pedido","onAgregar",4,"ngFor","ngForOf"],[1,"align-middle","me-1",2,"font-size","19px","width","19px","height","19px",3,"matTooltip"],["color","warn"],[3,"pedido","onAgregar"]],template:function(e,o){1&e&&t.YNc(0,Rt,19,17,"div",0),2&e&&t.Q6J("ngIf",(o.mesa.ESTADO===o.filtro.toUpperCase()||""===o.filtro)&&"PAGADO"!=o.mesa.ESTADO)},dependencies:[d.sg,d.O5,b.Hw,Z.Ou,J.wG,B.gM,qt,d.rS,d.uU],styles:["@media (max-width:992px){.mesa-tama\\f1o[_ngcontent-%COMP%]{height:65px!important}.icono-tama\\f1o[_ngcontent-%COMP%]{width:50px!important}.hora-alineacion[_ngcontent-%COMP%]{text-align:start!important}}@media (max-width:600px){.texto-mesa-hora[_ngcontent-%COMP%]{font-size:14px!important;margin-bottom:0!important;padding-bottom:0}.texto-tama\\f1o[_ngcontent-%COMP%]{font-size:larger!important}.texto-boton[_ngcontent-%COMP%]{font-size:smaller!important}}.mesa-tama\\f1o[_ngcontent-%COMP%]{height:50px;width:100%;border-color:#000}.icono-tama\\f1o[_ngcontent-%COMP%]{width:40px}.Pendiente[_ngcontent-%COMP%]{background-color:#248df6}.Cocinando[_ngcontent-%COMP%]{background-color:#ffc107}.Listo[_ngcontent-%COMP%]{background-color:#f84f0e}.Servido[_ngcontent-%COMP%]{background-color:#bac902}"]}),n})();var V=u(7166),X=u(2710),x=u(9549),D=u(4144),W=u(4385),tt=u(6709),y=u(1948);const Jt=["categoria"],Bt=["tipoProducto"],Gt=["bebida"],Qt=["cerrarCrear"];function jt(n,a){if(1&n&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.ID),t.xp6(1),t.hij(" ",e.NOMBRE,"")}}function Yt(n,a){if(1&n&&(t.TgZ(0,"option",33),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.TIPO_PRODUCTO,"")}}function zt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",34)(1,"button",35),t.NdJ("click",function(i){const c=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.seleccionarProducto(c,i))}),t.TgZ(2,"div")(3,"label",36),t._uU(4),t.qZA(),t.TgZ(5,"div",37)(6,"div",38)(7,"label",39),t._uU(8),t.ALo(9,"lowercase"),t.qZA()()(),t.TgZ(10,"label",40),t._uU(11),t.ALo(12,"currency"),t.qZA()()()()}if(2&n){const e=a.$implicit;t.xp6(4),t.Oqu(e.NOMBRE),t.xp6(4),t.Oqu(t.lcZ(9,3,e.DESCRIPCION)),t.xp6(3),t.Oqu(t.xi3(12,5,e.PRECIO,"Lps. "))}}function Ht(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div")(2,"ul",15)(3,"li",16)(4,"div",17)(5,"div",18)(6,"div",19)(7,"label",20),t._uU(8,"Categor\xedas"),t.qZA(),t.TgZ(9,"select",21,22),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cargarProductos())}),t.TgZ(11,"option",23),t._uU(12,"Filtrar por categor\xeda"),t.qZA(),t.YNc(13,jt,2,2,"option",24),t.qZA()()(),t.TgZ(14,"div",18)(15,"div",19)(16,"label",20),t._uU(17,"Tipo"),t.qZA(),t.TgZ(18,"select",21,25),t.NdJ("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cargarProductos())}),t.TgZ(20,"option",23),t._uU(21,"Filtrar por tipo"),t.qZA(),t.YNc(22,Yt,2,2,"option",24),t.qZA()()(),t.TgZ(23,"div",18)(24,"form",26),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cargarProductos())}),t.TgZ(25,"div",27)(26,"span",28),t._uU(27,"Buscar:"),t.qZA(),t._UZ(28,"input",29),t.qZA()()()()()()(),t.TgZ(29,"div",30)(30,"div",31),t.YNc(31,zt,13,8,"div",32),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(13),t.Q6J("ngForOf",e.listaCategoria),t.xp6(9),t.Q6J("ngForOf",e.listaTipo),t.xp6(2),t.Q6J("formGroup",e.formularioBusqueda),t.xp6(7),t.Q6J("ngForOf",e.listaProducto)}}function Kt(n,a){1&n&&t._UZ(0,"hr")}function $t(n,a){1&n&&(t.TgZ(0,"div",82)(1,"mat-radio-group",83)(2,"mat-radio-button",84),t._uU(3,"Comer aqu\xed"),t.qZA(),t.TgZ(4,"mat-radio-button",85),t._uU(5,"Envuelto para llevar "),t.qZA()()())}function Vt(n,a){1&n&&t._UZ(0,"hr")}function Xt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",86)(1,"mat-checkbox",87,88),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.checkear())}),t._uU(3," Incluir Bebida"),t.qZA()()}}function Wt(n,a){if(1&n&&(t.ynx(0),t.TgZ(1,"mat-option",89),t._uU(2),t.qZA(),t.BQk()),2&n){const e=a.$implicit;t.xp6(1),t.Q6J("value",e),t.xp6(1),t.hij(" ",e.NOMBRE,"")}}function te(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",90)(6,"button",5),t.NdJ("click",function(i){const c=t.CHM(e).index,l=t.oxw(2);return t.KtG(l.quitarProductoAgregado(c,i))}),t.TgZ(7,"mat-icon"),t._uU(8,"delete"),t.qZA()()()()}if(2&n){const e=a.$implicit;t.xp6(2),t.Oqu(e.producto.NOMBRE),t.xp6(2),t.Oqu(e.cantidad)}}function ee(n,a){1&n&&(t.TgZ(0,"div",91),t._UZ(1,"img",92),t.qZA())}function oe(n,a){1&n&&t._UZ(0,"div",11)}function ne(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",41)(2,"div",42)(3,"h3",43),t._uU(4,"Agregar a detalle"),t.qZA(),t.TgZ(5,"div",44)(6,"div",45)(7,"div",46)(8,"div",47)(9,"form",48)(10,"div",49)(11,"label",50),t._uU(12,"Selecci\xf3n"),t.qZA()(),t.TgZ(13,"fieldset",51)(14,"mat-form-field",52)(15,"mat-label"),t._uU(16,"Producto"),t.qZA(),t._UZ(17,"input",53),t.TgZ(18,"mat-icon",54),t._uU(19,"lunch_dining"),t.qZA()()(),t.TgZ(20,"div",49)(21,"label",55),t._uU(22,"Detalles"),t.qZA()(),t.TgZ(23,"div",56)(24,"mat-form-field",52)(25,"mat-label"),t._uU(26,"Cantidad"),t.qZA(),t._UZ(27,"input",57),t.TgZ(28,"mat-icon",54),t._uU(29,"tag"),t.qZA()()(),t.TgZ(30,"div",56)(31,"mat-form-field",52)(32,"mat-label"),t._uU(33,"Informaci\xf3n"),t.qZA(),t.TgZ(34,"input",58),t.NdJ("keyup",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.toMayus(i.formularioProducto,"informacion"))}),t.qZA(),t.TgZ(35,"mat-icon",54),t._uU(36,"info"),t.qZA()()(),t.YNc(37,Kt,1,0,"hr",14),t.YNc(38,$t,6,0,"div",59),t.YNc(39,Vt,1,0,"hr",14),t.YNc(40,Xt,4,0,"div",60),t._UZ(41,"hr"),t.TgZ(42,"div",61)(43,"mat-form-field",52)(44,"mat-label"),t._uU(45,"Seleccione una bebida"),t.qZA(),t.TgZ(46,"mat-select",62),t._UZ(47,"div",63),t.YNc(48,Wt,3,2,"ng-container",64),t.qZA()()()()(),t.TgZ(49,"div",65)(50,"div",66)(51,"label",55),t._uU(52,"Por Agregar al Pedido"),t.qZA()(),t.TgZ(53,"div",67)(54,"div",68)(55,"table",69)(56,"thead",70)(57,"tr",71)(58,"th",72),t._uU(59,"Plato"),t.qZA(),t.TgZ(60,"th",72),t._uU(61,"Cantidad"),t.qZA(),t._UZ(62,"th",72),t.qZA()(),t.TgZ(63,"tbody",71),t.YNc(64,te,9,2,"tr",64),t.qZA()()()(),t.YNc(65,ee,2,0,"div",73),t.YNc(66,oe,1,0,"div",74),t.qZA()()(),t.TgZ(67,"div",75)(68,"div",76)(69,"button",77),t.NdJ("click",function(i){t.CHM(e);const r=t.oxw();return r.agregarProducto(),t.KtG(r.volver(i))}),t.TgZ(70,"span",78),t._uU(71,"Seguir agregando"),t.qZA()(),t.TgZ(72,"button",79),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.agregarTerminar())}),t.TgZ(73,"span",78),t._uU(74,"Agregar y finalizar"),t.qZA()(),t.TgZ(75,"button",80),t.NdJ("click",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.volver(i))}),t.TgZ(76,"span",81),t._uU(77,"Volver"),t.qZA()()()()()()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.formularioProducto),t.xp6(16),t.Q6J("disabled",!0),t.xp6(20),t.Q6J("ngIf","MOSTRADOR"!==e.pedidoSeleccionado.TIPO),t.xp6(1),t.Q6J("ngIf","MOSTRADOR"!==e.pedidoSeleccionado.TIPO),t.xp6(1),t.Q6J("ngIf",!e.producto.BEBIDA),t.xp6(1),t.Q6J("ngIf",!e.producto.BEBIDA),t.xp6(8),t.Q6J("ngForOf",e.listaBebida),t.xp6(16),t.Q6J("ngForOf",e.productosAgregados),t.xp6(1),t.Q6J("ngIf",!(e.productosAgregados.length>0)),t.xp6(1),t.Q6J("ngIf",e.productosAgregados.length>0),t.xp6(3),t.Q6J("disabled",e.checked?e.formularioProducto.invalid||""==e.formularioProducto.controls.bebida.value:e.formularioProducto.invalid),t.xp6(3),t.Q6J("disabled",e.checked?e.formularioProducto.invalid||""==e.formularioProducto.controls.bebida.value:e.formularioProducto.invalid)}}let ie=(()=>{class n{constructor(e,o,i,r,c){this.fb=e,this.categoriaService=o,this.authService=i,this.productoService=r,this.pedidoService=c,this.toMayus=U.K.toMayus,this.onCerrar=new t.vpe,this.pantalla="Men\xfa",this.generando=!1,this.editando=!1,this.checked=!1,this.enEjecucion=!1,this.listaCategoria=[],this.listaBebidas=[],this.listaTipo=[],this.listaProducto=[],this.listaBebida=[],this.productosAgregados=[],this.producto={ID:0,ID_IMPUESTO:0,PORCENTAJE:0,ID_TIPO_PRODUCTO:0,NOMBRE:"",PRECIO:0,EXENTA:!1,DESCRIPCION:"",FECHA_INICIO:new Date,FECHA_FINAL:new Date,ESTADO:!0,SIN_ESTADO:!1,BEBIDA:!1,IMAGEN:new Blob,CREADO_POR:"",FECHA_CREACION:new Date,MODIFICACION_POR:"",FECHA_MODIFICACION:new Date},this.formularioBusqueda=this.fb.group({buscar:["",[s.kI.required,s.kI.maxLength(100)]]}),this.formularioProducto=this.fb.group({nombre:[""],cantidad:[1,[s.kI.required,s.kI.maxLength(100)]],informacion:[""],comerAqui:["",[s.kI.required,s.kI.maxLength(100)]],bebida:[""]})}get pedidoSeleccionado(){return this.pedidoService.pedidoSeleccionado}filtrar(e){this.pantalla=e}ngOnInit(){this.cargarCategoria(),this.cargarTipoProducto(),this.cargarBebidas()}ngAfterViewInit(){this.cargarProductos()}bgFiltro(e){return this.pantalla===e?"bg-dark":""}cargarCategoria(){this.categoriaService.getCategorias(this.authService.usuario.id_usuario,"","99999").subscribe(o=>{this.listaCategoria=o.catalogos})}cargarTipoProducto(){this.productoService.getTipoProducto().subscribe(e=>{this.listaTipo=e.tipoProducto})}cargarProductos(){const e=this.categoria.nativeElement.value,o=this.tipoProducto.nativeElement.value,{buscar:i}=this.formularioBusqueda.value;this.pedidoService.getProductos(i,o,e).subscribe(r=>{this.listaProducto=r.productos})}seleccionarProducto(e,o){this.editando=!0,this.producto=e,this.pantalla="Detalle del pedido",o.stopPropagation(),this.formularioProducto.controls.nombre.setValue(e.NOMBRE),this.formularioProducto.controls.comerAqui.setValue("MOSTRADOR"===this.pedidoSeleccionado.TIPO?"2":"1"),this.formularioProducto.controls.cantidad.setValue(1),this.formularioProducto.controls.bebida.setValue(!1),this.formularioProducto.updateValueAndValidity()}volver(e){this.pantalla="Men\xfa",e.stopPropagation(),this.formularioProducto.reset()}cerrar(e){this.editando?(e.stopPropagation(),g().fire({title:"\xa1Cambios sin guardar!",text:"\xbfDesea salir del formulario sin guardar los cambios?",icon:"question",showCancelButton:!0,confirmButtonColor:"#898989",cancelButtonColor:"#d12609",confirmButtonText:"Salir sin guardar",cancelButtonText:"Permanecer",reverseButtons:!0,background:"#2B2B2B",color:"#fff",heightAuto:!1}).then(o=>{o.isConfirmed&&(this.editando=!1,this.cerrarCrear._elementRef.nativeElement.click(),setTimeout(()=>{this.onCerrar.emit(!1)},100))})):(this.cerrarCrear._elementRef.nativeElement.click(),setTimeout(()=>{this.onCerrar.emit(!1)},100))}generarReporte(){}cargarBebidas(){this.pedidoService.getBebidas().subscribe(e=>{this.listaBebida=e.bebidas})}agregarProducto(){let{cantidad:e,informacion:o,comerAqui:i,bebida:r}=this.formularioProducto.value,c=!1;"2"==i&&(c=!0),this.productosAgregados.push({producto:this.producto,cantidad:e,informacion:o,comerAqui:c}),!0===this.checked&&this.productosAgregados.push({producto:r,cantidad:1,informacion:"",comerAqui:c}),this.checked=!1}quitarProductoAgregado(e,o){this.productosAgregados.splice(e,1),o.stopPropagation()}checkear(){var e=this;return(0,M.Z)(function*(){e.checked=!e.checked})()}agregarTerminar(){this.enEjecucion||(this.enEjecucion=!0,this.agregarProducto(),this.pedidoService.postDetalle(this.productosAgregados,this.pedidoService.pedidoSeleccionado.ID,this.authService.usuario.id_usuario).subscribe(e=>{!0===e.ok?(this.enEjecucion=!1,this.editando=!1,this.cerrarCrear._elementRef.nativeElement.click(),g().fire({title:"\xa1\xc9xito!",text:e.msg,icon:"success",iconColor:"white",background:"#a5dc86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0})):(this.enEjecucion=!1,g().fire({title:"Advertencia",text:e.msg,icon:"warning",iconColor:"white",background:"#f8bb86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0}))}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(V.n),t.Y36(h.e),t.Y36(X.U),t.Y36(O))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-agregar-producto-pedido"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Jt,5),t.Gf(Bt,5),t.Gf(Gt,5),t.Gf(Qt,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.categoria=i.first),t.iGM(i=t.CRH())&&(o.tipoProducto=i.first),t.iGM(i=t.CRH())&&(o.bebida=i.first),t.iGM(i=t.CRH())&&(o.cerrarCrear=i.first)}},outputs:{onCerrar:"onCerrar"},decls:31,vars:7,consts:[["id","modalAgregar","tabindex","-1","data-bs-backdrop","static","data-bs-keyboard","false","aria-labelledby","modalAgregarLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-fullscreen"],["id","fondoModal",1,"modal-content"],[1,"modal-header"],["id","modalAgregarLabel",1,"modal-title","fs-5"],["mat-icon-button","","color","warn","type","button",3,"click"],["mat-icon-button","","color","warn","data-bs-dismiss","modal","aria-label","Close","type","button",1,"visually-hidden",3,"click"],["cerrarCrear",""],[1,"modal-body","p-0","background"],[1,"container-fluid","d-flex","justify-content-center",2,"background-color","#3f3f3f"],["href","",1,"nav-link"],[1,"d-flex","justify-content-center"],[1,"text-light"],[1,"text-center","text-light","pt-1","descripcion","mb-0"],[4,"ngIf"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"row","align-items-center"],[1,"col-lg-4","col-md-12","my-1"],[1,"input-group"],["for","inputGroupSelect01",1,"input-group-text"],["id","inputGroupSelect01",1,"form-select",3,"change"],["categoria",""],["value","","selected",""],[3,"value",4,"ngFor","ngForOf"],["tipoProducto",""],[3,"formGroup","ngSubmit"],[1,"input-group","input-group-sm"],["id","inputGroup-sizing-sm",1,"input-group-text"],["type","text","formControlName","buscar",1,"form-control","form-control-sm","form-tama\xf1oNormal"],[1,"container-fluid",2,"color","white"],[1,"row","text-center","mt-3"],["class","col-xxl-4 col-md-6 col-sm-12 nav-link",4,"ngFor","ngForOf"],[3,"value"],[1,"col-xxl-4","col-md-6","col-sm-12","nav-link"],["type","button",1,"btn","btn-primary","categoria-tama\xf1o","col-12","text-light",2,"width","95%",3,"click"],[1,"form-label","fw-bold","fs-5","mb-0","titulo",2,"color","white"],[1,"tama\xf1oTexto","overflow-auto"],[1,"d-flex","h-100","align-items-center","justify-content-center"],[1,"d-flex","form-label","fw-light","lh-sm","detalle","justify-content-center","text-break","mt-1","mb-0",2,"color","white"],[1,"form-label","fs-6","fw-semibold","titulo",2,"color","white"],[3,"formGroup"],[1,"container-fluid"],[2,"color","black"],[1,"card","text-bg-dark","border-light","border-0","rounded-4","shadow","mb-5",2,"margin","auto -2px"],[1,"card-body","my-0","py-0"],[1,"row"],[1,"rounded","col-lg-8","col-md-12","shadow-sm"],[1,"mt-3"],[1,"mb-1"],[1,"form-label","fs-5","fw-semibold"],["disabled","disabled",1,"mb-3"],["appearance","legacy",1,"example-full-width"],["matInput","","autocomplete","off","formControlName","nombre","placeholder","Producto",3,"disabled"],["matSuffix",""],[1,"form-label","fs-4","fw-semibold"],[1,"mb-3"],["autocomplete","off","matInput","","formControlName","cantidad","value","1","min","1","type","number","placeholder","Cantidad"],["matInput","","autocomplete","off","formControlName","informacion","placeholder","Informaci\xf3n adicional",3,"keyup"],["class","mb-2 ps-1 form-check",4,"ngIf"],["class","mb-3 ps-1 form-check","aria-expanded","false","aria-controls","collapseExample",4,"ngIf"],["id","collapseExample",1,"mb-3","form-floating","collapse"],["formControlName","bebida"],[1,"cdk-overlay-container"],[4,"ngFor","ngForOf"],[1,"rounded","col-lg-4","col-sm-12","col"],[1,"mb-2","mt-2","text-center"],[1,"overflow-auto","mb-2",2,"max-height","390px"],[1,"table-responsive"],[1,"table","text-center","table-dark","table-striped"],[1,"bg-dark","text-light"],[1,"align-middle"],["scope","col"],["style","max-height: 390px;","class","d-flex justify-content-center",4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"card-footer","text-muted"],[1,"d-flex","flex-wrap"],["mat-flat-button","","type","button",1,"btn-a","me-1","mb-2",3,"disabled","click"],[1,"mx-2","text-break"],["mat-flat-button","","type","button",1,"btn-a","mb-2",3,"disabled","click"],["mat-flat-button","","type","button",1,"btn-p","ms-1","mb-2",3,"click"],[1,"mx-2"],[1,"mb-2","ps-1","form-check"],["aria-label","Select an option","formControlName","comerAqui",1,"d-flex","flex-column"],["color","primary","value","1",1,"mb-1"],["color","primary","value","2"],["aria-expanded","false","aria-controls","collapseExample",1,"mb-3","ps-1","form-check"],["color","primary","data-bs-toggle","collapse","data-bs-target","#collapseExample",1,"example-margin",3,"click"],["bebida",""],["id","selector",3,"value"],[1,""],[1,"d-flex","justify-content-center",2,"max-height","390px"],["src","./../../../../../assets/img/DrBurgerCBGW.svg","width","45%","alt","",1,"noselect",2,"opacity","0.05","pointer-events","none"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),t._uU(5),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(r){return o.cerrar(r)}),t.TgZ(7,"mat-icon"),t._uU(8,"cancel"),t.qZA()(),t.TgZ(9,"button",6,7),t.NdJ("click",function(r){return o.cerrar(r)}),t.TgZ(11,"mat-icon"),t._uU(12,"cancel"),t.qZA()()(),t.TgZ(13,"div",8)(14,"div",9)(15,"div",10)(16,"div")(17,"div",11)(18,"mat-icon",12),t._uU(19,"fastfood"),t.qZA()(),t.TgZ(20,"h6",13),t._uU(21,"Men\xfa"),t.qZA()()(),t.TgZ(22,"div",10)(23,"div")(24,"div",11)(25,"mat-icon",12),t._uU(26,"edit_note"),t.qZA()(),t.TgZ(27,"h6",13),t._uU(28,"Detalles"),t.qZA()()()(),t.YNc(29,Ht,32,4,"ng-container",14),t.YNc(30,ne,78,12,"ng-container",14),t.qZA()()()()),2&e&&(t.xp6(5),t.Oqu(o.pantalla),t.xp6(11),t.Tol("px-3 pt-2 pb-1 justify-content-center espacio-iconos "+o.bgFiltro("Men\xfa")),t.xp6(7),t.Tol("px-3 pt-2 pb-1 justify-content-center espacio-iconos "+o.bgFiltro("Detalle del pedido")),t.xp6(6),t.Q6J("ngIf","Men\xfa"===o.pantalla),t.xp6(1),t.Q6J("ngIf","Detalle del pedido"===o.pantalla))},dependencies:[d.sg,d.O5,v.lW,b.Hw,x.KE,x.hX,x.R9,D.Nt,W.gD,J.ey,tt.oG,y.VQ,y.U0,s._Y,s.YN,s.Kr,s.Fj,s.wV,s.JJ,s.JL,s.qQ,s.sg,s.u,d.i8,d.H9],styles:["h3[_ngcontent-%COMP%]{text-align:center;padding:15px;font-weight:400;font-family:Lobster Two,cursive;font-size:45px;margin-bottom:0%}.example-full-width[_ngcontent-%COMP%]{width:100%;color:#fff}.example-mid-width[_ngcontent-%COMP%]{width:48%;color:#fff}  .cdk-overlay-container{z-index:9999!important}.btn-p[_ngcontent-%COMP%]{border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;padding:inherit}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}.btn-a[_ngcontent-%COMP%]{background-color:#898989!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;transition:.3s ease all;border-radius:10px;padding:inherit}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}.modal-body[_ngcontent-%COMP%]{background-color:#2b2b2b}.modal-footer[_ngcontent-%COMP%]{background-color:#454545}#fondoModal[_ngcontent-%COMP%]{background-color:#232323!important;color:#fff}@media only screen and (max-width:991px){.eliminarPaddin[_ngcontent-%COMP%]{padding-left:0}.textResponsive[_ngcontent-%COMP%]{font-size:small!important}}.textResponsive[_ngcontent-%COMP%]{font-size:small!important}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{min-height:3.125rem;line-height:initial;color:#000!important}.form-tama\\f1oNormal[_ngcontent-%COMP%]{min-height:38px!important}.form-control[_ngcontent-%COMP%]:focus{background-color:#fff;box-shadow:none}.background[_ngcontent-%COMP%]{width:100%;background-image:url(/assets/img/FondoP1.webp);background-repeat:no-repeat;background-size:cover;background-position:center;background-attachment:fixed}@media (max-width:1200px){.categoria-tama\\f1o[_ngcontent-%COMP%]{width:95%!important;height:100px!important;margin-bottom:4%!important}.tama\\f1oTexto[_ngcontent-%COMP%]{height:40px!important}}@media (max-width:576px){.categoria-tama\\f1o[_ngcontent-%COMP%]{width:80%!important;height:65px!important;margin-bottom:3%!important}.tama\\f1oTexto[_ngcontent-%COMP%]{height:16px!important}.titulo[_ngcontent-%COMP%]{font-size:small!important}.detalle[_ngcontent-%COMP%]{font-size:x-small!important;margin-bottom:0%!important}}@media (max-width:320px){.categoria-tama\\f1o[_ngcontent-%COMP%]{width:95%!important;height:65px!important;margin-bottom:3%!important}.detalle[_ngcontent-%COMP%]{font-size:xx-small!important;margin-bottom:0%!important}.titulo[_ngcontent-%COMP%]{font-size:small!important}.tituloP[_ngcontent-%COMP%]{font-size:medium!important}}.tama\\f1oTexto[_ngcontent-%COMP%]{height:70px}.categoria-tama\\f1o[_ngcontent-%COMP%]{width:95%;height:130px;margin-bottom:5%}"]}),n})();function ae(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"Generando... "),t.qZA())}function re(n,a){if(1&n&&(t.TgZ(0,"span",15),t._UZ(1,"mat-spinner",16),t.YNc(2,ae,2,0,"span",9),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("diameter",30),t.xp6(1),t.Q6J("ngIf",e.generando)}}function se(n,a){1&n&&t._UZ(0,"img",17)}function ce(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"Generar reporte"),t.qZA())}function le(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("mouseenter",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.creando=!0)}),t.TgZ(1,"mat-icon",19),t._uU(2,"add_circle_outline"),t.qZA(),t.TgZ(3,"span",20),t._uU(4,"Nuevo"),t.qZA()()}}function de(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-mesas",21),t.NdJ("onAbrirAgregar",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.agregando=!0)}),t.qZA()}if(2&n){const e=a.$implicit,o=t.oxw();t.Q6J("filtro",o.filtro)("mesa",e)}}function ue(n,a){1&n&&(t.TgZ(0,"div",22)(1,"div",23)(2,"h4"),t._uU(3,"No se encuentran pedidos activos"),t.qZA()(),t.TgZ(4,"div",23),t._UZ(5,"img",24),t.qZA()())}function me(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-crear-pedido",25),t.NdJ("onCerrar",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.creando=i)}),t.qZA()}}function pe(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-agregar-producto-pedido",25),t.NdJ("onCerrar",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.agregando=i)}),t.qZA()}}let ge=(()=>{class n{constructor(e,o,i,r,c,l){this.pedidoService=e,this.authService=o,this.fb=i,this.pantalla=r,this.wsService=c,this.ingresosService=l,this.filtro="",this.creando=!1,this.agregando=!1,this.formularioBusqueda=this.fb.group({buscar:["",[s.kI.required,s.kI.maxLength(100)]]}),this.generando=!1}get mesas(){return this.pedidoService.mesas}ngOnInit(){this.registrarIngreso(),this.cargarMesas(),this.subsSocket1=this.wsService.listen("mesa").subscribe(e=>{this.getMesaSub=this.pedidoService.getMesa(e.id).subscribe()}),this.subsSocket2=this.wsService.listen("recargar").subscribe(e=>{this.cargarMesas()})}get permisos(){return this.pantalla.permisos}getFiltro(e){this.filtro=e}cargarMesas(){this.mesasSubscripcion=this.pedidoService.getMesas().subscribe()}ngOnDestroy(){this.mesasSubscripcion&&this.mesasSubscripcion.unsubscribe(),this.ingreso&&this.ingreso.unsubscribe(),this.subsSocket1&&this.subsSocket1.unsubscribe(),this.subsSocket2&&this.subsSocket2.unsubscribe(),this.getMesaSub&&this.getMesaSub.unsubscribe()}registrarIngreso(){this.ingreso=this.ingresosService.eventoIngreso(this.authService.usuario.id_usuario,30).subscribe()}generarReporte(){if(!this.generando){this.generando=!0;let{buscar:e}=this.formularioBusqueda.value;this.pedidoService.getReporte(e).subscribe(o=>{let i=new Blob([o],{type:"application/pdf"}),r=window.URL.createObjectURL(i);document.createElement("a").href=r,window.open(r,"_blank"),this.generando=!1})}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O),t.Y36(h.e),t.Y36(s.qu),t.Y36(A.i),t.Y36(q.i),t.Y36(k.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-atencion"]],decls:18,vars:9,consts:[[3,"onFiltro"],[1,"container-xxl","p-0","pb-5"],[1,"card","text-bg-dark","border-light","border-0","rounded-4","shadow"],[1,"card-header","bg-transparent"],[1,"row","justify-content-between","align-items-center","pt-3","pb-2"],[1,"d-flex","flex-wrap","justify-content-between"],["mat-flat-button","","type","button",1,"me-3","btn-p","mb-2",3,"ngClass","click"],["class","d-flex  align-items-center justify-content-center",4,"ngIf"],["src","/assets/icons/pdf.png ","width","30px","height","30px","class","me-3",4,"ngIf"],[4,"ngIf"],["mat-flat-button","","class","btn-a mb-2 px-0","type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",3,"mouseenter",4,"ngIf"],[1,"card-body","py-1",2,"background-color","#e7e7e7","color","black","border-bottom-right-radius","13px","border-bottom-left-radius","13px"],[3,"filtro","mesa","onAbrirAgregar",4,"ngFor","ngForOf"],["class","d-flex flex-column justify-content-center",4,"ngIf"],[3,"onCerrar",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center"],[1,"me-3","uploader-status",3,"diameter"],["src","/assets/icons/pdf.png ","width","30px","height","30px",1,"me-3"],["mat-flat-button","","type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn-a","mb-2","px-0",3,"mouseenter"],[1,"ms-2","me-1"],[1,"me-2"],[3,"filtro","mesa","onAbrirAgregar"],[1,"d-flex","flex-column","justify-content-center"],[1,"d-flex","justify-content-center"],["src","./../../../../../assets/img/DrBurgerCBGW.svg","width","35%","alt","",1,"noselect","my-2",2,"opacity","0.05","pointer-events","none"],[3,"onCerrar"]],template:function(e,o){1&e&&(t.TgZ(0,"app-barra-estado",0),t.NdJ("onFiltro",function(r){return o.getFiltro(r)}),t.qZA(),t.TgZ(1,"h3"),t._uU(2,"Vista de pedidos"),t.qZA(),t.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"button",6),t.NdJ("click",function(){return o.generarReporte()}),t.YNc(9,re,3,2,"span",7),t.YNc(10,se,1,0,"img",8),t.YNc(11,ce,2,0,"span",9),t.qZA(),t.YNc(12,le,5,0,"button",10),t.qZA()()(),t.TgZ(13,"div",11),t.YNc(14,de,1,2,"app-mesas",12),t.YNc(15,ue,6,0,"div",13),t.qZA()()(),t.YNc(16,me,1,0,"app-crear-pedido",14),t.YNc(17,pe,1,0,"app-agregar-producto-pedido",14)),2&e&&(t.xp6(8),t.Q6J("ngClass",o.generando?"d-flex align-items-center":""),t.xp6(1),t.Q6J("ngIf",o.generando),t.xp6(1),t.Q6J("ngIf",!o.generando),t.xp6(1),t.Q6J("ngIf",!o.generando),t.xp6(1),t.Q6J("ngIf",o.permisos.PERMISO_INSERCION),t.xp6(2),t.Q6J("ngForOf",o.mesas),t.xp6(1),t.Q6J("ngIf",0===o.mesas.length),t.xp6(1),t.Q6J("ngIf",o.creando),t.xp6(1),t.Q6J("ngIf",o.agregando))},dependencies:[d.mk,d.sg,d.O5,v.lW,b.Hw,Z.Ou,st,gt,Lt,ie],styles:['@import"https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined";h3[_ngcontent-%COMP%]{text-align:center;padding:15px;font-weight:400;font-family:Lobster Two,cursive;font-size:45px;margin-bottom:0%}@media (max-width:992px){.mesa-tama\\f1o[_ngcontent-%COMP%]{height:65px!important}.icono-tama\\f1o[_ngcontent-%COMP%]{width:50px!important}.hora-alineacion[_ngcontent-%COMP%]{text-align:start!important}}@media (max-width:365px){.ocultarTexto[_ngcontent-%COMP%]{display:none}.iconPdfCenter[_ngcontent-%COMP%]{margin:0!important}}@media (max-width:500px){.texto-mesa-hora[_ngcontent-%COMP%]{font-size:smaller!important;margin-bottom:0!important;padding-bottom:0}.texto-tama\\f1o[_ngcontent-%COMP%]{font-size:larger!important}.texto-boton[_ngcontent-%COMP%]{font-size:smaller!important}}@media (max-width:672px){.texto-boton-pdf[_ngcontent-%COMP%]{visibility:hidden}}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.mesa-tama\\f1o[_ngcontent-%COMP%]{height:50px;width:100%;border-color:#000}.texto-boton[_ngcontent-%COMP%]{height:50px}.icono-tama\\f1o[_ngcontent-%COMP%]{width:40px}.rojoDrB[_ngcontent-%COMP%]{background-color:#d12609;color:#fff}.cafeDrB[_ngcontent-%COMP%]{background-color:#1e120d;color:#fff}.img-tama\\f1o[_ngcontent-%COMP%]{width:40px;height:40px}.btn-p[_ngcontent-%COMP%]{border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}.btn-a[_ngcontent-%COMP%]{background-color:#898989!important;font-size:1rem;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;border-radius:10px;line-height:50px}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}.modal-body[_ngcontent-%COMP%]{background-color:#2b2b2b}.modal-footer[_ngcontent-%COMP%]{background-color:#454545}#fondoModal[_ngcontent-%COMP%]{background-color:#232323!important;color:#fff}#paginador[_ngcontent-%COMP%]{font-weight:700;margin-top:2px;background-color:#212529}.date_container[_ngcontent-%COMP%]{float:left;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#fff}']}),n})(),et=(()=>{class n{constructor(e){this.http=e,this.detalles=[],this.detalle={ID:0,ID_PEDIDO:0,ID_PRODUCTO:0,MESA:"",NOMBRE_PRODUCTO:"",PRECIO_PRODUCTO:"",DESCRIPCION:"",ID_ESTADO:0,ESTADO:"",COLOR:"",CANTIDAD:0,PARA_LLEVAR:!1,HORA:new Date,INFORMACION:"",PRECIO_DETALLE:"",TOTAL_IMPUESTO:"",PORCENTAJE_IMPUESTO:0,ID_IMPUESTO:0},this.baseURL=I.N.baseURL}getDetallePedido(e,o,i,r){return o||(o=""),this.http.get(`${this.baseURL}/cocina/?buscar=${o}&quienBusco=${e}&limite=${i||""}&desde=${r||""}`).pipe((0,m.K)(l=>(0,p.of)(l.error.msg)))}getDetalleVistaCliente(e,o,i,r){return o||(o=""),this.http.get(`${this.baseURL}/cocina/vista-clientes/?buscar=${o}&quienBusco=${e}&limite=${i||""}&desde=${r||""}`).pipe((0,m.K)(l=>(0,p.of)(l.error.msg)))}putEstadoDetalle(e,o){return this.http.put(`${this.baseURL}/mesa/detalle/${e}`,{id_usuario:o}).pipe((0,m.K)(c=>(0,p.of)(c.error)))}getReporte(e=""){return this.http.post(`${this.baseURL}/cocina/reporteria/cocina`,{buscar:e},{responseType:"blob"}).pipe((0,m.K)(r=>(0,p.of)(r.error.msg)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(w.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var R=u(8739);function _e(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"Generando... "),t.qZA())}function fe(n,a){if(1&n&&(t.TgZ(0,"span",19),t._UZ(1,"mat-spinner",20),t.YNc(2,_e,2,0,"span",7),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("diameter",30),t.xp6(1),t.Q6J("ngIf",e.generando)}}function he(n,a){1&n&&t._UZ(0,"img",21)}function be(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"Generar reporte"),t.qZA())}function Ce(n,a){1&n&&(t.TgZ(0,"th"),t._uU(1,"Acci\xf3n"),t.qZA())}function ve(n,a){1&n&&(t.TgZ(0,"tr")(1,"td",22)(2,"div",19)(3,"mat-icon",23),t._uU(4,"restaurant_menu"),t.qZA(),t.TgZ(5,"strong",24),t._uU(6,"No hay platos pendientes"),t.qZA()()()())}function xe(n,a){1&n&&(t.TgZ(0,"mat-icon",32),t._uU(1,"info"),t.qZA())}function Te(n,a){1&n&&t._UZ(0,"br")}function Ae(n,a){1&n&&(t.TgZ(0,"div",35),t._UZ(1,"mat-spinner",36),t.qZA()),2&n&&(t.xp6(1),t.Q6J("diameter",30))}function Ze(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"button",37)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,38)(6,"button",39),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2),r=i.$implicit,c=i.index,l=t.oxw();return t.KtG(l.actualizarEstado(r.ID,c))}),t.TgZ(7,"mat-icon",40),t._uU(8,"update"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Actualizar Estado"),t.qZA()()()()}if(2&n){const e=t.MAs(5),o=t.oxw(2).$implicit;t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(5),t.Q6J("disabled",4==o.ID_ESTADO)}}function Oe(n,a){if(1&n&&(t.TgZ(0,"td",33),t.YNc(1,Ae,2,1,"div",34),t.YNc(2,Ze,11,2,"div",7),t.qZA()),2&n){const e=t.oxw().index,o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.actualizandoEstado[e]),t.xp6(1),t.Q6J("ngIf",!o.actualizandoEstado[e])}}function Pe(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td",25)(2,"span",26),t._uU(3),t.ALo(4,"titlecase"),t.qZA()(),t.TgZ(5,"td",27),t._uU(6),t.ALo(7,"titlecase"),t.qZA(),t.TgZ(8,"td",28),t._uU(9),t.ALo(10,"titlecase"),t._UZ(11,"br"),t.YNc(12,xe,2,0,"mat-icon",29),t.TgZ(13,"span",16),t._uU(14),t.ALo(15,"lowercase"),t.qZA(),t.YNc(16,Te,1,0,"br",7),t.TgZ(17,"span",26),t._uU(18),t.qZA()(),t.TgZ(19,"td",30),t._uU(20),t.ALo(21,"date"),t.qZA(),t.YNc(22,Oe,3,2,"td",31),t.qZA()),2&n){const e=a.$implicit,o=t.oxw();t.xp6(2),t.Q2q("style","color: ",e.COLOR,";",t.Ckj),t.xp6(1),t.Oqu(t.lcZ(4,13,e.ESTADO)),t.xp6(3),t.Oqu(t.lcZ(7,15,e.MESA)),t.xp6(3),t.AsE(" ",t.lcZ(10,17,e.NOMBRE_PRODUCTO)," x ( ",e.CANTIDAD," )"),t.xp6(3),t.Q6J("ngIf",e.INFORMACION&&""!==e.INFORMACION),t.xp6(2),t.Oqu(t.lcZ(15,19,e.INFORMACION)),t.xp6(2),t.Q6J("ngIf",e.INFORMACION&&""!==e.INFORMACION),t.xp6(1),t.Tol(o.getColorPlato(e.PARA_LLEVAR)),t.xp6(1),t.hij(" ",e.PARA_LLEVAR?"Para Llevar":"Comer Aqu\xed"," "),t.xp6(2),t.Oqu(t.xi3(21,21,e.HORA,"h:mm a")),t.xp6(2),t.Q6J("ngIf",o.permisos.PERMISO_ACTUALIZACION)}}const Me=function(n){return[5,10,25,50,n]};let Ee=(()=>{class n{constructor(e,o,i,r,c,l,_){this.usuario=e,this.pantalla=o,this.cocinaService=i,this.fb=r,this.authService=c,this.ingresosService=l,this.wsService=_,this.onAbrirMenu=new t.vpe,this.toMayus=U.K.toMayusNoReactivo,this.tamano=0,this.limite=0,this.indice=-1,this.desde="0",this.registros=[],this.generando=!1,this.buscando=!1,this.actualizandoEstado=[],this.formularioBusqueda=this.fb.group({buscar:["",[s.kI.required,s.kI.maxLength(100)]]}),this.creando=!1,this.editando=!1}get permisos(){return this.pantalla.permisos}get detalles(){return this.cocinaService.detalle}cargarRegistros(){this.subscripcion=this.cocinaService.getDetallePedido(this.usuario.usuario.id_usuario).subscribe(o=>{this.registros=o.detalles,this.tamano=o.countDetalles,this.limite=o.limite})}generarReporte(){if(!this.generando){this.generando=!0;let{buscar:e}=this.formularioBusqueda.value;this.cocinaService.getReporte(e).subscribe(o=>{let i=new Blob([o],{type:"application/pdf"}),r=window.URL.createObjectURL(i);document.createElement("a").href=r,window.open(r,"_blank"),this.generando=!1})}}cambioDePagina(e){this.paginadorPorReferencia=e,this.subscripcion.unsubscribe();const o=this.usuario.usuario.id_usuario;let{buscar:i}=this.formularioBusqueda.value;this.buscando||(i="");let r=(e.pageIndex*e.pageSize).toString();this.desde=r,this.subscripcion=this.cocinaService.getDetallePedido(o,i,e.pageSize.toString(),r).subscribe(c=>{this.registros=c.detalles,this.tamano=c.countDetalles,this.limite=c.limite})}buscarRegistro(){this.paginadorPorReferencia&&(this.indice=-1),this.subscripcion.unsubscribe();const e=this.usuario.usuario.id_usuario,{buscar:o}=this.formularioBusqueda.value;this.buscando=""!==o,this.desde="0",this.subscripcion=this.cocinaService.getDetallePedido(e,o).subscribe(i=>{this.indice=0,this.registros=i.detalles,this.tamano=i.countDetalles,this.limite=i.limite})}recargar(){const e=this.usuario.usuario.id_usuario;let{buscar:o}=this.formularioBusqueda.value;this.subscripcion=this.cocinaService.getDetallePedido(e,o,this.limite.toString(),this.desde).subscribe(i=>{this.registros=i.detalles,this.tamano=i.countDetalles,this.limite=i.limite})}abrirMenu(){this.onAbrirMenu.emit(!0)}registrarIngreso(){this.ingreso=this.ingresosService.eventoIngreso(this.usuario.usuario.id_usuario,31).subscribe()}actualizarEstado(e,o){this.actualizandoEstado[o]||(this.actualizandoEstado[o]=!0,this.cocinaService.putEstadoDetalle(e,this.authService.usuario.id_usuario).subscribe(i=>{!0===i.ok?this.actualizandoEstado[o]=!1:(this.actualizandoEstado[o]=!1,g().fire({title:"Advertencia",text:i.msg,icon:"warning",iconColor:"white",background:"#f8bb86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0}))}))}ngOnInit(){this.subsSocket1=this.wsService.listen("productoAgregado").subscribe(e=>{this.recargar()}),this.subsSocket2=this.wsService.listen("actualizarTabla").subscribe(e=>{this.recargar()}),this.subsSocket3=this.wsService.listen("actualizarMesa").subscribe(e=>{this.recargar()}),this.subsSocket4=this.wsService.listen("recargar").subscribe(e=>{this.recargar()}),this.registrarIngreso(),this.cargarRegistros()}ngOnDestroy(){this.subsSocket1&&this.subsSocket1.unsubscribe(),this.subsSocket2&&this.subsSocket2.unsubscribe(),this.subsSocket3&&this.subsSocket3.unsubscribe(),this.subsSocket4&&this.subsSocket4.unsubscribe(),this.subscripcion&&this.subscripcion.unsubscribe(),this.ingreso&&this.ingreso.unsubscribe()}getColorPlato(e){return e?"llevar":"noLlevar"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.e),t.Y36(A.i),t.Y36(et),t.Y36(s.qu),t.Y36(h.e),t.Y36(k.K),t.Y36(q.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-cocina"]],outputs:{onAbrirMenu:"onAbrirMenu"},decls:33,vars:14,consts:[[1,"pb-4"],["id","contenedor",1,"container-md","rounded-4","pb-2"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","pb-0","pt-3"],[1,"d-flex","flex-wrap"],["mat-flat-button","","type","button",1,"me-3","btn-p","mb-2",3,"ngClass","click"],["class","d-flex  align-items-center justify-content-center",4,"ngIf"],["src","/assets/icons/pdf.png ","width","30px","height","30px","class","me-3",4,"ngIf"],[4,"ngIf"],[1,"d-flex","align-items-center","flex-wrap",2,"height","100%"],[1,"mb-2",3,"formGroup","ngSubmit"],[1,"me-3"],["type","text","formControlName","buscar",1,"input","rounded-3"],[1,"text-white-50","m-2"],["id","no-more-tables",1,"table-responsive","tabla"],[1,"table","table-dark","table-striped"],[1,"bg-dark","text-light"],[1,"align-middle"],[4,"ngFor","ngForOf"],["id","paginador","aria-label","Select page",3,"length","pageSize","pageSizeOptions","pageIndex","page"],[1,"d-flex","align-items-center","justify-content-center"],[1,"me-3","uploader-status",3,"diameter"],["src","/assets/icons/pdf.png ","width","30px","height","30px",1,"me-3"],["colspan","14",1,"align-middle"],["id","iconEditar"],[1,"fw-normal","text-light","ms-2"],["data-title","Estado"],[1,"fw-semibold"],["data-title","Destino"],["data-title","Plato"],["matTooltip","Informaci\xf3n adicional","class","align-middle me-1","style","font-size: 19px; width: 19px; height: 19px;",4,"ngIf"],["data-title","Hora"],["data-title","Acci\xf3n",4,"ngIf"],["matTooltip","Informaci\xf3n adicional",1,"align-middle","me-1",2,"font-size","19px","width","19px","height","19px"],["data-title","Acci\xf3n"],["class","d-flex justify-content-center align-items-center w-100",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","w-100"],["color","primary",1,"",3,"diameter"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],["id","iconUnlock"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2,"Cocina"),t.qZA(),t.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"button",4),t.NdJ("click",function(){return o.generarReporte()}),t.YNc(7,fe,3,2,"span",5),t.YNc(8,he,1,0,"img",6),t.YNc(9,be,2,0,"span",7),t.qZA()(),t.TgZ(10,"div",8)(11,"form",9),t.NdJ("ngSubmit",function(){return o.buscarRegistro()}),t.TgZ(12,"label",10),t._uU(13,"Buscar:"),t.qZA(),t._UZ(14,"input",11),t.qZA()()(),t._UZ(15,"hr",12),t.TgZ(16,"div",13)(17,"table",14)(18,"thead",15)(19,"tr")(20,"th"),t._uU(21,"Estado"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Destino"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Plato"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Hora"),t.qZA(),t.YNc(28,Ce,2,0,"th",7),t.qZA()(),t.TgZ(29,"tbody",16),t.YNc(30,ve,7,0,"tr",7),t.YNc(31,Pe,23,24,"tr",17),t.qZA()()(),t.TgZ(32,"mat-paginator",18),t.NdJ("page",function(r){return o.cambioDePagina(r)}),t.qZA()()()),2&e&&(t.xp6(6),t.Q6J("ngClass",o.generando?"d-flex align-items-center":""),t.xp6(1),t.Q6J("ngIf",o.generando),t.xp6(1),t.Q6J("ngIf",!o.generando),t.xp6(1),t.Q6J("ngIf",!o.generando),t.xp6(2),t.Q6J("formGroup",o.formularioBusqueda),t.xp6(17),t.Q6J("ngIf",o.permisos.PERMISO_ACTUALIZACION),t.xp6(2),t.Q6J("ngIf",o.registros.length<1),t.xp6(1),t.Q6J("ngForOf",o.registros),t.xp6(1),t.Q6J("length",o.tamano)("pageSize",o.limite)("pageSizeOptions",t.VKq(12,Me,o.tamano))("pageIndex",o.indice))},dependencies:[d.mk,d.sg,d.O5,v.lW,b.Hw,T.VK,T.OP,T.p6,Z.Ou,R.NW,B.gM,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,d.i8,d.rS,d.uU],styles:[".background[_ngcontent-%COMP%]{background-color:#e0e0e0}#contenedor[_ngcontent-%COMP%]{background-color:#212529}.noLlevar[_ngcontent-%COMP%]{color:#58b433}.llevar[_ngcontent-%COMP%]{color:#d12609}#iconEditar[_ngcontent-%COMP%]{color:#e25d5d}#iconBlock[_ngcontent-%COMP%]{color:#57f672}#iconUnlock[_ngcontent-%COMP%]{color:#82da71}label[_ngcontent-%COMP%]{color:#fff}thead[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{text-align:center}.btn-p[_ngcontent-%COMP%]{border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}.btn-a[_ngcontent-%COMP%]{background-color:#898989!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;border-radius:10px;line-height:50px}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}h3[_ngcontent-%COMP%]{text-align:center;padding:15px;font-weight:400;font-family:Lobster Two,cursive;font-size:45px;margin-bottom:0%}.modal-body[_ngcontent-%COMP%]{background-color:#2b2b2b}.modal-footer[_ngcontent-%COMP%]{background-color:#454545}#fondoModal[_ngcontent-%COMP%]{background-color:#232323!important;color:#fff}#paginador[_ngcontent-%COMP%]{font-weight:700;margin-top:2px;background-color:#212529}@media only screen and (max-width:800px){#no-more-tables[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], #no-more-tables[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], #no-more-tables[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block}#no-more-tables[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{position:absolute;top:-9999px;left:-9999px}#no-more-tables[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{position:relative;padding-left:50%;border:none}#no-more-tables[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-title);position:absolute;left:6px;font-weight:700}#no-more-tables[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}}[_nghost-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#fff}"]}),n})(),Ie=(()=>{class n{constructor(e){this.http=e,this.baseURL=I.N.baseURL}validarCaja(){return this.http.get(`${this.baseURL}/mesa/validarCaja`).pipe((0,m.K)(()=>(0,p.of)(!1)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(w.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ot=(()=>{class n{constructor(e,o){this.cajaValidar=e,this.router=o}canActivate(e,o){return this.cajaValidar.validarCaja().pipe((0,C.b)(i=>{!0!==i&&(g().fire({title:"Acceso inv\xe1lido",text:"Se necesita abrir la caja para acceder a la pantalla",icon:"info",iconColor:"white",background:"#3fc3ee",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0}),this.router.navigateByUrl("/main/dashboard"))}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Ie),t.LFG(f.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nt=(()=>{class n{constructor(e){this.http=e,this.estados=[],this.estado={ID:0,ESTADO:"",COLOR:"",CREADO_POR:"",FECHA_CREACION:new Date,MODIFICADO_POR:"",FECHA_MODIFICACION:new Date},this.baseURL=I.N.baseURL}getEstados(e,o,i,r){return o||(o=""),this.http.get(`${this.baseURL}/estado/?buscar=${o}&quienBusco=${e}&limite=${i||""}&desde=${r||""}`).pipe((0,C.b)(l=>{this.estados=l.estados}),(0,m.K)(l=>(0,p.of)(l.error.msg)))}getUnEstado(e){return this.http.get(`${this.baseURL}/estado/${e}`).pipe((0,C.b)(i=>{this.estado=i.estado}),(0,m.K)(i=>(0,p.of)(i.error)))}actualizarEstado(e,o,i,r){return this.http.put(`${this.baseURL}/estado/editar-estado/${e}`,{estado:o,color:i,id_usuario:r}).pipe((0,m.K)(_=>(0,p.of)(_.error.msg)))}getReporte(e=""){return this.http.post(`${this.baseURL}/estado/reporteria/estado`,{buscar:e},{responseType:"blob"}).pipe((0,m.K)(r=>(0,p.of)(r.error.msg)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(w.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const we=["cerrarEditar"],ke=["inputEstado"],Ue=["inputColor"];function De(n,a){1&n&&t._UZ(0,"mat-spinner",22),2&n&&t.Q6J("diameter",50)}let ye=(()=>{class n{constructor(e,o,i){this.estadoService=e,this.fb=o,this.usuario=i,this.onActualizacion=new t.vpe,this.onCerrar=new t.vpe,this.enEjecucion=!1,this.toMayus=U.K.toMayusNoReactivo}ngOnInit(){}actualizar(){this.enEjecucion||(this.enEjecucion=!0,this.estadoService.actualizarEstado(this.estado.ID,this.inputEstado.nativeElement.value,this.inputColor.nativeElement.value,this.usuario.usuario.id_usuario).subscribe(r=>{this.onActualizacion.emit(),!0===r.ok?(this.cerrarEditar._elementRef.nativeElement.click(),g().fire({title:"\xa1\xc9xito!",text:r.msg,icon:"success",iconColor:"white",background:"#a5dc86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0}),this.enEjecucion=!1):(g().fire({title:"Advertencia",text:r,icon:"warning",iconColor:"white",background:"#f8bb86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0}),this.enEjecucion=!1)}))}get estado(){return this.estadoService.estado}ngOnDestroy(){this.cerrarEditar._elementRef.nativeElement.click()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(nt),t.Y36(s.qu),t.Y36(h.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-editar-estado"]],viewQuery:function(e,o){if(1&e&&(t.Gf(we,5),t.Gf(ke,5),t.Gf(Ue,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.cerrarEditar=i.first),t.iGM(i=t.CRH())&&(o.inputEstado=i.first),t.iGM(i=t.CRH())&&(o.inputColor=i.first)}},outputs:{onActualizacion:"onActualizacion",onCerrar:"onCerrar"},decls:36,vars:3,consts:[["id","exampleModal2","data-bs-backdrop","static","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],["id","fondoModal",1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","ms-3"],["mat-icon-button","","color","warn","data-bs-dismiss","modal","aria-label","Close","type","button",3,"click"],["cerrarEditar",""],[1,"modal-body"],[1,"px-lg-3","py-lg-3","w-100","align-self-center"],["appearance","legacy",1,"example-full-width"],["matInput","","autocomplete","off","disabled","true",3,"value","keyup"],["inputEstado",""],["matSuffix",""],["matInput","","autocomplete","off",3,"value"],["inputColor",""],[1,"d-flex","flex-row-reverse"],[1,"d-flex","flex-row-reverse","flex-wrap"],["mat-flat-button","","type","button",1,"btn-a",3,"click"],[1,"ms-2","me-1"],[1,"me-2"],["class","me-3",3,"diameter",4,"ngIf"],[1,"modal-footer"],[1,"me-3",3,"diameter"]],template:function(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),t._uU(5,"Editar Estado"),t.qZA(),t.TgZ(6,"button",5,6),t.NdJ("click",function(){return o.onCerrar}),t.TgZ(8,"mat-icon"),t._uU(9,"cancel"),t.qZA()()(),t.TgZ(10,"div",7)(11,"div",8)(12,"form")(13,"mat-form-field",9)(14,"mat-label"),t._uU(15,"Nombre de la Categor\xeda"),t.qZA(),t.TgZ(16,"input",10,11),t.NdJ("keyup",function(){t.CHM(i);const c=t.MAs(17);return t.KtG(o.toMayus(c))}),t.qZA(),t.TgZ(18,"mat-icon",12),t._uU(19,"menu_book"),t.qZA()(),t.TgZ(20,"mat-form-field",9)(21,"mat-label"),t._uU(22,"C\xf3digo de Color"),t.qZA(),t._UZ(23,"input",13,14),t.TgZ(25,"mat-icon",12),t._uU(26,"menu_book"),t.qZA()(),t.TgZ(27,"div",15)(28,"div",16)(29,"button",17),t.NdJ("click",function(){return o.actualizar()}),t.TgZ(30,"mat-icon",18),t._uU(31,"save"),t.qZA(),t.TgZ(32,"span",19),t._uU(33,"Guardar"),t.qZA()()(),t.YNc(34,De,1,1,"mat-spinner",20),t.qZA()()()(),t._UZ(35,"div",21),t.qZA()()()}2&e&&(t.xp6(16),t.Q6J("value",o.estado.ESTADO),t.xp6(7),t.Q6J("value",o.estado.COLOR),t.xp6(11),t.Q6J("ngIf",o.enEjecucion))},dependencies:[d.O5,v.lW,b.Hw,Z.Ou,x.KE,x.hX,x.R9,D.Nt,s._Y,s.JL],styles:[".example-full-width[_ngcontent-%COMP%]{width:100%;color:#fff}.btn-p[_ngcontent-%COMP%]{width:50%;border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;padding:inherit}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}.btn-a[_ngcontent-%COMP%]{width:100%;background-color:#898989!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;transition:.3s ease all;border-radius:10px;line-height:50px;padding:inherit}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}"]}),n})();function qe(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"Generando... "),t.qZA())}function Ne(n,a){if(1&n&&(t.TgZ(0,"span",21),t._UZ(1,"mat-spinner",22),t.YNc(2,qe,2,0,"span",6),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("diameter",30),t.xp6(1),t.Q6J("ngIf",e.generando)}}function Se(n,a){1&n&&t._UZ(0,"img",23)}function Fe(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"Generar reporte"),t.qZA())}function Re(n,a){1&n&&(t.TgZ(0,"th"),t._uU(1,"Acci\xf3n"),t.qZA())}function Le(n,a){1&n&&(t.TgZ(0,"tr")(1,"td",24)(2,"div",21)(3,"mat-icon",25),t._uU(4,"info_outline"),t.qZA(),t.TgZ(5,"strong",26),t._uU(6,"No se encontraron registros"),t.qZA()()()())}function Je(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("mouseenter",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.editando=!0)})("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.seleccionar(i.ID))}),t.TgZ(1,"mat-icon",40),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Editar"),t.qZA()()}}function Be(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.alertaEliminar())}),t.TgZ(1,"mat-icon",25),t._uU(2,"delete_forever"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Eliminar"),t.qZA()()}}function Ge(n,a){if(1&n&&(t.TgZ(0,"td",34)(1,"button",35)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,36),t.YNc(6,Je,5,0,"button",37),t.YNc(7,Be,5,0,"button",38),t.qZA()()),2&n){const e=t.MAs(5),o=t.oxw(2);t.xp6(1),t.Q6J("matMenuTriggerFor",e)("matMenuTriggerFor",e),t.xp6(5),t.Q6J("ngIf",o.permisos.PERMISO_ACTUALIZACION),t.xp6(1),t.Q6J("ngIf",o.permisos.PERMISO_ELIMINACION)}}function Qe(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td",27),t._uU(2),t.qZA(),t.TgZ(3,"td",28),t._uU(4),t.qZA(),t.TgZ(5,"td",29),t._uU(6),t.qZA(),t.TgZ(7,"td",30),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"td",31),t._uU(11),t.qZA(),t.TgZ(12,"td",32),t._uU(13),t.ALo(14,"date"),t.qZA(),t.YNc(15,Ge,8,4,"td",33),t.qZA()),2&n){const e=a.$implicit,o=t.oxw();t.xp6(2),t.Oqu(e.ESTADO),t.xp6(2),t.Oqu(e.COLOR),t.xp6(2),t.Oqu(e.CREADO_POR),t.xp6(2),t.Oqu(t.xi3(9,7,e.FECHA_CREACION,"d/M/yy, h:mm a")),t.xp6(3),t.Oqu(e.MODIFICADO_POR),t.xp6(2),t.Oqu(t.xi3(14,10,e.FECHA_MODIFICACION,"d/M/yy, h:mm a")),t.xp6(2),t.Q6J("ngIf",o.permisos.PERMISO_ACTUALIZACION||o.permisos.PERMISO_ELIMINACION)}}function je(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-editar-estado",42),t.NdJ("onCerrar",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.editando=i)})("onActualizacion",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.recargar())}),t.qZA()}}const Ye=function(n){return[5,10,25,50,n]};let ze=(()=>{class n{constructor(e,o,i,r,c){this.estadoService=e,this.fb=o,this.pantalla=i,this.usuario=r,this.ingresosService=c,this.id=0,this.registros=[],this.tamano=0,this.limite=0,this.indice=-1,this.desde="0",this.generando=!1,this.creando=!1,this.editando=!1,this.buscando=!1,this.formularioBusqueda=this.fb.group({buscar:["",[s.kI.required,s.kI.maxLength(100)]]})}ngOnInit(){this.registrarIngreso(),this.cargarRegistros()}ngOnDestroy(){this.subscripcion&&this.subscripcion.unsubscribe(),this.ingreso&&this.ingreso.unsubscribe()}cargarRegistros(){this.subscripcion=this.estadoService.getEstados(this.usuario.usuario.id_usuario).subscribe(o=>{this.registros=this.estadoService.estados,this.tamano=o.countEstados,this.limite=o.limite})}cambioDePagina(e){this.paginadorPorReferencia=e,this.subscripcion.unsubscribe();const o=this.usuario.usuario.id_usuario;let{buscar:i}=this.formularioBusqueda.value;this.buscando||(i="");let r=(e.pageIndex*e.pageSize).toString();this.desde=r,this.subscripcion=this.estadoService.getEstados(o,i,e.pageSize.toString(),r).subscribe(c=>{this.registros=c.estados,this.tamano=c.countEstados,this.limite=c.limite})}buscarRegistro(){this.paginadorPorReferencia&&(this.indice=-1),this.subscripcion.unsubscribe();const e=this.usuario.usuario.id_usuario,{buscar:o}=this.formularioBusqueda.value;this.buscando=""!==o,this.desde="0",this.subscripcion=this.estadoService.getEstados(e,o).subscribe(i=>{this.indice=0,this.registros=i.estados,this.tamano=i.countEstados,this.limite=i.limite})}registrarIngreso(){this.ingreso=this.ingresosService.eventoIngreso(this.usuario.usuario.id_usuario,25).subscribe()}seleccionar(e){this.estadoService.getUnEstado(e).subscribe()}get permisos(){return this.pantalla.permisos}generarReporte(){if(!this.generando){this.generando=!0;let{buscar:e}=this.formularioBusqueda.value;this.estadoService.getReporte(e).subscribe(o=>{let i=new Blob([o],{type:"application/pdf"}),r=window.URL.createObjectURL(i);document.createElement("a").href=r,window.open(r,"_blank"),this.generando=!1})}}recargar(){const e=this.usuario.usuario.id_usuario;let{buscar:o}=this.formularioBusqueda.value;this.subscripcion=this.estadoService.getEstados(e,o,this.limite.toString(),this.desde).subscribe(i=>{this.registros=i.estados,this.tamano=i.countEstados,this.limite=i.limite})}alertaNuevo(){g().fire({title:"Advertencia",text:"\xa1No se puede crear un nuevo estado!",icon:"warning",iconColor:"white",background:"#008394",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0})}alertaEliminar(){g().fire({title:"Advertencia",text:"\xa1No se puede eliminar un estado!",icon:"warning",iconColor:"white",background:"#008394",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(nt),t.Y36(s.qu),t.Y36(A.i),t.Y36(h.e),t.Y36(k.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-estado"]],decls:42,vars:15,consts:[["id","contenedor",1,"container-md","rounded-4","pb-2"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","pb-0","pt-3"],[1,"d-flex","flex-wrap"],["mat-flat-button","","type","button",1,"me-3","btn-p","mb-2",3,"ngClass","click"],["class","d-flex  align-items-center justify-content-center",4,"ngIf"],["src","/assets/icons/pdf.png ","width","30px","height","30px","class","me-3",4,"ngIf"],[4,"ngIf"],["mat-flat-button","","type","button","data-bs-toggle","modal","data-bs-target","#exampleModal","data-bs-whatever","@getbootstrap",1,"me-3","btn-a","mb-2",3,"mouseenter","click"],[1,"d-flex","align-items-center","flex-wrap",2,"height","100%"],[1,"mb-2",3,"formGroup","ngSubmit"],[1,"me-3"],["type","text","formControlName","buscar",1,"input","rounded-3"],[1,"text-white-50","m-2"],["id","no-more-tables",1,"table-responsive","tabla"],[1,"table","table-dark","table-striped"],[1,"bg-dark","text-light"],[1,"align-middle"],[4,"ngFor","ngForOf"],["id","paginador","aria-label","Select page",3,"length","pageSize","pageSizeOptions","pageIndex","page"],[1,"mt-4"],[3,"onCerrar","onActualizacion",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center"],[1,"me-3","uploader-status",3,"diameter"],["src","/assets/icons/pdf.png ","width","30px","height","30px",1,"me-3"],["colspan","14",1,"align-middle"],["id","iconBlock"],[1,"fw-normal","text-light","ms-2"],["data-title","Nombre del Estado"],["data-title","C\xf3digo de Color"],["data-title","Creado Por"],["data-title","Fecha de Creaci\xf3n"],["data-title","Modificado Por"],["data-title","Fecha de Modificaci\xf3n"],["data-title","Acci\xf3n",4,"ngIf"],["data-title","Acci\xf3n"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","","data-bs-toggle","modal","data-bs-target","#exampleModal2","data-bs-whatever","@getbootstrap",3,"mouseenter","click",4,"ngIf"],["mat-menu-item","","data-bs-toggle","modal",3,"click",4,"ngIf"],["mat-menu-item","","data-bs-toggle","modal","data-bs-target","#exampleModal2","data-bs-whatever","@getbootstrap",3,"mouseenter","click"],["id","iconEditar"],["mat-menu-item","","data-bs-toggle","modal",3,"click"],[3,"onCerrar","onActualizacion"]],template:function(e,o){1&e&&(t.TgZ(0,"div")(1,"h3"),t._uU(2,"Gesti\xf3n de Estados"),t.qZA(),t.TgZ(3,"div",0)(4,"div",1)(5,"div",2)(6,"button",3),t.NdJ("click",function(){return o.generarReporte()}),t.YNc(7,Ne,3,2,"span",4),t.YNc(8,Se,1,0,"img",5),t.YNc(9,Fe,2,0,"span",6),t.qZA(),t.TgZ(10,"button",7),t.NdJ("mouseenter",function(){return o.creando=!0})("click",function(){return o.alertaNuevo()}),t._uU(11,"Nuevo"),t.qZA()(),t.TgZ(12,"div",8)(13,"form",9),t.NdJ("ngSubmit",function(){return o.buscarRegistro()}),t.TgZ(14,"label",10),t._uU(15,"Buscar:"),t.qZA(),t._UZ(16,"input",11),t.qZA()()(),t._UZ(17,"hr",12),t.TgZ(18,"div",13)(19,"table",14)(20,"thead",15)(21,"tr")(22,"th"),t._uU(23,"Nombre del Estado"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"C\xf3digo de Color"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"Creado Por"),t.qZA(),t.TgZ(28,"th"),t._uU(29,"Fecha de Creaci\xf3n"),t.qZA(),t.TgZ(30,"th"),t._uU(31,"Modificado Por"),t.qZA(),t.TgZ(32,"th"),t._uU(33,"Fecha de Modificaci\xf3n"),t.qZA(),t.YNc(34,Re,2,0,"th",6),t.qZA()(),t.TgZ(35,"tbody",16),t.YNc(36,Le,7,0,"tr",6),t.YNc(37,Qe,16,13,"tr",17),t.qZA()()(),t.TgZ(38,"mat-paginator",18),t.NdJ("page",function(r){return o.cambioDePagina(r)}),t.qZA()(),t.TgZ(39,"div",19),t._UZ(40,"br"),t.qZA(),t.YNc(41,je,1,0,"app-editar-estado",20),t.qZA()),2&e&&(t.xp6(6),t.Q6J("ngClass",o.generando?"d-flex align-items-center":""),t.xp6(1),t.Q6J("ngIf",o.generando),t.xp6(1),t.Q6J("ngIf",!o.generando),t.xp6(1),t.Q6J("ngIf",!o.generando),t.xp6(4),t.Q6J("formGroup",o.formularioBusqueda),t.xp6(21),t.Q6J("ngIf",o.permisos.PERMISO_ACTUALIZACION||o.permisos.PERMISO_ELIMINACION),t.xp6(2),t.Q6J("ngIf",o.registros.length<1),t.xp6(1),t.Q6J("ngForOf",o.registros),t.xp6(1),t.Q6J("length",o.tamano)("pageSize",o.limite)("pageSizeOptions",t.VKq(13,Ye,o.tamano))("pageIndex",o.indice),t.xp6(3),t.Q6J("ngIf",o.editando))},dependencies:[d.mk,d.sg,d.O5,v.lW,b.Hw,T.VK,T.OP,T.p6,Z.Ou,R.NW,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,ye,d.uU],styles:['@import"https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined";.background[_ngcontent-%COMP%]{background-color:#e0e0e0}#contenedor[_ngcontent-%COMP%]{background-color:#212529}#iconEditar[_ngcontent-%COMP%]{color:#898989}#iconBlock[_ngcontent-%COMP%]{color:#f65757}label[_ngcontent-%COMP%]{color:#fff}thead[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{text-align:center}.btn-p[_ngcontent-%COMP%]{border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}.btn-a[_ngcontent-%COMP%]{background-color:#898989!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;border-radius:10px;line-height:50px}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}h3[_ngcontent-%COMP%]{text-align:center;padding:15px;font-weight:400;font-family:Lobster Two,cursive;font-size:45px;margin-bottom:0%}.modal-body[_ngcontent-%COMP%]{background-color:#2b2b2b}.modal-footer[_ngcontent-%COMP%]{background-color:#454545}#fondoModal[_ngcontent-%COMP%]{background-color:#232323!important;color:#fff}#paginador[_ngcontent-%COMP%]{font-weight:700;margin-top:2px;background-color:#212529}@media only screen and (max-width:800px){#no-more-tables[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], #no-more-tables[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], #no-more-tables[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block}#no-more-tables[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{position:absolute;top:-9999px;left:-9999px}#no-more-tables[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{position:relative;padding-left:50%;border:none}#no-more-tables[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-title);position:absolute;left:6px;font-weight:700}#no-more-tables[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}}[_nghost-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#fff}']}),n})(),N=(()=>{class n{constructor(e){this.http=e,this.descuento={ID:0,NOMBRE:"",CANTIDAD:0,ID_TIPO_DESCUENTO:0,DETALLE:"",ES_PORCENTAJE:!1},this.descuentos=[],this.baseURL=I.N.baseURL}getDescuentos(e,o,i,r){return o||(o=""),this.http.get(`${this.baseURL}/descuento/?buscar=${o}&quienBusco=${e}&limite=${i||""}&desde=${r||""}`).pipe((0,C.b)(l=>{this.descuentos=l.descuentos}),(0,m.K)(l=>(0,p.of)(l.error.msg)))}getDescuento(e){return this.http.get(`${this.baseURL}/descuento/${e}`).pipe((0,C.b)(i=>{this.descuento=i.descuento}),(0,m.K)(i=>(0,p.of)(i.error)))}postDescuento(e,o,i,r){return this.http.post(`${this.baseURL}/descuento/`,{nombre:e,id_descuento:o,cantidad:i,id_usuario:r}).pipe((0,m.K)(_=>(0,p.of)(_.error)))}putDescuento(e,o,i,r,c){return this.http.put(`${this.baseURL}/descuento/${e}`,{nombre:o,id_descuento:i,cantidad:r,id_usuario:c}).pipe((0,m.K)(E=>(0,p.of)(E.error.msg)))}deleteDescuento(e,o){return this.http.delete(`${this.baseURL}/descuento/${e}?quienElimina=${o}`).pipe((0,m.K)(r=>(0,p.of)(r.error.msg)))}getReporte(e=""){return this.http.post(`${this.baseURL}/descuento/reporteria/descuento`,{buscar:e},{responseType:"blob"}).pipe((0,m.K)(r=>(0,p.of)(r.error.msg)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(w.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const He=["cerrarCrear"];function Ke(n,a){1&n&&t._UZ(0,"mat-spinner",28),2&n&&t.Q6J("diameter",50)}let $e=(()=>{class n{constructor(e,o,i,r,c){this.descuentoService=e,this.pantalla=o,this.fb=i,this.authService=r,this.ingresosService=c,this.onCerrar=new t.vpe,this.onCrear=new t.vpe,this.enEjecucion=!1,this.cambiandoContra=!1,this.formularioCreacion=this.fb.group({nombre:["",[s.kI.required,s.kI.maxLength(100)]],porcentaje:["",[s.kI.required]],cantidad:["",[s.kI.required]]}),this.toMayus=U.K.toMayus}validarNumeros(e){return(0,M.Z)(function*(){("+"===e.key||"-"===e.key||"e"===e.key||"E"===e.key)&&e.preventDefault()})()}crearDescuento(){if(!this.enEjecucion){let e=0;const{nombre:o,porcentaje:i,cantidad:r}=this.formularioCreacion.value,c=this.authService.usuario.id_usuario;e="1"===i?1:2,this.enEjecucion=!0,this.subscripcion=this.descuentoService.postDescuento(o,e,r,c.toString()).subscribe(l=>{this.onCrear.emit(),!0===l.ok?(this.enEjecucion=!1,this.cerrarCrear._elementRef.nativeElement.click(),g().fire({title:"\xa1\xc9xito!",text:l.msg,icon:"success",iconColor:"white",background:"#a5dc86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0})):(this.enEjecucion=!1,g().fire({title:"Advertencia",text:l.msg,icon:"warning",iconColor:"white",background:"#f8bb86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0}))})}}ngOnInit(){}cerrar(){setTimeout(()=>{this.onCerrar.emit(!1)},250)}ngOnDestroy(){this.cerrarCrear._elementRef.nativeElement.click()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(N),t.Y36(A.i),t.Y36(s.qu),t.Y36(h.e),t.Y36(k.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-nuevo-descuento"]],viewQuery:function(e,o){if(1&e&&t.Gf(He,5),2&e){let i;t.iGM(i=t.CRH())&&(o.cerrarCrear=i.first)}},outputs:{onCerrar:"onCerrar",onCrear:"onCrear"},decls:45,vars:3,consts:[["id","exampleModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-scrollable","modal-lg"],["id","fondoModal",1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","ms-3"],["mat-icon-button","","color","warn","data-bs-dismiss","modal","aria-label","Close","type","button",3,"click"],["cerrarCrear",""],[1,"modal-body"],[1,"px-lg-3","py-lg-3","w-100","align-self-center"],[3,"formGroup"],[1,"my-0","fw-bold"],["appearance","legacy",1,"example-full-width"],["matInput","","formControlName","nombre","placeholder","Nombre del Descuento","autocomplete","off",3,"keyup"],["matSuffix",""],[1,"my-0","fw-bold","mb-2"],[1,""],["formControlName","porcentaje"],["value","2","color","primary",1,"col-6"],["value","1","color","primary",1,"col-6"],[1,"mt-2"],[1,"mb-0","mt-2","fw-bold"],["matInput","","formControlName","cantidad","type","number","min","0","autocomplete","off"],[1,"d-flex","flex-row-reverse"],["mat-flat-button","","type","button",1,"btn-a",3,"disabled","click"],[1,"ms-2","me-1"],[1,"me-2"],["class","me-3",3,"diameter",4,"ngIf"],[1,"modal-footer"],[1,"me-3",3,"diameter"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),t._uU(5,"Ingresar nuevo descuento"),t.qZA(),t.TgZ(6,"button",5,6),t.NdJ("click",function(){return o.cerrar()}),t.TgZ(8,"mat-icon"),t._uU(9,"cancel"),t.qZA()()(),t.TgZ(10,"div",7)(11,"div",8)(12,"form",9)(13,"p",10),t._uU(14,"Nombre"),t.qZA(),t.TgZ(15,"mat-form-field",11)(16,"mat-label"),t._uU(17,"Nombre del descuento"),t.qZA(),t.TgZ(18,"input",12),t.NdJ("keyup",function(){return o.toMayus(o.formularioCreacion,"nombre")}),t.qZA(),t.TgZ(19,"mat-icon",13),t._uU(20,"payments"),t.qZA()(),t.TgZ(21,"p",14),t._uU(22,"Tipo de descuento"),t.qZA(),t.TgZ(23,"div",15)(24,"mat-radio-group",16)(25,"mat-radio-button",17),t._uU(26,"Porcentaje "),t.qZA(),t.TgZ(27,"mat-radio-button",18),t._uU(28,"Fijo "),t.qZA()()(),t._UZ(29,"p",19),t.TgZ(30,"p",20),t._uU(31,"Cantidad del descuento"),t.qZA(),t.TgZ(32,"mat-form-field",11)(33,"mat-label"),t._uU(34,"Cantidad del descuento (n\xfamero entero)"),t.qZA(),t._UZ(35,"input",21),t.qZA(),t.TgZ(36,"div",22)(37,"div",15)(38,"button",23),t.NdJ("click",function(){return o.crearDescuento()}),t.TgZ(39,"mat-icon",24),t._uU(40,"save"),t.qZA(),t.TgZ(41,"span",25),t._uU(42,"Guardar"),t.qZA()()(),t.YNc(43,Ke,1,1,"mat-spinner",26),t.qZA()()()(),t._UZ(44,"div",27),t.qZA()()()),2&e&&(t.xp6(12),t.Q6J("formGroup",o.formularioCreacion),t.xp6(26),t.Q6J("disabled",o.formularioCreacion.invalid),t.xp6(5),t.Q6J("ngIf",o.enEjecucion))},dependencies:[d.O5,v.lW,b.Hw,Z.Ou,x.KE,x.hX,x.R9,D.Nt,y.VQ,y.U0,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.qQ,s.sg,s.u],styles:[".example-full-width[_ngcontent-%COMP%]{width:100%;color:#fff}.example-mid-width[_ngcontent-%COMP%]{width:48%;color:#fff}.btn-p[_ngcontent-%COMP%]{border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;padding:inherit}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}.btn-a[_ngcontent-%COMP%]{background-color:#898989!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;transition:.3s ease all;border-radius:10px;line-height:50px;padding:inherit}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}  .cdk-overlay-container{z-index:999999!important}.modal-body[_ngcontent-%COMP%]{background-color:#2b2b2b}.modal-footer[_ngcontent-%COMP%]{background-color:#454545}#fondoModal[_ngcontent-%COMP%]{background-color:#232323!important;color:#fff}.form-check-input[_ngcontent-%COMP%]:checked{background-color:#d12609!important;border-color:#d12609!important;box-shadow:none;--bs-btn-active-border-color: none;--bs-btn-hover-bg: none;--bs-btn-hover-border-color: none;--bs-btn-disabled-border-color: none;--bs-btn-focus-shadow-rgb: none}.form-check-input[_ngcontent-%COMP%]:focus{background-color:#d12609!important;border-color:#d12609!important;box-shadow:none;--bs-btn-active-border-color: none;--bs-btn-hover-bg: none;--bs-btn-hover-border-color: none;--bs-btn-disabled-border-color: none;--bs-btn-focus-shadow-rgb: none}@media only screen and (max-width:991px){.eliminarPaddin[_ngcontent-%COMP%]{padding-left:0}.textResponsive[_ngcontent-%COMP%]{font-size:small!important}}.textResponsive[_ngcontent-%COMP%]{font-size:small!important}"]}),n})();const Ve=["cerrarEditar"],Xe=["nombre"],We=["cantidad"];function to(n,a){1&n&&t._UZ(0,"mat-spinner",30),2&n&&t.Q6J("diameter",50)}let eo=(()=>{class n{constructor(e,o,i){this.descuentoService=e,this.authService=o,this.fb=i,this.onCerrar=new t.vpe,this.onActualizacion=new t.vpe,this.enEjecucion=!1,this.editandoProveedor=!1,this.formularioEdicion=this.fb.group({porcentaje:["",[s.kI.required]]}),this.toMayus=U.K.toMayusNoReactivo}get descuento(){return this.descuentoService.descuento}actualizarDescuento(){if(!this.enEjecucion){this.enEjecucion=!0;let e=0;const o=this.authService.usuario.id_usuario,{porcentaje:i}=this.formularioEdicion.value;e="1"===i?1:2,this.descuentoService.putDescuento(this.descuento.ID,this.nombre.nativeElement.value,e,this.cantidad.nativeElement.value,o.toString()).subscribe(l=>{this.onActualizacion.emit(),!0===l.ok?(this.cerrarEditar._elementRef.nativeElement.click(),g().fire({title:"\xa1\xc9xito!",text:l.msg,icon:"success",iconColor:"white",background:"#a5dc86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0}),this.enEjecucion=!1):(g().fire({title:"Advertencia",text:l,icon:"warning",iconColor:"white",background:"#f8bb86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0}),this.enEjecucion=!1)})}}validarNumeros(e){return(0,M.Z)(function*(){("+"===e.key||"-"===e.key||"e"===e.key||"E"===e.key)&&e.preventDefault()})()}ngOnInit(){}cerrar(){setTimeout(()=>{this.onCerrar.emit(!1)},100)}ngOnDestroy(){this.cerrarEditar._elementRef.nativeElement.click()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(N),t.Y36(h.e),t.Y36(s.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-editar-descuento"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Ve,5),t.Gf(Xe,5),t.Gf(We,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.cerrarEditar=i.first),t.iGM(i=t.CRH())&&(o.nombre=i.first),t.iGM(i=t.CRH())&&(o.cantidad=i.first)}},outputs:{onCerrar:"onCerrar",onActualizacion:"onActualizacion"},decls:47,vars:6,consts:[["id","exampleModal2","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-scrollable","modal-lg"],["id","fondoModal",1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","ms-3"],["mat-icon-button","","color","warn","data-bs-dismiss","modal","aria-label","Close","type","button",3,"click"],["cerrarEditar",""],[1,"modal-body"],[1,"px-lg-3","py-lg-3","w-100","align-self-center"],[3,"formGroup","ngSubmit"],[1,"my-0","fw-bold"],["appearance","legacy",1,"example-full-width"],["matInput","","placeholder","Nombre del Descuento","autocomplete","off",3,"value","keyup"],["nombre",""],["matSuffix",""],[1,"my-0","fw-bold","mb-2"],[1,""],["formControlName","porcentaje"],["value","2","color","primary",1,"col-6",3,"checked"],["value","1","color","primary",1,"col-6",3,"checked"],[1,"mt-2"],[1,"mb-0","mt-2","fw-bold"],["matInput","","type","number","min","0","autocomplete","off",3,"value","keyup","keydown","paste"],["cantidad",""],[1,"d-flex","flex-row-reverse"],["mat-flat-button","","type","button",1,"btn-a",3,"click"],[1,"ms-2","me-1"],[1,"me-2"],["class","me-3",3,"diameter",4,"ngIf"],[1,"modal-footer"],[1,"me-3",3,"diameter"]],template:function(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),t._uU(5,"Editar descuento"),t.qZA(),t.TgZ(6,"button",5,6),t.NdJ("click",function(){return o.cerrar()}),t.TgZ(8,"mat-icon"),t._uU(9,"cancel"),t.qZA()()(),t.TgZ(10,"div",7)(11,"div",8)(12,"form",9),t.NdJ("ngSubmit",function(){return o.actualizarDescuento()}),t.TgZ(13,"p",10),t._uU(14,"Nombre"),t.qZA(),t.TgZ(15,"mat-form-field",11)(16,"mat-label"),t._uU(17,"Nombre del descuento"),t.qZA(),t.TgZ(18,"input",12,13),t.NdJ("keyup",function(){t.CHM(i);const c=t.MAs(19);return t.KtG(o.toMayus(c))}),t.qZA(),t.TgZ(20,"mat-icon",14),t._uU(21,"payments"),t.qZA()(),t.TgZ(22,"p",15),t._uU(23,"Tipo de descuento"),t.qZA(),t.TgZ(24,"div",16)(25,"mat-radio-group",17)(26,"mat-radio-button",18),t._uU(27,"Porcentaje "),t.qZA(),t.TgZ(28,"mat-radio-button",19),t._uU(29,"Fijo "),t.qZA()()(),t._UZ(30,"p",20),t.TgZ(31,"p",21),t._uU(32,"Cantidad del descuento"),t.qZA(),t.TgZ(33,"mat-form-field",11)(34,"mat-label"),t._uU(35,"Cantidad del descuento (n\xfamero entero)"),t.qZA(),t.TgZ(36,"input",22,23),t.NdJ("keyup",function(){t.CHM(i);const c=t.MAs(37);return t.KtG(o.toMayus(c))})("keydown",function(c){return o.validarNumeros(c)})("paste",function(c){return c.preventDefault()}),t.qZA()(),t.TgZ(38,"div",24)(39,"div",16)(40,"button",25),t.NdJ("click",function(){return o.actualizarDescuento()}),t.TgZ(41,"mat-icon",26),t._uU(42,"save"),t.qZA(),t.TgZ(43,"span",27),t._uU(44,"Guardar"),t.qZA()()(),t.YNc(45,to,1,1,"mat-spinner",28),t.qZA()()()(),t._UZ(46,"div",29),t.qZA()()()}2&e&&(t.xp6(12),t.Q6J("formGroup",o.formularioEdicion),t.xp6(6),t.Q6J("value",o.descuento.NOMBRE),t.xp6(8),t.Q6J("checked",2==o.descuento.ID_TIPO_DESCUENTO),t.xp6(2),t.Q6J("checked",1==o.descuento.ID_TIPO_DESCUENTO),t.xp6(8),t.Q6J("value",o.descuento.CANTIDAD),t.xp6(9),t.Q6J("ngIf",o.enEjecucion))},dependencies:[d.O5,v.lW,b.Hw,Z.Ou,x.KE,x.hX,x.R9,D.Nt,y.VQ,y.U0,s._Y,s.JJ,s.JL,s.sg,s.u],styles:[".example-full-width[_ngcontent-%COMP%]{width:100%;color:#fff}.example-mid-width[_ngcontent-%COMP%]{width:48%;color:#fff}.btn-p[_ngcontent-%COMP%]{border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;padding:inherit}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}.btn-a[_ngcontent-%COMP%]{background-color:#898989!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;transition:.3s ease all;border-radius:10px;line-height:50px;padding:inherit}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}  .cdk-overlay-container{z-index:999999!important}.modal-body[_ngcontent-%COMP%]{background-color:#2b2b2b}.modal-footer[_ngcontent-%COMP%]{background-color:#454545}#fondoModal[_ngcontent-%COMP%]{background-color:#232323!important;color:#fff}@media only screen and (max-width:991px){.eliminarPaddin[_ngcontent-%COMP%]{padding-left:0}.textResponsive[_ngcontent-%COMP%]{font-size:small!important}}.textResponsive[_ngcontent-%COMP%]{font-size:small!important}"]}),n})();const oo=["cerrarEliminar"];let no=(()=>{class n{constructor(e,o){this.descuentoService=e,this.authService=o,this.onEliminar=new t.vpe,this.enEjecucion=!1}get descuento(){return this.descuentoService.descuento}eliminarDescuento(){this.enEjecucion||(this.enEjecucion=!0,this.subscripcion=this.descuentoService.deleteDescuento(this.descuento.ID,this.authService.usuario.id_usuario).subscribe(o=>{!0===o.ok?(this.onEliminar.emit(),g().fire({title:"\xa1\xc9xito!",text:o.msg,icon:"success",iconColor:"white",background:"#a5dc86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0}),this.enEjecucion=!1):(g().fire({title:"Advertencia",text:o,icon:"warning",iconColor:"white",background:"#f8bb86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0}),this.enEjecucion=!1)}))}ngOnInit(){}ngOnDestroy(){this.subscripcion&&this.subscripcion.unsubscribe(),this.cerrarEliminar._elementRef.nativeElement.click()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(N),t.Y36(h.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-eliminar-descuento"]],viewQuery:function(e,o){if(1&e&&t.Gf(oo,5),2&e){let i;t.iGM(i=t.CRH())&&(o.cerrarEliminar=i.first)}},outputs:{onEliminar:"onEliminar"},decls:26,vars:1,consts:[["id","exampleModal3","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],["id","fondoModal",1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","ms-3"],["mat-icon-button","","color","warn","data-bs-dismiss","modal","aria-label","Close","type","button"],["cerrarEliminar",""],[1,"modal-body"],[1,"px-lg-3","py-lg-3","w-100","align-self-center"],[1,"text-center","mb-4"],["src","./../../../../../../../assets/icons/WarningRelleno.svg","width","50px","height","50px"],[1,"text-center","fw-normal"],[1,"d-flex","justify-content-center"],[1,"d-flex","flex-wrap"],["mat-flat-button","","type","button","data-bs-dismiss","modal",1,"btn-p",3,"click"],[1,"ms-2","me-1"],[1,"me-2"],[1,"modal-footer"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),t._uU(5," Confirmaci\xf3n "),t.qZA(),t.TgZ(6,"button",5,6)(8,"mat-icon"),t._uU(9,"cancel"),t.qZA()()(),t.TgZ(10,"div",7)(11,"div",8)(12,"form")(13,"div",9),t._UZ(14,"img",10),t.qZA(),t.TgZ(15,"h5",11),t._uU(16),t.qZA(),t._UZ(17,"br"),t.TgZ(18,"div",12)(19,"div",13)(20,"button",14),t.NdJ("click",function(){return o.eliminarDescuento()}),t.TgZ(21,"mat-icon",15),t._uU(22,"delete_forever"),t.qZA(),t.TgZ(23,"span",16),t._uU(24,"Eliminar"),t.qZA()()()()()()(),t._UZ(25,"div",17),t.qZA()()()),2&e&&(t.xp6(16),t.hij(" \xbfDesea eliminar el descuento ",o.descuento.NOMBRE,"? "))},dependencies:[v.lW,b.Hw,s._Y,s.JL],styles:[".btn-a[_ngcontent-%COMP%]{background-color:#898989!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;transition:.3s ease all;border-radius:10px;line-height:50px;padding:inherit}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}.btn-p[_ngcontent-%COMP%]{border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;padding:inherit}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}"]}),n})();function io(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"Generando... "),t.qZA())}function ao(n,a){if(1&n&&(t.TgZ(0,"span",24),t._UZ(1,"mat-spinner",25),t.YNc(2,io,2,0,"span",7),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("diameter",30),t.xp6(1),t.Q6J("ngIf",e.generando)}}function ro(n,a){1&n&&t._UZ(0,"img",26)}function so(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1,"Generar reporte"),t.qZA())}function co(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("mouseenter",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.creando=!0)}),t._uU(1,"Nuevo"),t.qZA()}}function lo(n,a){1&n&&(t.TgZ(0,"th"),t._uU(1,"Acci\xf3n"),t.qZA())}function uo(n,a){1&n&&(t.TgZ(0,"tr")(1,"td",28)(2,"div",24)(3,"mat-icon",29),t._uU(4,"info_outline"),t.qZA(),t.TgZ(5,"strong",30),t._uU(6,"No se encontraron registros"),t.qZA()()()())}function mo(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.seleccionar(i.ID))})("mouseenter",function(){t.CHM(e);const i=t.oxw(3);return t.KtG(i.editando=!0)}),t.TgZ(1,"mat-icon",42),t._uU(2,"edit"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Editar"),t.qZA()()}}function po(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.seleccionar(i.ID))}),t.TgZ(1,"mat-icon",29),t._uU(2,"delete_forever"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Eliminar"),t.qZA()()}}function go(n,a){if(1&n&&(t.TgZ(0,"td",36)(1,"button",37)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"mat-menu",null,38),t.ynx(6),t.YNc(7,mo,5,0,"button",39),t.BQk(),t.ynx(8),t.YNc(9,po,5,0,"button",40),t.BQk(),t.qZA()()),2&n){const e=t.MAs(5),o=t.oxw(2);t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(6),t.Q6J("ngIf",o.permisos.PERMISO_ACTUALIZACION),t.xp6(2),t.Q6J("ngIf",o.permisos.PERMISO_ELIMINACION)}}function _o(n,a){if(1&n&&(t.TgZ(0,"tr")(1,"td",31),t._uU(2),t.qZA(),t.TgZ(3,"td",32),t._uU(4),t.qZA(),t.TgZ(5,"td",33),t._uU(6),t.qZA(),t.TgZ(7,"td",34),t._uU(8),t.ALo(9,"currency"),t.qZA(),t.YNc(10,go,10,3,"td",35),t.qZA()),2&n){const e=a.$implicit,o=t.oxw();t.xp6(2),t.Oqu(e.NOMBRE),t.xp6(2),t.Oqu(e.ES_PORCENTAJE?"SI":"NO"),t.xp6(2),t.Oqu(e.ES_PORCENTAJE?"NO":"SI"),t.xp6(2),t.Oqu(e.ES_PORCENTAJE?e.CANTIDAD+" %":t.xi3(9,5,e.CANTIDAD,"Lps. ")),t.xp6(2),t.Q6J("ngIf",o.permisos.PERMISO_ACTUALIZACION||o.permisos.PERMISO_ELIMINACION)}}function fo(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-nuevo-descuento",44),t.NdJ("onCerrar",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.creando=i)})("onCrear",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.recargar())}),t.qZA()}}function ho(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"app-editar-descuento",45),t.NdJ("onCerrar",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.editando=i)})("onActualizacion",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.recargar())}),t.qZA()}}const bo=function(n){return[5,10,25,50,n]};let Co=(()=>{class n{constructor(e,o,i,r,c,l){this.descuentoSerice=e,this.pantalla=o,this.fb=i,this.usuario=r,this.ingresosService=c,this.router=l,this.id_seleccion=0,this.registros=[],this.tamano=0,this.limite=0,this.indice=-1,this.desde="0",this.generando=!1,this.buscando=!1,this.creando=!1,this.editando=!1,this.formularioBusqueda=this.fb.group({buscar:["",[s.kI.required,s.kI.maxLength(100)]]})}cargarRegistros(){this.subscripcion=this.descuentoSerice.getDescuentos(this.usuario.usuario.id_usuario).subscribe(o=>{this.registros=this.descuentoSerice.descuentos,this.tamano=o.countDescuentos,this.limite=o.limite})}cambioDePagina(e){this.paginadorPorReferencia=e,this.subscripcion.unsubscribe();const o=this.usuario.usuario.id_usuario;let{buscar:i}=this.formularioBusqueda.value;this.buscando||(i="");let r=(e.pageIndex*e.pageSize).toString();this.desde=r,this.subscripcion=this.descuentoSerice.getDescuentos(o,i,e.pageSize.toString(),r).subscribe(c=>{this.registros=c.descuentos,this.tamano=c.countDescuentos,this.limite=c.limite})}buscarRegistro(){this.paginadorPorReferencia&&(this.indice=-1),this.subscripcion.unsubscribe();const e=this.usuario.usuario.id_usuario,{buscar:o}=this.formularioBusqueda.value;this.buscando=""!==o,this.desde="0",this.subscripcion=this.descuentoSerice.getDescuentos(e,o).subscribe(i=>{this.indice=0,this.registros=i.descuentos,this.tamano=i.countDescuentos,this.limite=i.limite})}seleccionar(e){this.descuentoSerice.getDescuento(e).subscribe()}recargar(){const e=this.usuario.usuario.id_usuario;let{buscar:o}=this.formularioBusqueda.value;this.subscripcion=this.descuentoSerice.getDescuentos(e,o,this.limite.toString(),this.desde).subscribe(i=>{this.registros=i.descuentos,this.tamano=i.countDescuentos,this.limite=i.limite})}generarReporte(){if(!this.generando){this.generando=!0;let{buscar:e}=this.formularioBusqueda.value;this.descuentoSerice.getReporte(e).subscribe(o=>{let i=new Blob([o],{type:"application/pdf"}),r=window.URL.createObjectURL(i);document.createElement("a").href=r,window.open(r,"_blank"),this.generando=!1})}}registrarIngreso(){this.ingreso=this.ingresosService.eventoIngreso(this.usuario.usuario.id_usuario,29).subscribe()}get permisos(){return this.pantalla.permisos}ngOnInit(){this.registrarIngreso(),this.cargarRegistros()}ngOnDestroy(){this.subscripcion&&this.subscripcion.unsubscribe(),this.ingreso&&this.ingreso.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(N),t.Y36(A.i),t.Y36(s.qu),t.Y36(h.e),t.Y36(k.K),t.Y36(f.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-descuento"]],decls:39,vars:17,consts:[[1,""],["id","contenedor",1,"container-md","rounded-4","pb-2"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","pb-0","pt-3"],[1,"d-flex","flex-wrap"],["mat-flat-button","","type","button",1,"me-3","btn-p","mb-2",3,"ngClass","click"],["class","d-flex  align-items-center justify-content-center",4,"ngIf"],["src","/assets/icons/pdf.png ","width","30px","height","30px","class","me-3",4,"ngIf"],[4,"ngIf"],["mat-flat-button","","class","me-3 btn-a mb-2","type","button","data-bs-toggle","modal","data-bs-target","#exampleModal","data-bs-whatever","@getbootstrap",3,"mouseenter",4,"ngIf"],[1,"d-flex","align-items-center","flex-wrap",2,"height","100%"],[1,"mb-2",3,"formGroup","ngSubmit"],[1,"me-3"],["type","text","formControlName","buscar",1,"input","rounded-3"],[1,"text-white-50","m-2"],["id","no-more-tables",1,"table-responsive","tabla"],[1,"table","table-dark","table-striped"],[1,"bg-dark","text-light","align-middle"],[1,"align-middle"],[4,"ngFor","ngForOf"],["id","paginador","aria-label","Select page",3,"length","pageSize","pageSizeOptions","pageIndex","page"],[1,"mt-4"],[3,"onCerrar","onCrear",4,"ngIf"],[3,"onCerrar","onActualizacion",4,"ngIf"],[3,"onEliminar"],[1,"d-flex","align-items-center","justify-content-center"],[1,"me-3","uploader-status",3,"diameter"],["src","/assets/icons/pdf.png ","width","30px","height","30px",1,"me-3"],["mat-flat-button","","type","button","data-bs-toggle","modal","data-bs-target","#exampleModal","data-bs-whatever","@getbootstrap",1,"me-3","btn-a","mb-2",3,"mouseenter"],["colspan","14",1,"align-middle"],["id","iconBlock"],[1,"fw-normal","text-light","ms-2"],["data-title","Nombre"],["data-title","Porcentaje"],["data-title","Fijo"],["data-title","Cantidad"],["data-title","Acci\xf3n",4,"ngIf"],["data-title","Acci\xf3n"],["mat-icon-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","","data-bs-toggle","modal","data-bs-target","#exampleModal2","data-bs-whatever","@getbootstrap",3,"click","mouseenter",4,"ngIf"],["mat-menu-item","","data-bs-toggle","modal","data-bs-target","#exampleModal3","data-bs-whatever","@getbootstrap",3,"click",4,"ngIf"],["mat-menu-item","","data-bs-toggle","modal","data-bs-target","#exampleModal2","data-bs-whatever","@getbootstrap",3,"click","mouseenter"],["id","iconEditar"],["mat-menu-item","","data-bs-toggle","modal","data-bs-target","#exampleModal3","data-bs-whatever","@getbootstrap",3,"click"],[3,"onCerrar","onCrear"],[3,"onCerrar","onActualizacion"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2,"Gesti\xf3n de Descuentos"),t.qZA(),t.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"button",4),t.NdJ("click",function(){return o.generarReporte()}),t.YNc(7,ao,3,2,"span",5),t.YNc(8,ro,1,0,"img",6),t.YNc(9,so,2,0,"span",7),t.qZA(),t.YNc(10,co,2,0,"button",8),t.qZA(),t.TgZ(11,"div",9)(12,"form",10),t.NdJ("ngSubmit",function(){return o.buscarRegistro()}),t.TgZ(13,"label",11),t._uU(14,"Buscar:"),t.qZA(),t._UZ(15,"input",12),t.qZA()()(),t._UZ(16,"hr",13),t.TgZ(17,"div",14)(18,"table",15)(19,"thead",16)(20,"tr")(21,"th"),t._uU(22,"Nombre"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Porcentaje"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Fijo"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Cantidad"),t.qZA(),t.YNc(29,lo,2,0,"th",7),t.qZA()(),t.TgZ(30,"tbody",17),t.YNc(31,uo,7,0,"tr",7),t.YNc(32,_o,11,8,"tr",18),t.qZA()()(),t.TgZ(33,"mat-paginator",19),t.NdJ("page",function(r){return o.cambioDePagina(r)}),t.qZA()(),t.TgZ(34,"div",20),t._UZ(35,"br"),t.qZA(),t.YNc(36,fo,1,0,"app-nuevo-descuento",21),t.YNc(37,ho,1,0,"app-editar-descuento",22),t.TgZ(38,"app-eliminar-descuento",23),t.NdJ("onEliminar",function(){return o.recargar()}),t.qZA()()),2&e&&(t.xp6(6),t.Q6J("ngClass",o.generando?"d-flex align-items-center":""),t.xp6(1),t.Q6J("ngIf",o.generando),t.xp6(1),t.Q6J("ngIf",!o.generando),t.xp6(1),t.Q6J("ngIf",!o.generando),t.xp6(1),t.Q6J("ngIf",o.permisos.PERMISO_INSERCION),t.xp6(2),t.Q6J("formGroup",o.formularioBusqueda),t.xp6(17),t.Q6J("ngIf",o.permisos.PERMISO_ACTUALIZACION||o.permisos.PERMISO_ELIMINACION),t.xp6(2),t.Q6J("ngIf",o.registros.length<1),t.xp6(1),t.Q6J("ngForOf",o.registros),t.xp6(1),t.Q6J("length",o.tamano)("pageSize",o.limite)("pageSizeOptions",t.VKq(15,bo,o.tamano))("pageIndex",o.indice),t.xp6(3),t.Q6J("ngIf",o.creando),t.xp6(1),t.Q6J("ngIf",o.editando))},dependencies:[d.mk,d.sg,d.O5,v.lW,b.Hw,T.VK,T.OP,T.p6,Z.Ou,R.NW,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,$e,eo,no,d.H9],styles:[".background[_ngcontent-%COMP%]{background-color:#e0e0e0}#contenedor[_ngcontent-%COMP%]{background-color:#212529}#iconEditar[_ngcontent-%COMP%]{color:#898989}#iconBlock[_ngcontent-%COMP%]{color:#f65757}#iconMas[_ngcontent-%COMP%]{color:#5988ec}label[_ngcontent-%COMP%]{color:#fff}thead[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{text-align:center}.btn-p[_ngcontent-%COMP%]{border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}.btn-a[_ngcontent-%COMP%]{background-color:#898989!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;border-radius:10px;line-height:50px}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}h3[_ngcontent-%COMP%]{text-align:center;padding:15px;font-weight:400;font-family:Lobster Two,cursive;font-size:45px;margin-bottom:0%}.modal-body[_ngcontent-%COMP%]{background-color:#2b2b2b}.modal-footer[_ngcontent-%COMP%]{background-color:#454545}#fondoModal[_ngcontent-%COMP%]{background-color:#232323!important;color:#fff}#paginador[_ngcontent-%COMP%]{font-weight:700;margin-top:2px;background-color:#212529}@media only screen and (max-width:800px){#no-more-tables[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], #no-more-tables[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], #no-more-tables[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block}#no-more-tables[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{position:absolute;top:-9999px;left:-9999px}#no-more-tables[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{position:relative;padding-left:50%;border:none}#no-more-tables[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-title);position:absolute;left:6px;font-weight:700}#no-more-tables[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}}[_nghost-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#fff}"]}),n})(),vo=(()=>{class n{constructor(e,o){this.pantallaService=e,this.router=o}canActivate(e,o){return this.pantallaService.validarPermiso(29).pipe((0,C.b)(i=>{!0!==i&&this.router.navigateByUrl("/main/dashboard")}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(A.i),t.LFG(f.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),it=(()=>{class n{constructor(e){this.http=e,this.baseURL=I.N.baseURL}validarPedido(e){return this.http.get(`${this.baseURL}/facturacion/pedido/${e}`).pipe((0,m.K)(()=>(0,p.of)(!1)))}getInformacion(e){return this.http.get(`${this.baseURL}/facturacion/?id_pedido=${e}`).pipe((0,m.K)(i=>(0,p.of)(i.error)))}getTipoPago(){return this.http.get(`${this.baseURL}/tipo-pago/`).pipe((0,m.K)(o=>(0,p.of)(o.error)))}postFactura(e,o="",i,r,c,l,_,E,G,Q,j,F,Y,z,H,L,K,hn,bn){return this.http.post(`${this.baseURL}/facturacion/facturar/${e}`,{cliente:o,RTN:i,direccion:r,id_descuento:c,descuento:l,venta_exenta:_,venta_gravada:E,isv:G,impBebida:Q,total:j,id_pago:F,recibido:Y,cambio:z,conCAI:bn,ordenCompra:H,numReg:L,consReg:K,subTotal:hn}).pipe((0,m.K)(xn=>(0,p.of)(xn.error)))}postImprimirFactura(e){return this.http.post(`${this.baseURL}/facturacion/facturar/factura/${e}`,{},{responseType:"blob"}).pipe((0,m.K)(r=>(0,p.of)(r.error)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(w.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var S=u(7084),at=u(1094);const xo=["cambio"],To=["dineroRecibido"],Ao=["checkCai"];function Zo(n,a){1&n&&(t.TgZ(0,"div",64)(1,"div",65)(2,"section",66)(3,"mat-checkbox",67,68),t._uU(5,"Facturar con CAI"),t.qZA()()()())}function Oo(n,a){if(1&n&&(t.TgZ(0,"div")(1,"div",69)(2,"label",28),t._uU(3,"CAI"),t.qZA(),t.TgZ(4,"mat-form-field",29),t._UZ(5,"input",30,70),t.qZA()(),t.TgZ(7,"div",54)(8,"div",71)(9,"label",72),t._uU(10,"No."),t.qZA(),t.TgZ(11,"mat-form-field",73),t._UZ(12,"input",30,74),t.qZA()(),t.TgZ(14,"div",75)(15,"label",72),t._uU(16,"Fecha "),t.qZA(),t.TgZ(17,"mat-form-field",73),t._UZ(18,"input",30),t.ALo(19,"date"),t.qZA()()()()),2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("value",e.cai[0].CAI),t.xp6(7),t.Q6J("value",e.cai[0].NUMERO_ACTUAL),t.xp6(6),t.Q6J("value",t.xi3(19,3,e.fechaActual,"shortDate"))}}function Po(n,a){if(1&n&&(t.TgZ(0,"button",79)(1,"mat-icon",80),t._uU(2,"discount"),t.qZA()()),2&n){const e=t.oxw().$implicit,o=t.MAs(7);t.Q6J("matMenuTriggerFor",o)("disabled",e.canjeado)}}function Mo(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.YNc(5,Po,3,2,"button",76),t.TgZ(6,"mat-menu",null,77)(8,"button",78),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.canjearCertificado(r))}),t._uU(9," Canjear certificado de consumo "),t.qZA()()(),t.TgZ(10,"td"),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.ALo(15,"currency"),t.ALo(16,"currency"),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.ALo(19,"currency"),t.ALo(20,"currency"),t.qZA()()}if(2&n){const e=a.$implicit,o=t.oxw(2);t.xp6(2),t.Oqu(e.CANTIDAD),t.xp6(2),t.hij(" ",e.NOMBRE_PRODUCTO," "),t.xp6(1),t.Q6J("ngIf",!e.canjeado),t.xp6(3),t.Q6J("disabled",e.canjeado),t.xp6(3),t.Oqu(t.xi3(12,7,e.PRECIO_DETALLE,"Lps. ")),t.xp6(3),t.Oqu(e.EXENTA?t.xi3(15,10,o.toFixedHTML(o.toFloat(e.PRECIO_DETALLE)*e.CANTIDAD),"Lps. "):t.xi3(16,13,0,"Lps. ")),t.xp6(4),t.Oqu(e.EXENTA?t.xi3(20,19,0,"Lps. "):t.xi3(19,16,o.toFixedHTML(o.toFloat(e.PRECIO_DETALLE)*e.CANTIDAD),"Lps. "))}}function Eo(n,a){if(1&n&&(t.TgZ(0,"div",81)(1,"label",82),t._uU(2,"Rango Autorizado"),t.qZA(),t.TgZ(3,"mat-form-field",29),t._UZ(4,"input",30),t.qZA(),t.TgZ(5,"label",83),t._uU(6,"al"),t.qZA(),t.TgZ(7,"mat-form-field",29),t._UZ(8,"input",30),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("value",e.cai[0].RANGO_MINIMO),t.xp6(4),t.Q6J("value",e.cai[0].RANGO_MAXIMO)}}function Io(n,a){1&n&&(t.TgZ(0,"div",84)(1,"label",82),t._uU(2,"No tiene un CAI disponible"),t.qZA()())}function wo(n,a){if(1&n&&(t.TgZ(0,"div",85)(1,"label",86),t._uU(2,"Fecha Limite"),t.qZA(),t.TgZ(3,"mat-form-field",29),t._UZ(4,"input",30),t.ALo(5,"date"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("value",t.xi3(5,1,e.cai[0].FECHA_LIMITE_EMISION,"shortDate"))}}function ko(n,a){if(1&n&&(t.TgZ(0,"mat-option",87),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.lnq(" ",e.CANTIDAD,"",2==e.ID_TIPO_DESCUENTO?"%":" LPS","-",e.NOMBRE," ")}}function Uo(n,a){if(1&n&&(t.TgZ(0,"mat-option",87),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.FORMA_PAGO," ")}}function Do(n,a){1&n&&t._UZ(0,"mat-spinner",88),2&n&&t.Q6J("diameter",50)}function yo(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"h3"),t._uU(3,"Facturaci\xf3n del pedido"),t.qZA(),t.TgZ(4,"div",5)(5,"div",6)(6,"div",7)(7,"p",8),t._uU(8,"Detalle de Facturaci\xf3n"),t.qZA(),t.TgZ(9,"div",9),t.YNc(10,Zo,6,0,"div",10),t.YNc(11,Oo,20,6,"div",11),t.qZA(),t.TgZ(12,"div",12)(13,"table",13)(14,"thead",14)(15,"tr",4)(16,"th",15),t._uU(17,"CANTIDAD"),t.qZA(),t.TgZ(18,"th",15),t._uU(19,"DESCRIPCI\xd3N"),t.qZA(),t.TgZ(20,"th",15),t._uU(21,"P. UNIT"),t.qZA(),t.TgZ(22,"th",15),t._uU(23,"EXENTA"),t.qZA(),t.TgZ(24,"th",15),t._uU(25,"GRAVADA"),t.qZA()()(),t.TgZ(26,"tbody",16),t.YNc(27,Mo,21,22,"tr",17),t.qZA(),t.TgZ(28,"tfoot")(29,"tr")(30,"td",18)(31,"form",4)(32,"div",4),t.YNc(33,Eo,9,2,"div",19),t.TgZ(34,"div"),t.YNc(35,Io,3,0,"div",20),t.qZA()(),t.TgZ(36,"div",4),t.YNc(37,wo,6,4,"div",21),t.qZA()()(),t.TgZ(38,"td",22),t._uU(39,"Descuento y Rebajas Otorgadas"),t.qZA(),t.TgZ(40,"td",23),t._uU(41),t.ALo(42,"currency"),t.qZA()(),t.TgZ(43,"tr")(44,"td",22),t._uU(45,"Venta Exenta L."),t.qZA(),t.TgZ(46,"td",23),t._uU(47),t.ALo(48,"currency"),t.qZA()(),t.TgZ(49,"tr")(50,"td",22),t._uU(51,"Venta Gravada L."),t.qZA(),t.TgZ(52,"td",23),t._uU(53),t.ALo(54,"currency"),t.qZA()(),t.TgZ(55,"tr")(56,"td",22),t._uU(57,"Exonerado L."),t.qZA(),t.TgZ(58,"td",23),t._uU(59),t.ALo(60,"currency"),t.qZA()(),t.TgZ(61,"tr")(62,"td",22),t._uU(63,"Subtotal L."),t.qZA(),t.TgZ(64,"td",23),t._uU(65),t.ALo(66,"currency"),t.qZA()(),t.TgZ(67,"tr")(68,"td",22),t._uU(69,"15% I.S.V. L."),t.qZA(),t.TgZ(70,"td",23),t._uU(71),t.ALo(72,"currency"),t.qZA()(),t.TgZ(73,"tr")(74,"td",22),t._uU(75,"18% I.S.V. L."),t.qZA(),t.TgZ(76,"td",23),t._uU(77),t.ALo(78,"currency"),t.qZA()(),t.TgZ(79,"tr")(80,"td",22),t._uU(81,"Total L."),t.qZA(),t.TgZ(82,"td",24),t._uU(83),t.ALo(84,"currency"),t.qZA()()()()()()(),t.TgZ(85,"div",25)(86,"div",26)(87,"p",8),t._uU(88,"Datos de Facturaci\xf3n"),t.qZA(),t.TgZ(89,"div",27)(90,"label",28),t._uU(91,"Empleado "),t.qZA(),t.TgZ(92,"mat-form-field",29),t._UZ(93,"input",30),t.qZA()(),t.TgZ(94,"mat-accordion")(95,"form",31)(96,"mat-expansion-panel",32),t.NdJ("opened",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.panelOpenState=!0)})("closed",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.panelOpenState=!1)}),t.TgZ(97,"mat-expansion-panel-header",33),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.clienteAbiertoClick())}),t.TgZ(98,"mat-panel-title"),t._uU(99," Ingresar datos del cliente "),t.qZA(),t.TgZ(100,"mat-panel-description"),t._uU(101),t.qZA()(),t.TgZ(102,"div",27)(103,"p",34),t._uU(104,"Cliente"),t.qZA(),t.TgZ(105,"mat-form-field",29),t._UZ(106,"input",35),t.qZA()(),t.TgZ(107,"div",27)(108,"p",34),t._uU(109,"RTN"),t.qZA(),t.TgZ(110,"mat-form-field",29),t._UZ(111,"input",36),t.qZA()(),t.TgZ(112,"div",27)(113,"p",34),t._uU(114,"Direcci\xf3n"),t.qZA(),t.TgZ(115,"mat-form-field",29),t._UZ(116,"input",37),t.qZA()(),t.TgZ(117,"div",38)(118,"p",39),t._uU(119,"Datos del Adquiriente Exonerado"),t.qZA()(),t.TgZ(120,"div",27)(121,"p",34),t._uU(122,"Orden de compra exenta #"),t.qZA(),t.TgZ(123,"mat-form-field",29),t._UZ(124,"input",40),t.qZA()(),t.TgZ(125,"div",27)(126,"p",34),t._uU(127,"Const. Reg. de Exonerados #"),t.qZA(),t.TgZ(128,"mat-form-field",29),t._UZ(129,"input",41),t.qZA()(),t.TgZ(130,"div",27)(131,"p",34),t._uU(132,"No. Reg. S. A. G."),t.qZA(),t.TgZ(133,"mat-form-field",29),t._UZ(134,"input",42),t.qZA()()()()(),t.TgZ(135,"mat-accordion")(136,"mat-expansion-panel",43),t.NdJ("opened",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.panelOpenState=!0)})("closed",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.panelOpenState=!1)}),t.TgZ(137,"mat-expansion-panel-header")(138,"mat-panel-title"),t._uU(139," Canjear descuento "),t.qZA(),t.TgZ(140,"mat-panel-description"),t._uU(141),t.qZA()(),t.TgZ(142,"form",31)(143,"div",27)(144,"label",44),t._uU(145,"Tipo de descuento"),t.qZA(),t.TgZ(146,"mat-form-field",29)(147,"mat-label"),t._uU(148,"Seleccione un descuento para canjear"),t.qZA(),t.TgZ(149,"mat-select",45),t.YNc(150,ko,2,4,"mat-option",46),t.qZA()(),t.TgZ(151,"div",47)(152,"button",48),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.canjearDescuento())}),t._uU(153,"Canjear"),t.qZA(),t.TgZ(154,"div",49),t._UZ(155,"div",50),t.qZA()(),t.TgZ(156,"div",27)(157,"p",34),t._uU(158,"Ingresar descuento"),t.qZA(),t.TgZ(159,"mat-form-field",29)(160,"input",51),t.NdJ("keydown",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.validarNumeros(i))})("paste",function(i){return i.preventDefault()}),t.qZA()()(),t.TgZ(161,"div",47)(162,"button",48),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.ingresarDescuento())}),t._uU(163,"Canjear"),t.qZA(),t.TgZ(164,"div",49),t._UZ(165,"div",50),t.qZA()()()()()(),t.TgZ(166,"form",31)(167,"label",52),t._uU(168,"Tipo de pago"),t.qZA(),t.TgZ(169,"mat-form-field",29)(170,"mat-label"),t._uU(171,"Seleccione el tipo de pago"),t.qZA(),t.TgZ(172,"mat-select",53),t.ynx(173),t.YNc(174,Uo,2,2,"mat-option",46),t.BQk(),t.qZA()(),t.TgZ(175,"div",54)(176,"div",55)(177,"label",28),t._uU(178,"Recibido"),t.qZA(),t.TgZ(179,"mat-form-field",29)(180,"mat-label"),t._uU(181,"Ingrese el dinero recibido"),t.qZA(),t.TgZ(182,"input",56),t.NdJ("keyup",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.calcularCambio())})("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.calcularCambio())})("keydown",function(i){t.CHM(e);const r=t.oxw();return t.KtG(r.validarNumeros(i))})("paste",function(i){return i.preventDefault()}),t.qZA()()(),t.TgZ(183,"div",55)(184,"label",28),t._uU(185,"Cambio"),t.qZA(),t.TgZ(186,"mat-form-field",29),t._UZ(187,"input",57,58),t.qZA()()(),t.TgZ(189,"div",59)(190,"div",60)(191,"button",61),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.postFactura())}),t._uU(192,"Facturar"),t.qZA(),t.YNc(193,Do,1,1,"mat-spinner",62),t.qZA(),t.TgZ(194,"div",4)(195,"button",63),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.volver())}),t._uU(196,"Salir"),t.qZA()()()()()()()()()}if(2&n){const e=t.oxw();t.xp6(10),t.Q6J("ngIf",e.cai.length>0),t.xp6(1),t.Q6J("ngIf",e.cai.length>0),t.xp6(16),t.Q6J("ngForOf",e.detalle),t.xp6(6),t.Q6J("ngIf",e.cai.length>0),t.xp6(2),t.Q6J("ngIf",e.cai.length<1),t.xp6(2),t.Q6J("ngIf",e.cai.length>0),t.xp6(4),t.Oqu(t.xi3(42,31,e.descuento,"Lps. ")),t.xp6(6),t.Oqu(t.xi3(48,34,e.exento,"Lps. ")),t.xp6(6),t.Oqu(t.xi3(54,37,e.pedido.SUBTOTAL-e.exento,"Lps. ")),t.xp6(6),t.Oqu(t.xi3(60,40,e.exonerado,"Lps. ")),t.xp6(6),t.Oqu(t.xi3(66,43,e.pedido.SUBTOTAL,"Lps. ")),t.xp6(6),t.Oqu(t.xi3(72,46,e.impuesto15,"Lps. ")),t.xp6(6),t.Oqu(t.xi3(78,49,e.impuesto18,"Lps. ")),t.xp6(6),t.Oqu(t.xi3(84,52,e.toFloat(e.toFixedHTML(e.toFloat(e.pedido.SUBTOTAL)+e.toFloat(e.toFixedHTML(e.impuesto18))+e.toFloat(e.toFixedHTML(e.impuesto15))-e.toFloat(e.toFixedHTML(e.descuento)))),"Lps. ")),t.xp6(10),t.Q6J("value",e.usuario),t.xp6(2),t.Q6J("formGroup",e.formularioCliente),t.xp6(6),t.hij(" ",""," "),t.xp6(10),t.Q6J("dropSpecialCharacters",!1),t.xp6(30),t.hij(" ",""," "),t.xp6(1),t.Q6J("formGroup",e.formularioDescuento),t.xp6(7),t.Q6J("disabled",e.certificadoCanjeado),t.xp6(1),t.Q6J("ngForOf",e.listaDescuento),t.xp6(2),t.Q6J("disabled",e.formularioDescuento.controls.tipoDescuento.invalid||e.certificadoCanjeado),t.xp6(8),t.Q6J("disabled",e.certificadoCanjeado),t.xp6(2),t.Q6J("disabled",e.formularioDescuento.controls.descuento.invalid||e.certificadoCanjeado),t.xp6(4),t.Q6J("formGroup",e.formularioCambio),t.xp6(8),t.Q6J("ngForOf",e.listaMetodoPago),t.xp6(13),t.Q6J("value",0),t.xp6(4),t.Q6J("disabled",e.formularioCambio.invalid||e.clienteAbierto&&e.formularioCliente.invalid||e.cambioAux<0||e.generando),t.xp6(2),t.Q6J("ngIf",e.enEjecucion),t.xp6(2),t.Q6J("disabled",e.enEjecucion)}}function qo(n,a){1&n&&(t.TgZ(0,"div",89)(1,"div",90)(2,"div",91)(3,"div",92),t._UZ(4,"img",93),t.TgZ(5,"h3",94),t._uU(6,"Generando..."),t.qZA()()()()())}let No=(()=>{class n{constructor(e,o,i,r,c,l){this.router=e,this.descuentoService=o,this.activatedRouter=i,this.facturaService=r,this.authService=c,this.fb=l,this.panelOpenState=!1,this.generando=!1,this.pedido={ID:0,ID_USUARIO:0,USUARIO:"",NOMBRE_USUARIO:"",ID_ESTADO:0,ID_MESA:0,NOMBRE:"",TIPO:"",ID_CAJA:0,SUBTOTAL:0,NOMBRE_CLIENTE:"",HORA_SOLICITUD:new Date,HORA_FINALIZACION:new Date,MODIFICADO_POR:"",FECHA_MODIFICACION:new Date},this.detalle=[],this.cai=[],this.listaDescuento=[],this.listaMetodoPago=[],this.fechaActual=new Date,this.descuento=0,this.descuentoCertificado=0,this.exento=0,this.exonerado=0,this.cambio=0,this.gravado=0,this.cambioAux=0,this.descuentoElegido=!1,this.descuentoIngresado=!1,this.certificadoCanjeado=!1,this.clienteAbierto=!1,this.enEjecucion=!1,this.impuesto15=0,this.impuesto18=0,this.formularioDescuento=this.fb.group({tipoDescuento:["",[s.kI.required,s.kI.maxLength(100)]],descuento:["",[s.kI.required,s.kI.maxLength(100)]]}),this.formularioCambio=this.fb.group({recibido:[0,[s.kI.required,s.kI.maxLength(100)]],tipoPago:["",[s.kI.required,s.kI.maxLength(100)]]}),this.formularioCliente=this.fb.group({nombre:["",[s.kI.required,s.kI.maxLength(150),s.kI.pattern(/^[a-z\s\u00E0-\u00FC\u00f1]*$/i)]],RTN:["",[s.kI.required,s.kI.maxLength(16),s.kI.minLength(16)]],direccion:["",[s.kI.required,s.kI.maxLength(200)]],ordenCompra:["",[s.kI.maxLength(20)]],consReg:["",[s.kI.maxLength(20)]],noReg:["",[s.kI.maxLength(20)]]})}get usuario(){return this.authService.usuario.nombre}clienteAbiertoClick(){var e=this;return(0,M.Z)(function*(){e.clienteAbierto&&(e.formularioCliente.get("nombre")?.setValue(""),e.formularioCliente.get("RTN")?.setValue(""),e.formularioCliente.get("Direccion")?.setValue(""),e.formularioCliente.get("ordenCompra")?.setValue(""),e.formularioCliente.get("consReg")?.setValue(""),e.formularioCliente.get("noReg")?.setValue(""),e.formularioCliente.updateValueAndValidity()),e.clienteAbierto=!e.clienteAbierto})()}validarNumeros(e){return(0,M.Z)(function*(){("+"===e.key||"-"===e.key||"e"===e.key||"E"===e.key)&&e.preventDefault()})()}ngOnInit(){this.cargarInformacion(),this.cargarDescuentos(),this.cargarTipoPago()}toFloat(e){return parseFloat(e)}toFixedHTML(e){return e.toFixed(2)}cargarTipoPago(){this.facturaService.getTipoPago().subscribe(o=>{this.listaMetodoPago=o.tipoPago})}cargarInformacion(){let e=0;this.activatedRouter.params.subscribe(o=>{e=o.id_pedido,this.facturaService.getInformacion(e).subscribe(i=>{this.pedido=i.pedido,this.cai=i.cai,this.detalle=i.detalle,this.getTotalImpuesto(),this.calcularCambio()})})}canjearCertificado(e){(this.descuentoElegido||this.descuentoIngresado)&&(this.descuento=0),this.certificadoCanjeado=!0,this.descuentoElegido=!1,this.descuentoIngresado=!1,this.impuesto15=0,this.impuesto18=0,this.descuento+=this.toFloat(this.toFloat(e.PRECIO_DETALLE).toFixed(2))*e.CANTIDAD,e.PRECIO_DETALLE="0.00",e.PORCENTAJE_IMPUESTO=0,e.TOTAL_IMPUESTO="0.00",e.canjeado=!0,this.getTotalImpuesto(),this.calcularCambio()}cargarDescuentos(){this.descuentoService.getDescuentos(this.authService.usuario.id_usuario,"","99999").subscribe(o=>{this.listaDescuento=o.descuentos})}ingresarDescuento(){this.descuentoIngresado=!0,this.descuentoElegido&&(this.descuentoElegido=!1);let{descuento:e}=this.formularioDescuento.value;this.descuento=0,this.impuesto15=0,this.impuesto18=0,this.detalle.forEach(o=>{e>this.toFloat(o.PRECIO_DETALLE)*o.CANTIDAD&&0!=e?(this.descuento+=this.toFloat(this.toFloat(o.PRECIO_DETALLE).toFixed(2))*o.CANTIDAD,1==o.ID_IMPUESTO?this.impuesto15+=0:this.impuesto18+=0,e-=this.descuento):(this.descuento+=e,o.EXENTA||(1==o.ID_IMPUESTO?this.impuesto15+=this.toFloat(this.toFixedHTML((this.toFloat(o.PRECIO_DETALLE)*o.CANTIDAD-e)*this.toFloat(o.PORCENTAJE_IMPUESTO/100))):this.impuesto18+=this.toFloat(this.toFixedHTML((this.toFloat(o.PRECIO_DETALLE)*o.CANTIDAD-e)*this.toFloat(o.PORCENTAJE_IMPUESTO/100)))),e-=e)}),this.calcularCambio()}canjearDescuento(){this.descuentoElegido=!0,this.descuentoIngresado&&(this.descuentoIngresado=!1);const{tipoDescuento:e}=this.formularioDescuento.value;let o=0;o=1===e.ID_TIPO_DESCUENTO?e.CANTIDAD:this.toFloat((this.toFloat(this.pedido.SUBTOTAL)*e.CANTIDAD/100).toFixed(2)),this.descuento=0,this.impuesto15=0,this.impuesto18=0,this.detalle.forEach(i=>{o>this.toFloat(i.PRECIO_DETALLE)*i.CANTIDAD&&0!=o?(this.descuento+=this.toFloat(this.toFloat(i.PRECIO_DETALLE).toFixed(2))*i.CANTIDAD,1==i.ID_IMPUESTO?this.impuesto15+=0:this.impuesto18+=0,o-=this.descuento):(this.descuento+=o,i.EXENTA||(1==i.ID_IMPUESTO?this.impuesto15+=this.toFloat(this.toFixedHTML((this.toFloat(i.PRECIO_DETALLE)*i.CANTIDAD-o)*this.toFloat(i.PORCENTAJE_IMPUESTO/100))):this.impuesto18+=this.toFloat(this.toFixedHTML((this.toFloat(i.PRECIO_DETALLE)*i.CANTIDAD-o)*this.toFloat(i.PORCENTAJE_IMPUESTO/100)))),o-=o)}),this.calcularCambio()}calcularCambio(){const{recibido:e}=this.formularioCambio.value;this.inputCambio.nativeElement.value=(this.toFloat(e)-(this.toFloat(this.pedido.SUBTOTAL)-this.toFloat(this.descuento)+this.toFloat(this.impuesto15)+this.toFloat(this.impuesto18))).toFixed(2),this.cambioAux=this.toFloat((this.toFloat(e)-(this.toFloat(this.pedido.SUBTOTAL)-this.toFloat(this.descuento)+this.toFloat(this.impuesto15)+this.toFloat(this.impuesto18))).toFixed(2))}getTotalImpuesto(){this.impuesto15=0,this.impuesto18=0,this.exento=0,this.gravado=0,this.detalle.forEach(e=>{e.EXENTA?this.exento+=this.toFloat(e.PRECIO_DETALLE)*e.CANTIDAD:(1==e.ID_IMPUESTO?this.impuesto15+=parseFloat(e.TOTAL_IMPUESTO)*e.CANTIDAD:this.impuesto18+=parseFloat(e.TOTAL_IMPUESTO)*e.CANTIDAD,this.gravado+=this.toFloat(e.PRECIO_DETALLE)*e.CANTIDAD)})}postFactura(){if(!this.enEjecucion){this.enEjecucion=!0;const{nombre:e,RTN:o,direccion:i,ordenCompra:r,consReg:c,noReg:l}=this.formularioCliente.value,{tipoDescuento:_}=this.formularioDescuento.value,{recibido:G,tipoPago:Q}=this.formularioCambio.value,j=this.toFloat(this.pedido.SUBTOTAL)+this.toFloat(this.impuesto18)+this.toFloat(this.impuesto15)-this.descuento;this.facturaService.postFactura(this.pedido.ID,e,o,i,this.descuentoElegido?_.ID:"",this.descuento,this.exento,this.gravado,this.impuesto15,this.impuesto18,j,Q,G,this.cambioAux,r||0,l||"",c||"",this.pedido.SUBTOTAL,!!this.checkCai&&this.checkCai.checked).subscribe(F=>{!0===F.ok?(this.enEjecucion=!1,g().fire({title:"\xa1\xc9xito!",text:F.msg,icon:"success",showCancelButton:!0,confirmButtonColor:"#898989",cancelButtonColor:"#d12609",confirmButtonText:"Imprimir",cancelButtonText:"Salir de facturaci\xf3n",background:"#2B2B2B",color:"#fff",heightAuto:!1}).then(Y=>{Y.isConfirmed?this.generando||(this.generando=!0,this.facturaService.postImprimirFactura(this.pedido.ID).subscribe(z=>{let H=new Blob([z],{type:"application/pdf"}),L=window.URL.createObjectURL(H);document.createElement("a").href=L,window.open(L,"_blank"),this.generando=!1,this.router.navigateByUrl("/main/pedido/atencion")})):this.router.navigateByUrl("/main/pedido/atencion")})):(this.enEjecucion=!1,g().fire({title:"Advertencia",text:F.msg,icon:"warning",iconColor:"white",background:"#f8bb86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0}))})}}volver(){this.router.navigateByUrl("/main/pedido/atencion")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.F0),t.Y36(N),t.Y36(f.gz),t.Y36(it),t.Y36(h.e),t.Y36(s.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-factura"]],viewQuery:function(e,o){if(1&e&&(t.Gf(xo,5),t.Gf(To,5),t.Gf(Ao,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.inputCambio=i.first),t.iGM(i=t.CRH())&&(o.dineroRecibido=i.first),t.iGM(i=t.CRH())&&(o.checkCai=i.first)}},decls:3,vars:2,consts:[["class","container-fluid p-0",4,"ngIf"],[1,"pt-5"],["style","height: 100%; width: 100%; background: #2b2b2b; opacity: 0.2;","class","position-absolute top-50 start-50 translate-middle animate__animated animate__bounceIn",4,"ngIf"],[1,"container-fluid","p-0"],[1,""],[1,"row","justify-content-between","p-0","m-0"],[1,"col-lg-7","col-sm-12","mt-2"],[1,"container-xxl","rounded-4","fondoOscuro","text-white","mb-2"],[1,"fw-semibold","fs-4","text-center"],[1,"row","mb-2"],["class","mb-1 d-flex w-100 form-check mx-3",4,"ngIf"],[4,"ngIf"],[1,"table-responsive"],[1,"table","table-dark","table-striped","text-center",2,"white-space","nowrap"],[1,"bg-dark","text-light","align-middle"],["scope","col"],[1,"align-middle"],[4,"ngFor","ngForOf"],["rowspan","8","colspan","2",1,""],["class"," d-flex flex-column justify-content-start",4,"ngIf"],["style","word-wrap: break-word; word-break: break-all;","class"," d-flex flex-column justify-content-start",4,"ngIf"],["class","d-flex flex-wrap justify-content-between align-items-center mb-2",4,"ngIf"],["colspan","2",1,"table-active","fw-bold","text-center"],[1,"fw-semibold"],[1,"fw-bold"],[1,"col-lg-5","col-sm-12","mb-3","mt-2"],[1,"container-xxl","rounded-4","fondoOscuro","text-white"],[1,"d-flex","flex-column"],[1,"form-label","m-0","me-2","fw-semibold","col-3"],["appearance","legacy",1,"example-full-width"],["matInput","","disabled","true",3,"value"],[3,"formGroup"],[3,"opened","closed"],[3,"click"],[1,"my-0","fw-bold"],["matInput","","placeholder","","formControlName","nombre"],["matInput","","placeholder","","mask","0000-0000-000000","formControlName","RTN","autocomplete","off",3,"dropSpecialCharacters"],["matInput","","placeholder","","formControlName","direccion"],[1,"d-flex","align-items-center","justify-content-center","mb-"],[1,"fw-bold","fs-6","text-center"],["matInput","","placeholder","","formControlName","ordenCompra"],["matInput","","placeholder","","formControlName","consReg"],["matInput","","placeholder","","formControlName","noReg"],[1,"mb-3",3,"opened","closed"],[1,"form-label","m-0","mx-2","fw-semibold",2,"font-size","small"],["formControlName","tipoDescuento",3,"disabled"],[3,"value",4,"ngFor","ngForOf"],[1,"container","text-center"],["mat-flat-button","","type","button",1,"me-3","btn-p","mb-2",3,"disabled","click"],[1,"row","align-items-center"],[1,"col"],["matInput","","placeholder","Ingrese la cantidad","formControlName","descuento","type","number",3,"disabled","keydown","paste"],[1,"form-label","m-0","me-2","fw-semibold","col-4",2,"font-size","small"],["formControlName","tipoPago"],[1,"d-flex","justify-content-between"],[1,"d-flex","flex-column",2,"width","48%"],["autocomplete","off","matInput","","type","number","formControlName","recibido",3,"keyup","change","keydown","paste"],["matInput","","disabled","true","step","1.00","type","number",3,"value"],["cambio",""],[1,"d-flex","justify-content-start","mb-2"],[1,"d-flex"],["mat-flat-button","","type","button",1,"me-2","btn-p","mb-2","px-4",3,"disabled","click"],["class","me-2",3,"diameter",4,"ngIf"],["mat-flat-button","","type","button",1,"me-2","btn-a","mb-2","px-4",3,"disabled","click"],[1,"mb-1","d-flex","w-100","form-check","mx-3"],["role","button",1,"inputfield","d-flex","justify-content-center"],[1,"example-section"],["color","primary","checked","true",1,"example-margin"],["checkCai",""],[1,"d-flex","flex-column","mt-2"],["CAI",""],[2,"width","60%"],[1,"form-label","m-0","me-2","fw-semibold"],["appearance","legacy",2,"width","98%"],["NUM",""],[2,"width","40%"],["mat-icon-button","",3,"matMenuTriggerFor","disabled",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-icon-button","",3,"matMenuTriggerFor","disabled"],["id","iconConsumo"],[1,"d-flex","flex-column","justify-content-start"],["for","rango",1,"fw-semibold","d-flex","justify-content-start"],["for","rango",1,"fw-normal","text-start"],[1,"d-flex","flex-column","justify-content-start",2,"word-wrap","break-word","word-break","break-all"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","mb-2"],["for","fecha",1,"fw-semibold"],[3,"value"],[1,"me-2",3,"diameter"],[1,"position-absolute","top-50","start-50","translate-middle","animate__animated","animate__bounceIn",2,"height","100%","width","100%","background","#2b2b2b","opacity","0.2"],[1,"position-absolute","top-50","start-50","translate-middle"],[1,"animate__animated","animate__pulse","animate__slow","animate__infinite","infinite","pb-5"],[1,"d-flex","flex-column","justify-content-center"],["src","../../../../../../assets/icons/DRBURGERW.svg","width","300px","alt","",1,"pb-5"],[2,"color","white"]],template:function(e,o){1&e&&(t.YNc(0,yo,197,55,"div",0),t._UZ(1,"div",1),t.YNc(2,qo,7,0,"div",2)),2&e&&(t.Q6J("ngIf",!o.generando),t.xp6(2),t.Q6J("ngIf",o.generando))},dependencies:[d.sg,d.O5,v.lW,b.Hw,T.VK,T.OP,T.p6,Z.Ou,x.KE,x.hX,D.Nt,S.pp,S.ib,S.yz,S.yK,S.u4,W.gD,J.ey,tt.oG,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,at.hx,d.H9,d.uU],styles:["h3[_ngcontent-%COMP%]{text-align:center;padding:15px;font-weight:400;font-family:Lobster Two,cursive;font-size:45px;margin-bottom:0%}.example-full-width[_ngcontent-%COMP%]{width:100%;color:#fff}.example-mid-width[_ngcontent-%COMP%]{width:48%!important;color:#fff}.btn-p[_ngcontent-%COMP%]{border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;padding:inherit}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}.btn-a[_ngcontent-%COMP%]{background-color:#898989!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;transition:.3s ease all;border-radius:10px;line-height:50px;padding:inherit}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}.fondoOscuro[_ngcontent-%COMP%]{background-color:#212529}  .cdk-overlay-container{z-index:999999!important}.modal-body[_ngcontent-%COMP%]{background-color:#2b2b2b}.modal-footer[_ngcontent-%COMP%]{background-color:#454545}#fondoModal[_ngcontent-%COMP%]{background-color:#232323!important;color:#fff}#inputMayus[_ngcontent-%COMP%]{text-transform:uppercase}@media only screen and (max-width:991px){.eliminarPaddin[_ngcontent-%COMP%]{padding-left:0}.textResponsive[_ngcontent-%COMP%]{font-size:small!important}}.textResponsive[_ngcontent-%COMP%]{font-size:small!important}#iconConsumo[_ngcontent-%COMP%]{color:#82da71}"]}),n})(),So=(()=>{class n{constructor(e,o){this.pantallaService=e,this.router=o}canActivate(e,o){return this.pantallaService.validarPermiso(30).pipe((0,C.b)(i=>{!0!==i&&this.router.navigateByUrl("/main/dashboard")}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(A.i),t.LFG(f.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Fo=["categoria"],Ro=["tipoProducto"],Lo=["bebida"],Jo=["cerrarCrear"],Bo=["cantidad"],Go=["precio"],Qo=["nombreProducto"];function jo(n,a){if(1&n&&(t.TgZ(0,"option",39),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.ID),t.xp6(1),t.hij(" ",e.NOMBRE,"")}}function Yo(n,a){if(1&n&&(t.TgZ(0,"option",39),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.TIPO_PRODUCTO,"")}}function zo(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",40)(1,"button",41),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.seleccionarProducto(r))}),t.TgZ(2,"div")(3,"label",42),t._uU(4),t.qZA(),t.TgZ(5,"div",43)(6,"div",44)(7,"label",45),t._uU(8),t.ALo(9,"lowercase"),t.qZA()()(),t.TgZ(10,"label",46),t._uU(11),t.ALo(12,"currency"),t.qZA()()()()}if(2&n){const e=a.$implicit;t.xp6(4),t.Oqu(e.NOMBRE),t.xp6(4),t.Oqu(t.lcZ(9,3,e.DESCRIPCION)),t.xp6(3),t.Oqu(t.xi3(12,5,e.PRECIO,"Lps. "))}}let Ho=(()=>{class n{constructor(e,o,i,r,c,l,_){this.activatedRouter=e,this.pedidoService=o,this.productoService=i,this.categoriaService=r,this.authService=c,this.fb=l,this.router=_,this.precioAux=this.detalleSeleccionado.PRECIO_PRODUCTO,this.cantidadAux=this.detalleSeleccionado.CANTIDAD,this.detalleNuevo={ID:0,ID_PEDIDO:0,ID_PRODUCTO:0,NOMBRE_PRODUCTO:"",PRECIO_PRODUCTO:0,DESCRIPCION:"",ID_ESTADO:0,ESTADO:"",COLOR:"",CANTIDAD:0,PARA_LLEVAR:!1,HORA:new Date,INFORMACION:"",TOTAL_IMPUESTO:"",PRECIO_DETALLE:"",PORCENTAJE_IMPUESTO:0,ID_IMPUESTO:0},this.onCerrar=new t.vpe,this.pantalla="Men\xfa",this.generando=!1,this.editando=!1,this.checked=!1,this.enEjecucion=!1,this.listaCategoria=[],this.listaBebidas=[],this.listaTipo=[],this.listaProducto=[],this.listaBebida=[],this.productosAgregados=[],this.formularioBusqueda=this.fb.group({buscar:["",[s.kI.required,s.kI.maxLength(100)]]}),this.formularioEliminacion=this.fb.group({motivo:["",[s.kI.required,s.kI.maxLength(50),s.kI.minLength(10)]]})}get pedido(){return this.pedidoService.pedidoSeleccionado}get pedidoSeleccionado(){return this.pedidoService.pedidoSeleccionado}get detalleSeleccionado(){return this.pedidoService.detalleSeleccionado}ngOnInit(){this.cargarCategoria(),this.cargarTipoProducto(),this.cargarDetalle()}validarNumeros(e){return(0,M.Z)(function*(){("+"===e.key||"-"===e.key||"e"===e.key||"E"===e.key||"."===e.key)&&e.preventDefault()})()}ngAfterViewInit(){this.cargarProductos()}cargarCategoria(){this.categoriaService.getCategorias(this.authService.usuario.id_usuario,"","99999").subscribe(o=>{this.listaCategoria=o.catalogos})}cargarDetalle(){let e="";this.activatedRouter.params.subscribe(o=>{e=o.id_detalle,this.pedidoService.getUnDetallePedido(e).subscribe(i=>{this.detalleNuevo.CANTIDAD=this.detalleSeleccionado.CANTIDAD,this.detalleNuevo.ID_PRODUCTO=this.detalleSeleccionado.ID_PRODUCTO,this.detalleNuevo.PRECIO_PRODUCTO=this.detalleSeleccionado.PRECIO_PRODUCTO})})}cargarTipoProducto(){this.productoService.getTipoProducto().subscribe(e=>{this.listaTipo=e.tipoProducto})}cargarProductos(){const e=this.categoria.nativeElement.value,o=this.tipoProducto.nativeElement.value,{buscar:i}=this.formularioBusqueda.value;this.pedidoService.getProductos(i,o,e).subscribe(r=>{this.listaProducto=r.productos})}seleccionarProducto(e){let o=e.PRECIO;this.detalleNuevo.ID_PRODUCTO=e.ID,this.precio.nativeElement.value=this.cantidad.nativeElement.value*parseFloat(o),this.nombreProducto.nativeElement.value=e.NOMBRE,this.detalleNuevo.PRECIO_PRODUCTO=parseFloat(o),this.detalleNuevo.CANTIDAD=this.cantidad.nativeElement.value,this.cantidadAux=this.cantidad.nativeElement.value}cambiarCantidad(){this.precio.nativeElement.value=this.detalleNuevo.PRECIO_PRODUCTO*this.cantidad.nativeElement.value,this.cantidadAux=this.cantidad.nativeElement.value,this.detalleNuevo.CANTIDAD=this.cantidad.nativeElement.value}actualizarDetalle(){const{motivo:e}=this.formularioEliminacion.value;this.enEjecucion||this.pedidoService.putDetalle(this.detalleSeleccionado.ID,this.detalleNuevo.ID_PRODUCTO,this.cantidadAux,this.authService.usuario.id_usuario,e).subscribe(o=>{this.router.navigateByUrl("/main/pedido/atencion"),!0===o.ok?(this.enEjecucion=!1,g().fire({title:"\xa1\xc9xito!",text:o.msg,icon:"success",iconColor:"white",background:"#a5dc86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0})):(this.enEjecucion=!1,g().fire({title:"Advertencia",text:o.msg,icon:"warning",iconColor:"white",background:"#f8bb86",color:"white",toast:!0,position:"top-right",showConfirmButton:!1,timer:4500,timerProgressBar:!0}))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.gz),t.Y36(O),t.Y36(X.U),t.Y36(V.n),t.Y36(h.e),t.Y36(s.qu),t.Y36(f.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-editar-detalle"]],viewQuery:function(e,o){if(1&e&&(t.Gf(Fo,5),t.Gf(Ro,5),t.Gf(Lo,5),t.Gf(Jo,5),t.Gf(Bo,5),t.Gf(Go,5),t.Gf(Qo,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.categoria=i.first),t.iGM(i=t.CRH())&&(o.tipoProducto=i.first),t.iGM(i=t.CRH())&&(o.bebida=i.first),t.iGM(i=t.CRH())&&(o.cerrarCrear=i.first),t.iGM(i=t.CRH())&&(o.cantidad=i.first),t.iGM(i=t.CRH())&&(o.precio=i.first),t.iGM(i=t.CRH())&&(o.nombreProducto=i.first)}},outputs:{onCerrar:"onCerrar"},decls:66,vars:11,consts:[[1,"d-flex","justify-content-between","flex-wrap",2,"background-color","#3f3f3f"],[1,"d-flex","justify-content-between","px-3","flex-wrap","anchoInfo",2,"width","80%"],["appearance","legacy",1,"example-full-width","mt-1"],["matInput","",1,"textResponsive",3,"disabled","value"],["nombreProducto",""],["appearance","legacy",1,"example-mid-width"],["matInput","","type","number","min","0","step","1.00",1,"textResponsive",3,"value","keyup","change","keydown","paste"],["cantidad",""],["matInput","","type","number","min","0","step","1.00",1,"textResponsive",3,"value","disabled","paste"],["precio",""],[1,"pe-3","anchoFormulario",2,"width","20%"],[3,"formGroup"],["for","floatingTextarea2",2,"color","white"],["formControlName","motivo","id","floatingTextarea2",1,"form-control"],[1,"d-flex","py-1"],[1,"example-button-row"],[1,"example-flex-container"],["mat-flat-button","","type","button",1,"btn-a","me-2",3,"disabled","click"],[1,"ms-2","me-1"],[1,"me-2"],["mat-flat-button","","type","submit","routerLink","main/pedido/atencion",1,"btn-p"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[1,"row","align-items-center"],[1,"col-lg-4","col-md-12","my-1"],[1,"input-group"],["for","inputGroupSelect01",1,"input-group-text"],["id","inputGroupSelect01",1,"form-select",3,"change"],["categoria",""],["value","","selected",""],[3,"value",4,"ngFor","ngForOf"],["tipoProducto",""],[3,"formGroup","ngSubmit"],[1,"input-group","input-group-sm"],["id","inputGroup-sizing-sm",1,"input-group-text"],["type","text","formControlName","buscar",1,"form-control","form-control-sm","form-tama\xf1oNormal"],[1,"container-fluid","overflow-auto",2,"color","white"],[1,"row","text-center","mt-3"],["class","col-xxl-4 col-md-6 col-sm-12 nav-link",4,"ngFor","ngForOf"],[3,"value"],[1,"col-xxl-4","col-md-6","col-sm-12","nav-link"],["type","button",1,"btn","btn-primary","categoria-tama\xf1o","col-12","text-light",2,"width","95%",3,"click"],[1,"form-label","fw-bold","fs-5","mb-0","titulo",2,"color","white"],[1,"tama\xf1oTexto","overflow-auto"],[1,"d-flex","h-100","align-items-center","justify-content-center"],[1,"d-flex","form-label","fw-light","lh-sm","detalle","justify-content-center","text-break","mt-1","mb-0",2,"color","white"],[1,"form-label","fs-6","fw-semibold","titulo",2,"color","white"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),t._uU(4,"Plato"),t.qZA(),t._UZ(5,"input",3,4),t.qZA(),t.TgZ(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Cantidad"),t.qZA(),t.TgZ(10,"input",6,7),t.NdJ("keyup",function(){return o.cambiarCantidad()})("change",function(){return o.cambiarCantidad()})("keydown",function(r){return o.validarNumeros(r)})("paste",function(r){return r.preventDefault()}),t.qZA()(),t.TgZ(12,"mat-form-field",5)(13,"mat-label"),t._uU(14,"Precio"),t.qZA(),t.TgZ(15,"input",8,9),t.NdJ("paste",function(r){return r.preventDefault()}),t.qZA()()(),t.TgZ(17,"div",10)(18,"form",11)(19,"label",12),t._uU(20,"Motivo:"),t.qZA(),t.TgZ(21,"div"),t._UZ(22,"textarea",13),t.qZA()(),t.TgZ(23,"div",14)(24,"div",15)(25,"div",16)(26,"button",17),t.NdJ("click",function(){return o.actualizarDetalle()}),t.TgZ(27,"mat-icon",18),t._uU(28,"save"),t.qZA(),t.TgZ(29,"span",19),t._uU(30,"Guardar"),t.qZA()(),t.TgZ(31,"button",20)(32,"mat-icon",18),t._uU(33,"arrow_back_ios"),t.qZA()()()()()()(),t.ynx(34),t.TgZ(35,"div")(36,"ul",21)(37,"li",22)(38,"div",23)(39,"div",24)(40,"div",25)(41,"label",26),t._uU(42,"Categor\xedas"),t.qZA(),t.TgZ(43,"select",27,28),t.NdJ("change",function(){return o.cargarProductos()}),t.TgZ(45,"option",29),t._uU(46,"Filtrar por categor\xeda"),t.qZA(),t.YNc(47,jo,2,2,"option",30),t.qZA()()(),t.TgZ(48,"div",24)(49,"div",25)(50,"label",26),t._uU(51,"Tipo"),t.qZA(),t.TgZ(52,"select",27,31),t.NdJ("change",function(){return o.cargarProductos()}),t.TgZ(54,"option",29),t._uU(55,"Filtrar por tipo"),t.qZA(),t.YNc(56,Yo,2,2,"option",30),t.qZA()()(),t.TgZ(57,"div",24)(58,"form",32),t.NdJ("ngSubmit",function(){return o.cargarProductos()}),t.TgZ(59,"div",33)(60,"span",34),t._uU(61,"Buscar:"),t.qZA(),t._UZ(62,"input",35),t.qZA()()()()()()(),t.TgZ(63,"div",36)(64,"div",37),t.YNc(65,zo,13,8,"div",38),t.qZA()(),t.BQk()),2&e&&(t.xp6(5),t.Q6J("disabled",!0)("value",o.detalleSeleccionado.NOMBRE_PRODUCTO),t.xp6(5),t.Q6J("value",o.detalleSeleccionado.CANTIDAD),t.xp6(5),t.Q6J("value",o.detalleSeleccionado.PRECIO_PRODUCTO)("disabled",!0),t.xp6(3),t.Q6J("formGroup",o.formularioEliminacion),t.xp6(8),t.Q6J("disabled",o.detalleSeleccionado.CANTIDAD==o.detalleNuevo.CANTIDAD&&o.detalleSeleccionado.ID_PRODUCTO==o.detalleNuevo.ID_PRODUCTO||o.cantidadAux<1||o.formularioEliminacion.invalid),t.xp6(21),t.Q6J("ngForOf",o.listaCategoria),t.xp6(9),t.Q6J("ngForOf",o.listaTipo),t.xp6(2),t.Q6J("formGroup",o.formularioBusqueda),t.xp6(7),t.Q6J("ngForOf",o.listaProducto))},dependencies:[d.sg,f.rH,v.lW,b.Hw,x.KE,x.hX,D.Nt,s._Y,s.YN,s.Kr,s.Fj,s.JJ,s.JL,s.sg,s.u,d.i8,d.H9],styles:["h3[_ngcontent-%COMP%]{text-align:center;padding:15px;font-weight:400;font-family:Lobster Two,cursive;font-size:45px;margin-bottom:0%}  .cdk-overlay-container{z-index:9999!important}.btn-p[_ngcontent-%COMP%]{border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;padding:inherit}.noselect[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}.btn-a[_ngcontent-%COMP%]{background-color:#898989!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;transition:.3s ease all;border-radius:10px;padding:inherit}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}.modal-body[_ngcontent-%COMP%]{background-color:#2b2b2b}.modal-footer[_ngcontent-%COMP%]{background-color:#454545}#fondoModal[_ngcontent-%COMP%]{background-color:#232323!important;color:#fff}@media only screen and (max-width:991px){.anchoInfo[_ngcontent-%COMP%]{width:100%!important}.anchoFormulario[_ngcontent-%COMP%]{width:100%!important;padding-left:16px}.eliminarPaddin[_ngcontent-%COMP%]{padding-left:0}.textResponsive[_ngcontent-%COMP%]{font-size:small!important}}.textResponsive[_ngcontent-%COMP%]{font-size:small!important}.form-control[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%]{min-height:3.125rem;line-height:initial;color:#000!important}.form-tama\\f1oNormal[_ngcontent-%COMP%]{min-height:38px!important}.form-control[_ngcontent-%COMP%]:focus{background-color:#fff;box-shadow:none}.background[_ngcontent-%COMP%]{width:100%;background-image:url(/assets/img/FondoP1.svg);background-repeat:no-repeat;background-size:cover;background-position:center;background-attachment:fixed}@media (max-width:1200px){.categoria-tama\\f1o[_ngcontent-%COMP%]{width:95%!important;height:100px!important;margin-bottom:4%!important}.tama\\f1oTexto[_ngcontent-%COMP%]{height:40px!important}}@media (max-width:576px){.categoria-tama\\f1o[_ngcontent-%COMP%]{width:80%!important;height:65px!important;margin-bottom:3%!important}.tama\\f1oTexto[_ngcontent-%COMP%]{height:16px!important}.titulo[_ngcontent-%COMP%]{font-size:small!important}.detalle[_ngcontent-%COMP%]{font-size:x-small!important;margin-bottom:0%!important}}@media (max-width:320px){.categoria-tama\\f1o[_ngcontent-%COMP%]{width:95%!important;height:65px!important;margin-bottom:3%!important}.detalle[_ngcontent-%COMP%]{font-size:xx-small!important;margin-bottom:0%!important}.titulo[_ngcontent-%COMP%]{font-size:small!important}.tituloP[_ngcontent-%COMP%]{font-size:medium!important}}.tama\\f1oTexto[_ngcontent-%COMP%]{height:70px}.categoria-tama\\f1o[_ngcontent-%COMP%]{width:95%;height:130px;margin-bottom:5%}.example-full-width[_ngcontent-%COMP%]{width:100%;color:#fff}.example-mid-width[_ngcontent-%COMP%]{width:48%;color:#fff}"]}),n})(),Ko=(()=>{class n{constructor(e,o){this.pedidoService=e,this.router=o}canActivate(e,o){const{id_detalle:i}=e.params;return this.pedidoService.validarDetalle(i).pipe((0,C.b)(r=>{!1===r&&this.router.navigateByUrl("/main/pedido/atencion")}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(O),t.LFG(f.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $o(n,a){1&n&&(t.TgZ(0,"tr")(1,"td",9)(2,"div",10)(3,"mat-icon",11),t._uU(4,"info_outline"),t.qZA(),t.TgZ(5,"strong",12),t._uU(6,"No hay pedidos pendientes"),t.qZA()()()())}function Vo(n,a){if(1&n&&(t.TgZ(0,"td",18)(1,"span",16),t._uU(2),t.ALo(3,"titlecase"),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q2q("style","color: ",e.COLOR,";",t.Ckj),t.xp6(1),t.hij(" ",t.lcZ(3,2,e.ESTADO),"")}}function Xo(n,a){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,Vo,4,4,"td",13),t.TgZ(2,"td",14),t._uU(3),t.qZA(),t.TgZ(4,"td",15),t._uU(5),t._UZ(6,"br"),t.TgZ(7,"span",16),t._uU(8),t.qZA()(),t.TgZ(9,"td",17),t._uU(10),t.ALo(11,"date"),t.qZA()()),2&n){const e=a.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf","4"!==e.ESTADO&&"5"!==e.ESTADO&&"6"!==e.ESTADO),t.xp6(2),t.Oqu(e.MESA),t.xp6(2),t.AsE("",e.NOMBRE_PRODUCTO," x"," "+e.CANTIDAD," "),t.xp6(2),t.Tol(o.getColorPlato(e.PARA_LLEVAR)),t.xp6(1),t.hij(" ",e.PARA_LLEVAR?"Para Llevar":"Comer Aqu\xed"," "),t.xp6(2),t.Oqu(t.xi3(11,8,e.HORA,"h:mm a"))}}let Wo=(()=>{class n{constructor(e,o,i,r,c,l){this.usuario=e,this.cocinaService=o,this.fb=i,this.authService=r,this.ingresosService=c,this.wsService=l,this.tamano=0,this.limite=0,this.indice=-1,this.desde="0",this.registros=[],this.generando=!1,this.buscando=!1,this.actualizandoEstado=[],this.creando=!1,this.editando=!1,this.formularioBusqueda=this.fb.group({buscar:["",[s.kI.required,s.kI.maxLength(100)]]})}get detalles(){return this.cocinaService.detalle}cargarRegistros(){this.subscripcion=this.cocinaService.getDetalleVistaCliente(this.usuario.usuario.id_usuario).subscribe(o=>{this.registros=o.detalles,this.tamano=o.countDetalles,this.limite=o.limite})}recargar(){const e=this.usuario.usuario.id_usuario;let{buscar:o}=this.formularioBusqueda.value;this.subscripcion=this.cocinaService.getDetalleVistaCliente(e,o,this.limite.toString(),this.desde).subscribe(i=>{this.registros=i.detalles,this.tamano=i.countDetalles,this.limite=i.limite})}registrarIngreso(){this.ingreso=this.ingresosService.eventoIngreso(this.usuario.usuario.id_usuario,31).subscribe()}getColorPlato(e){return e?"llevar":"noLlevar"}ngOnInit(){this.subsSocket1=this.wsService.listen("actualizarTabla").subscribe(e=>{this.recargar()}),this.subsSocket2=this.wsService.listen("productoAgregado").subscribe(e=>{this.recargar()}),this.subsSocket3=this.wsService.listen("actualizarMesa").subscribe(e=>{this.recargar()}),this.subsSocket4=this.wsService.listen("recargar").subscribe(e=>{this.recargar()}),this.cargarRegistros()}ngOnDestroy(){this.subsSocket1&&this.subsSocket1.unsubscribe(),this.subsSocket2&&this.subsSocket2.unsubscribe(),this.subsSocket3&&this.subsSocket3.unsubscribe(),this.subscripcion&&this.subscripcion.unsubscribe(),this.subsSocket4&&this.subsSocket4.unsubscribe(),this.ingreso&&this.ingreso.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.e),t.Y36(et),t.Y36(s.qu),t.Y36(h.e),t.Y36(k.K),t.Y36(q.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-vista-cliente"]],decls:20,vars:2,consts:[[1,"pb-4"],["id","contenedor",1,"container-md","rounded-4","pb-2"],[1,"text-white-50","m-2"],["id","no-more-tables",1,"table-responsive","tabla"],[1,"table","table-dark","table-striped"],[1,"bg-dark","text-light"],[1,"align-middle"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","14",1,"align-middle"],[1,"d-flex","align-items-center","justify-content-center"],["id","iconBlock"],[1,"fw-normal","text-light","ms-2"],["data-title","Estado",4,"ngIf"],["data-title","Mesa"],["data-title","Plato"],[1,"fw-semibold"],["data-title","Hora del pedido"],["data-title","Estado"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2,"Pedidos"),t.qZA(),t.TgZ(3,"div",1),t._UZ(4,"hr",2),t.TgZ(5,"div",3)(6,"table",4)(7,"thead",5)(8,"tr")(9,"th"),t._uU(10,"Estado"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Mesa"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Plato"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Hora del pedido"),t.qZA()()(),t.TgZ(17,"tbody",6),t.YNc(18,$o,7,0,"tr",7),t.YNc(19,Xo,12,11,"tr",8),t.qZA()()()()()),2&e&&(t.xp6(18),t.Q6J("ngIf",o.registros.length<1),t.xp6(1),t.Q6J("ngForOf",o.registros))},dependencies:[d.sg,d.O5,b.Hw,d.rS,d.uU],styles:['@import"https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined";.background[_ngcontent-%COMP%]{background-color:#e0e0e0}#contenedor[_ngcontent-%COMP%]{background-color:#212529}#iconEditar[_ngcontent-%COMP%]{color:#898989}#iconBlock[_ngcontent-%COMP%]{color:#f65757}label[_ngcontent-%COMP%]{color:#fff}thead[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{text-align:center}.btn-p[_ngcontent-%COMP%]{border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}.btn-a[_ngcontent-%COMP%]{background-color:#898989!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;border-radius:10px;line-height:50px}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}h3[_ngcontent-%COMP%]{text-align:center;padding:15px;font-weight:400;font-family:Lobster Two,cursive;font-size:45px;margin-bottom:0%}.noLlevar[_ngcontent-%COMP%]{color:#58b433}.llevar[_ngcontent-%COMP%]{color:#d12609}.modal-body[_ngcontent-%COMP%]{background-color:#2b2b2b}.modal-footer[_ngcontent-%COMP%]{background-color:#454545}#fondoModal[_ngcontent-%COMP%]{background-color:#232323!important;color:#fff}#paginador[_ngcontent-%COMP%]{font-weight:700;margin-top:2px;background-color:#212529}@media only screen and (max-width:800px){#no-more-tables[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], #no-more-tables[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], #no-more-tables[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block}#no-more-tables[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{position:absolute;top:-9999px;left:-9999px}#no-more-tables[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{position:relative;padding-left:50%;border:none}#no-more-tables[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-title);position:absolute;left:6px;font-weight:700}#no-more-tables[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}}']}),n})(),tn=(()=>{class n{constructor(e,o){this.facturaService=e,this.router=o}canActivate(e,o){const{id_pedido:i}=e.params;return this.facturaService.validarPedido(i).pipe((0,C.b)(r=>{!1===r&&this.router.navigateByUrl("/main/pedido/atencion")}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(it),t.LFG(f.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),en=(()=>{class n{constructor(e,o){this.pantallaService=e,this.router=o}canActivate(e,o){return this.pantallaService.validarPermiso(25).pipe((0,C.b)(i=>{!0!==i&&this.router.navigateByUrl("/main/dashboard")}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(A.i),t.LFG(f.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),on=(()=>{class n{constructor(e,o){this.pantallaService=e,this.router=o}canActivate(e,o){return this.pantallaService.validarPermiso(32).pipe((0,C.b)(i=>{!0!==i&&this.router.navigateByUrl("/main/dashboard")}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(A.i),t.LFG(f.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nn=(()=>{class n{constructor(e,o){this.pantallaService=e,this.router=o}canActivate(e,o){return this.pantallaService.validarPermiso(33).pipe((0,C.b)(i=>{!0!==i&&this.router.navigateByUrl("/main/dashboard")}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(A.i),t.LFG(f.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),an=(()=>{class n{constructor(e,o){this.pantallaService=e,this.router=o}canActivate(e,o){return this.pantallaService.validarPermiso(31).pipe((0,C.b)(i=>{!0!==i&&this.router.navigateByUrl("/main/dashboard")}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(A.i),t.LFG(f.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rn=(()=>{class n{constructor(e){this.http=e,this.baseURL=I.N.baseURL}getFacturas(e,o,i,r){return this.http.get(`${this.baseURL}/facturacion/facturas/?limite=${e||""}&desde=${o||""}&fechaInicial=${i||""}&fechaFinal=${r||""}`).pipe((0,m.K)(l=>(0,p.of)(l.error)))}postImprimirFactura(e){return this.http.post(`${this.baseURL}/facturacion/facturar/factura/${e}`,{},{responseType:"blob"}).pipe((0,m.K)(r=>(0,p.of)(r.error)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(w.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sn(n,a){1&n&&(t.TgZ(0,"tr")(1,"td",20)(2,"div",21)(3,"mat-icon",22),t._uU(4,"info_outline"),t.qZA(),t.TgZ(5,"strong",23),t._uU(6,"No se encontraron registros"),t.qZA()()()())}function cn(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"tr",24)(1,"td",25),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td",26),t._uU(5),t.qZA(),t.TgZ(6,"td",27),t._uU(7),t.qZA(),t.TgZ(8,"td",28),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"td",29)(12,"button",30),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.facturar(r.ID_PEDIDO))}),t.TgZ(13,"mat-icon",31),t._uU(14,"receipt_long"),t.qZA()()()()}if(2&n){const e=a.$implicit;t.xp6(2),t.Oqu(t.xi3(3,4,e.HORA_SOLICITUD,"d/M/yy, h:mm a")),t.xp6(3),t.Oqu(e.NOMBRE_USUARIO),t.xp6(2),t.Oqu(e.NOMBRE_MESA),t.xp6(2),t.Oqu(t.xi3(10,7,e.TOTAL,"Lps. "))}}const ln=function(n){return[5,10,25,50,n]},mn=[{path:"",children:[{path:"atencion",component:ge,canActivate:[P.D,ot,So]},{path:"cocina",component:Ee,canActivate:[P.D,ot,an]},{path:"estado",component:ze,canActivate:[P.D,en]},{path:"descuento",component:Co,canActivate:[P.D,vo]},{path:"factura/:id_pedido",component:No,canActivate:[P.D,tn,nn]},{path:"historial-factura",component:(()=>{class n{constructor(e,o,i,r,c){this.reporteFacturaService=e,this.fb=o,this.pantalla=i,this.usuario=r,this.ingresosService=c,this.registros=[],this.tamano=0,this.limite=0,this.indice=-1,this.generando=!1,this.creando=!1,this.editando=!1,this.estadoCaja=!1,this.miFecha=new Date,this.currentDate=new Date,this.buscando=!1,this.formularioBusqueda=this.fb.group({fechaInicial:[""],fechaFinal:[""],buscar:["",[s.kI.required,s.kI.maxLength(100)]]}),this.enEjecucion=!1}ngOnInit(){this.registrarIngreso(),this.cargarRegistros()}ngOnDestroy(){this.subscripcion&&this.subscripcion.unsubscribe(),this.ingreso&&this.ingreso.unsubscribe()}cargarRegistros(){this.subscripcion=this.reporteFacturaService.getFacturas().subscribe(o=>{this.registros=o.facturas,this.tamano=o.countFactura,this.limite=o.limite})}registrarIngreso(){this.ingreso=this.ingresosService.eventoIngreso(this.usuario.usuario.id_usuario,34).subscribe()}get permisos(){return this.pantalla.permisos}cambioDePagina(e){this.paginadorPorReferencia=e,this.subscripcion.unsubscribe();let{buscar:i}=this.formularioBusqueda.value,{fechaInicial:r}=this.formularioBusqueda.value,{fechaFinal:c}=this.formularioBusqueda.value;this.buscando||(i="",r="",c="");let l=(e.pageIndex*e.pageSize).toString();this.subscripcion=this.reporteFacturaService.getFacturas(e.pageSize.toString(),l,r,c).subscribe(_=>{this.registros=_.facturas,this.tamano=_.countFactura,this.limite=_.limite})}buscarRegistro(){this.paginadorPorReferencia&&(this.indice=-1),this.subscripcion.unsubscribe();const{buscar:o}=this.formularioBusqueda.value;this.buscando=""!==o,this.subscripcion=this.reporteFacturaService.getFacturas("","",this.formularioBusqueda.value.fechaInicial,this.formularioBusqueda.value.fechaFinal).subscribe(i=>{this.indice=0,this.registros=i.facturas,this.tamano=i.countFactura,this.limite=i.limite})}facturar(e){this.enEjecucion||(this.enEjecucion=!0,this.reporteFacturaService.postImprimirFactura(e).subscribe(o=>{let i=new Blob([o],{type:"application/pdf"}),r=window.URL.createObjectURL(i);document.createElement("a").href=r,window.open(r,"_blank"),this.enEjecucion=!1}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(rn),t.Y36(s.qu),t.Y36(A.i),t.Y36(h.e),t.Y36(k.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-reporte-facturas"]],decls:39,vars:9,consts:[[1,""],["id","contenedor",1,"container-md","rounded-4","pb-2"],[1,"d-flex","flex-wrap","justify-content-between","align-items-center","pb-0","pt-3"],[1,"d-flex","flex-wrap"],[1,"d-flex","align-items-center","flex-wrap",2,"height","100%"],[1,"d-flex","align-items-center","flex-wrap",3,"formGroup"],[1,"mb-2","d-flex","align-items-center","flex-wrap"],[1,"me-3"],["type","datetime-local","formControlName","fechaInicial","id","desde","placeholder","Desde",1,"rounded-3","me-3",2,"background-color","white"],["type","datetime-local","formControlName","fechaFinal","placeholder","Hasta",1,"rounded-3","me-3"],["mat-flat-button","","type","button",1,"ms-3","btn-a","mb-2",3,"click"],["id","iconBuscar"],[1,"text-white-50","m-2"],["id","no-more-tables",1,"table-responsive","tabla"],[1,"table","table-dark","table-striped"],[1,"bg-dark","text-light"],[4,"ngIf"],["class","align-middle",4,"ngFor","ngForOf"],["id","paginador","aria-label","Select page",3,"length","pageSize","pageSizeOptions","pageIndex","page"],[1,"mt-4"],["colspan","14",1,"align-middle"],[1,"d-flex","align-items-center","justify-content-center"],["id","iconBlock"],[1,"fw-normal","text-light","ms-2"],[1,"align-middle"],["data-title","Fecha"],["data-title","Mesero"],["data-title","Nombre de la Mesa"],["data-title","Total Facturado"],["data-title","Factura"],["mat-fab","",3,"click"],["id","iconMas"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2,"Historial de Facturaci\xf3n"),t.qZA(),t.TgZ(3,"div",1)(4,"div",2),t._UZ(5,"div",3),t.TgZ(6,"div",4)(7,"form",5)(8,"div",6)(9,"label",7),t._uU(10,"Desde:"),t.qZA(),t._UZ(11,"input",8),t.TgZ(12,"label",7),t._uU(13,"Hasta:"),t.qZA(),t._UZ(14,"input",9),t.qZA()(),t.TgZ(15,"button",10),t.NdJ("click",function(){return o.buscarRegistro()}),t.TgZ(16,"mat-icon",11),t._uU(17,"search"),t.qZA()()()(),t._UZ(18,"hr",12),t.TgZ(19,"div",13)(20,"table",14)(21,"thead",15)(22,"tr")(23,"th"),t._uU(24,"Fecha"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Mesero"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Nombre de la Mesa"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Total Facturado"),t.qZA(),t.TgZ(31,"th"),t._uU(32,"Factura"),t.qZA()()(),t.TgZ(33,"tbody"),t.YNc(34,sn,7,0,"tr",16),t.YNc(35,cn,15,10,"tr",17),t.qZA()()(),t.TgZ(36,"mat-paginator",18),t.NdJ("page",function(r){return o.cambioDePagina(r)}),t.qZA()(),t.TgZ(37,"div",19),t._UZ(38,"br"),t.qZA()()),2&e&&(t.xp6(7),t.Q6J("formGroup",o.formularioBusqueda),t.xp6(27),t.Q6J("ngIf",o.registros.length<1),t.xp6(1),t.Q6J("ngForOf",o.registros),t.xp6(1),t.Q6J("length",o.tamano)("pageSize",o.limite)("pageSizeOptions",t.VKq(7,ln,o.tamano))("pageIndex",o.indice))},dependencies:[d.sg,d.O5,v.lW,b.Hw,R.NW,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,d.H9,d.uU],styles:[".background[_ngcontent-%COMP%]{background-color:#e0e0e0}#contenedor[_ngcontent-%COMP%]{background-color:#212529}#iconEditar[_ngcontent-%COMP%]{color:#898989}#iconBlock[_ngcontent-%COMP%]{color:#f65757}#iconMas[_ngcontent-%COMP%]{color:#5988ec}label[_ngcontent-%COMP%]{color:#fff}thead[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{text-align:center}.btn-p[_ngcontent-%COMP%]{border-radius:10px;background-color:#d12609!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all}.btn-p[_ngcontent-%COMP%]:hover{background-color:#ff2600!important;border:0}.btn-a[_ngcontent-%COMP%]{background-color:#898989!important;font-size:1rem;font-weight:400;min-height:3.125rem;border:none;cursor:pointer;transition:.3s ease all;border-radius:10px;line-height:50px}.mat-fab[_ngcontent-%COMP%]{background-color:transparent!important;box-shadow:none!important}.btn-a[_ngcontent-%COMP%]:hover{background-color:#b1b1b1!important;border:0}h3[_ngcontent-%COMP%]{text-align:center;padding:15px;font-weight:400;font-family:Lobster Two,cursive;font-size:45px;margin-bottom:0%}.modal-body[_ngcontent-%COMP%]{background-color:#2b2b2b}.modal-footer[_ngcontent-%COMP%]{background-color:#454545}#fondoModal[_ngcontent-%COMP%]{background-color:#232323!important;color:#fff}#paginador[_ngcontent-%COMP%]{font-weight:700;margin-top:2px;background-color:#212529}@media only screen and (max-width:800px){#no-more-tables[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], #no-more-tables[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], #no-more-tables[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block}#no-more-tables[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{position:absolute;top:-9999px;left:-9999px}#no-more-tables[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{position:relative;padding-left:50%;border:none}#no-more-tables[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-title);position:absolute;left:6px;font-weight:700}#no-more-tables[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #ccc}}[_nghost-%COMP%]     .mat-progress-spinner circle, .mat-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#fff}"]}),n})(),canActivate:[P.D,(()=>{class n{constructor(e,o){this.pantallaService=e,this.router=o}canActivate(e,o){return this.pantallaService.validarPermiso(34).pipe((0,C.b)(i=>{!0!==i&&this.router.navigateByUrl("/main/dashboard")}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(A.i),t.LFG(f.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"vista-cliente",component:Wo,canActivate:[P.D]},{path:"editar/:id_detalle",component:Ho,canActivate:[Ko,P.D,on]},{path:"**",redirectTo:"atencion"}]}];let pn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[f.Bz.forChild(mn),f.Bz]}),n})();var gn=u(5011);const _n=null;let fn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,pn,gn.i,s.UX,at.yI.forRoot()]}),n})()}}]);